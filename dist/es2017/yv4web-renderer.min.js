/* Yocto-Visualization-4web renderer library (ES2017 1.10.51774) - www.yoctopuce.com */
var oe=class{constructor(e,t,n){this.a=e,this.b=t,this.c=n}static FromXYCoord(e,t){return new oe(e,t,1)}multiplyByM(e){return new oe(e.a*this.a+e.b*this.b+e.c*this.c,e.d*this.a+e.e*this.b+e.f*this.c,e.g*this.a+e.h*this.b+e.i*this.c)}multiplyByN(e){return new oe(this.a*e,this.b*e,this.c*e)}AddV(e){return new oe(this.a+e.a,this.b+e.b,this.c+e.c)}SubstractV(e){return new oe(this.a-e.a,this.b-e.b,this.c-e.c)}toPointF(){return new E(this.a,this.b)}toPoint(){return new v(this.a,this.b)}},M=class{constructor(e,t,n,i,r,h,o,a,l,g){this.a=e,this.b=t,this.c=n,this.d=i,this.e=r,this.f=h,this.g=o,this.h=a,this.i=l,t==0&&i==0&&e==1&&r==1&&l==1&&o==0&&a==0&&(g|=M.Flag_TRANSLATION,n==0&&h==0&&(g|=M.Flag_IDENTITY)),this.isTranslation=(g&M.Flag_TRANSLATION)!=0,this.isIdentity=(g&M.Flag_IDENTITY)!=0}clone(){let e=0;return this.isTranslation&&(e|=M.Flag_TRANSLATION),this.isIdentity&&(e|=M.Flag_IDENTITY),new M(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,e)}get determinant(){let e=this.e*this.i-this.h*this.f,t=this.d*this.i-this.g*this.f,n=this.d*this.h-this.g*this.e;return this.a*e+-this.b*t+this.c*n}get transpose(){return this.isIdentity?M.newIdentityMatrix():new M(this.a,this.d,this.g,this.b,this.e,this.h,this.c,this.f,this.i,M.Flag_NONE)}multiplyByV(e){return this.isTranslation?new oe(this.c+e.a,this.f+e.b,1):new oe(this.a*e.a+this.b*e.b+this.c*e.c,this.d*e.a+this.e*e.b+this.f*e.c,this.g*e.a+this.h*e.b+this.i*e.c)}static newMatrix(e,t,n,i,r,h,o,a,l){return new M(e,t,n,i,r,h,o,a,l,M.Flag_NONE)}static newTranslateMatrix(e,t){let n=M.Flag_TRANSLATION;return e==0&&t==0&&(n|=M.Flag_IDENTITY),new M(1,0,e,0,1,t,0,0,1,n)}static newRotateMatrix(e){return e=Math.PI*e/180,new M(Math.cos(e),-Math.sin(e),0,Math.sin(e),-Math.cos(e),0,0,0,1,M.Flag_NONE)}static newScaleMatrix(e){return new M(e,0,0,0,e,0,0,0,1,M.Flag_NONE)}static newIdentityMatrix(){return new M(1,0,0,0,1,0,0,0,1,M.Flag_IDENTITY|M.Flag_TRANSLATION)}toCSS(){return"matrix("+this.a.toString()+","+this.d.toString()+","+this.b.toString()+","+this.e.toString()+","+this.c.toString()+","+this.f.toString()+")"}toString(){return"| "+this.a.toFixed(2)+" "+this.b.toFixed(2)+" "+this.c.toFixed(2)+" |"+(this.isIdentity?" I":"")+`
| `+this.d.toFixed(2)+" "+this.e.toFixed(2)+" "+this.f.toFixed(2)+" |"+(this.isTranslation?" T":"")+`
| `+this.g.toFixed(2)+" "+this.g.toFixed(2)+" "+this.i.toFixed(2)+` |
`}multiplyByM(e){return this.isIdentity?e.clone():e.isIdentity?this.clone():this.isTranslation&&e.isTranslation?M.newTranslateMatrix(this.c+e.c,this.f+e.f):new M(this.a*e.a+this.b*e.d+this.c*e.g,this.a*e.b+this.b*e.e+this.c*e.h,this.a*e.c+this.b*e.f+this.c*e.i,this.d*e.a+this.e*e.d+this.f*e.g,this.d*e.b+this.e*e.e+this.f*e.h,this.d*e.c+this.e*e.f+this.f*e.i,this.g*e.a+this.h*e.d+this.i*e.g,this.g*e.b+this.h*e.e+this.i*e.h,this.g*e.c+this.h*e.f+this.i*e.i,M.Flag_NONE)}get inverse(){if(this.isIdentity)return M.newIdentityMatrix();if(this.isTranslation)return M.newTranslateMatrix(-this.c,-this.f);let e=this.determinant;if(e==0)throw"matrix cannot be inverted";let t=this.e*this.i-this.f*this.h,n=this.b*this.i-this.c*this.h,i=this.b*this.f-this.c*this.e,r=this.d*this.i-this.f*this.g,h=this.a*this.i-this.c*this.g,o=this.a*this.f-this.c*this.d,a=this.d*this.h-this.e*this.g,l=this.a*this.h-this.b*this.g,g=this.a*this.e-this.b*this.d;return new M(t/e,-n/e,i/e,-r/e,h/e,-o/e,a/e,-l/e,g/e,M.Flag_NONE)}log(){console.log(this.toString())}};M.Flag_NONE=0;M.Flag_IDENTITY=1;M.Flag_TRANSLATION=2;var B=class{static fromString(e,t){let n=Object.getOwnPropertyNames(e);for(let i=0;i<n.length;i++)if(n[i]==t)return e[t];throw"YEnum"+t+" is not a "+e+" value"}static siblings(e){let t=[],n=Object.getOwnPropertyNames(e);for(let i=0;i<n.length;i++)e[n[i]]instanceof z&&t.push(e[n[i]]);return t}},z=class{constructor(e,t,n){this._value=e,this._container=n,this._humanreadable=t}fromString(e){return B.fromString(this._container,e)}get toString(){return this._value.toString()}get description(){return this._humanreadable}get sibblings(){return B.siblings(this._container)}},fe=class{constructor(){this.IRLx=0,this.IRLy=0,this.zoomx=0,this.zoomy=0,this.Lmargin=0,this.Rmargin=0,this.Tmargin=0,this.Bmargin=0,this.Width=0,this.Height=0,this.Capture=!1,this.IRLCaptureStartX=0,this.CaptureStartY=0,this.OriginalXAxisMin=0,this.OriginalXAxisMax=0,this.OriginalIRLx=0,this.OriginalLmargin=0,this.OriginalZoomx=0}},te=class{get userData(){return this._userData}set userData(e){this._userData=e}get directParent(){return this._directParent}constructor(e,t,n,i){this._userData=null,this._fontChangeCallback=null,this._name="Arial",this._italic=!1,this._bold=!1,this._color=s.Black,this._alternateColor=null,this._font=null,this._brush=new J(s.Black),this._parentRenderer=e,this._directParent=t,this._fontChangeCallback=i||null,this._size=new G(n||10,G.ResizeRule.FIXED,e,this,this.ResetFont)}ResetFont(e){this._font=null,e!=null&&this._parentRenderer.ProportionnalValueChanged(e)}get name(){return this._name}set name(e){this._name=e,this.ResetFont(null),this._parentRenderer.redraw()}get hasChanged(){return this._font==null}get size(){return this._size.value}set size(e){if(e<=0)throw new RangeError("Size must be a positive value");e=Math.round(100*e)/100,this._size.value=e,this.ResetFont(null),this._fontChangeCallback!=null&&this._fontChangeCallback(this),this._parentRenderer.redraw()}get italic(){return this._italic}set italic(e){this._italic!=e&&(this._italic=e,this.ResetFont(null),this._parentRenderer.redraw())}get bold(){return this._bold}set bold(e){this._bold!=e&&(this._bold=e,this.ResetFont(null),this._parentRenderer.redraw())}get color(){return this._color}set color(e){this._color!=e&&(this._color=e,this._brush=null,this._parentRenderer.redraw())}get alternateColor(){return this._alternateColor}set alternateColor(e){this._alternateColor!=e&&(this._alternateColor=e,this._brush=null,this._parentRenderer.redraw())}get fontObject(){return this._name?this._name:"Arial"}get brush(){return this._brush==null&&(this._brush=new J(this._alternateColor!=null?this._alternateColor:this._color)),this._brush}get sizeInPoints(){return this._size.value*.75}get sizeForCanvas(){return this._size.value*1.15}get htmlCode(){return(this._italic?"italic ":"")+(this._bold?"bold ":"")+this.sizeForCanvas.toString()+"px "+this._name}},Fe=class{constructor(e,t){this._w=0,this._h=0,this._lines=[],this._linesCount=0,this._lineHeight=0,this._firstlineHeight=0,e!=null&&(this._lineHeight=e.size*1.25,this._firstlineHeight=this._lineHeight*.75,t.indexOf(`
`)<0?(this._lines=[t],this._linesCount=1):(this._lines=t.split(`
`),this._linesCount=this._lines.length))}get lines(){return this._lines}get linesCount(){return this._linesCount}get firstLineHeight(){return this._firstlineHeight}get lineHeight(){return this._lineHeight}get height(){return this._h}get width(){return this._w}set width(e){this._w=e}set height(e){this._h=e}},I=class{constructor(e){this._value=0,this._value=e}};I.SystemDefault=new I(0);I.SingleBitPerPixelGridFit=new I(1);I.SingleBitPerPixel=new I(2);I.AntiAliasGridFit=new I(3);I.AntiAlias=new I(4);I.ClearTypeGridFit=new I(5);var j=class{constructor(e){this._value=0,this._value=e}};j.Invalid=new j(-1);j.Default=new j(0);j.HighSpeed=new j(1);j.HighQuality=new j(2);j.None=new j(3);j.AntiAlias=new j(4);var Ye=class{constructor(){this._str=""}AppendLine(e){this._str+=e+`
`}Append(e){this._str+=e}get contents(){return this._str}},$=class{get Alignment(){return this._Alignment}set Alignment(e){this._Alignment=e}get LineAlignment(){return this._LineAlignment}set LineAlignment(e){this._LineAlignment=e}get FormatFlags(){return this._formatFlags}set FormatFlags(e){this._formatFlags=e}get Trimming(){return this._Trimming}set Trimming(e){this._Trimming=e}constructor(e){this._Alignment=0,this._LineAlignment=0,this._formatFlags=0,this._Trimming=0,this._clip=16384,this._clip=e}},s=class{get name(){return this._name}set predefname(e){this._name=e}static get predefinedColors(){if(s._predefinedColors==null){s._predefinedColors={};let e=Object.getOwnPropertyNames(s);for(let t=0;t<e.length;t++)s[e[t]]instanceof s&&(s._predefinedColors[e[t]]=s[e[t]],s._predefinedColors[e[t]].predefname=e[t])}return s._predefinedColors}static FromString(e){let t=e.toUpperCase(),n=Object.getOwnPropertyNames(s);for(let i=0;i<n.length;i++)if(n[i].toUpperCase()==t&&s[n[i]]instanceof s)return s[n[i]];if(e.length==7&&e.substr(0,1).toUpperCase()=="#"){let i=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),h=parseInt(e.substr(5,2),16);return new s(!1,255,i,r,h)}if(e.length==12){if(e.substr(0,4).toUpperCase()=="RGB:"){let i=parseInt(e.substr(4,2),16),r=parseInt(e.substr(6,2),16),h=parseInt(e.substr(8,2),16),o=parseInt(e.substr(10,2),16);return new s(!1,i,r,h,o)}else if(e.substr(0,4).toUpperCase()=="HSL:"){let i=parseInt(e.substr(4,2),16),r=parseInt(e.substr(6,2),16),h=parseInt(e.substr(8,2),16),o=parseInt(e.substr(10,2),16);return new s(!0,i,r,h,o)}}return null}static hex(e){let t=e.toString(16);return t.length<=1?"0"+t:t}toString(){if(this.isHSLColor)return"HSL:"+(s.hex(this.transparency)+s.hex(this.h)+s.hex(this.s)+s.hex(this.l)).toUpperCase();{let e=Object.getOwnPropertyNames(s);for(let t=0;t<e.length;t++){let i=Reflect.get(s,e[t]);if(i.alpha==this.alpha&&i.red==this.red&&i.green==this.green&&i.blue==this.blue)return e[t]}}return"RGB:"+(s.hex(this.transparency)+s.hex(this.r)+s.hex(this.g)+s.hex(this.b)).toUpperCase()}get svgCode(){return"rgb("+this.r.toString()+", "+this.g.toString()+", "+this.b.toString()+")"}get alphaCode(){return(this.transparency/255).toFixed(3)}static hsl2rgbInt(e,t,n){if(n>=170)return(e+127)/255>>0;if(n>42){if(n<=127)return(t+127)/255>>0;n=170-n}return(e*255+(t-e)*(6*n)+32512)/65025>>0}hsl2rgb(){let e,t,n;if(this.rgbConvertionDone=!0,this.s==0){this.r=this.l,this.g=this.l,this.b=this.l;return}this.l<=127?t=this.l*(255+this.s):t=(this.l+this.s)*255-this.l*this.s,e=510*this.l-t,n=this.h+85,n>255&&(n=n-255),this.r=s.hsl2rgbInt(e,t,n),n=this.h,n>255&&(n=n-255),this.g=s.hsl2rgbInt(e,t,n),this.h>=85?n=this.h-85:n=this.h+170,this.b=s.hsl2rgbInt(e,t,n),this.r>255&&(this.r=255),this.g>255&&(this.g=255),this.b>255&&(this.b=255)}computeHSL(){let e=this.r,t=this.g,n=this.b,i,r,h,o=e>t?e:t,a=e<t?e:t,l=0,g=0;if(this.hslConvertionDone=!0,n>o&&(o=n),n<a&&(a=n),h=(o+a+1)/2>>0,o==a){this.h=0,this.s=0,this.l=h;return}l=(o+a)/2>>0,h<=127?r=(255*(o-a)+l)/(o+a)>>0:r=(255*(o-a)+255-l)/(510-(o+a))>>0,l=3*(o-a),g=2*l,e==o?(i=0,e=t,t=n):t==o?(i=85,t=e,e=n):i=170,e>=t?i+=(255*(e-t)+l)/g>>0:i+=255-(255*(t-e)-l)/g>>0,i>255&&(i-=255),r>255&&(r=255),h>255&&(h=255),this.h=i,this.s=r,this.l=h}get hue(){return this.hslConvertionDone||this.computeHSL(),this.h}get saturation(){return this.hslConvertionDone||this.computeHSL(),this.s}get luminosity(){return this.hslConvertionDone||this.computeHSL(),this.l}get red(){return this.rgbConvertionDone||this.hsl2rgb(),this.r}get green(){return this.rgbConvertionDone||this.hsl2rgb(),this.g}get blue(){return this.rgbConvertionDone||this.hsl2rgb(),this.b}get alpha(){return this.transparency}static FromArgb(e,t,n,i){return new s(!1,e,t,n,i)}static FromAhsl(e,t,n,i){return new s(!0,e,t,n,i)}get isHSL(){return this.isHSLColor}get isRGB(){return!this.isHSLColor}equal(e){if(this.isHSLColor){if(!e.isHSLColor||e.hue!=this.hue||e.saturation!=this.saturation||e.luminosity!=this.luminosity||e.alpha!=this.alpha)return!1}else if(e.isHSLColor||e.red!=this.red||e.green!=this.green||e.blue!=this.blue||e.alpha!=this.alpha)return!1;return!0}clone(){return this.isHSLColor?new s(!0,this.transparency,this.h,this.s,this.l,this.isPredefined):new s(!1,this.transparency,this.r,this.g,this.b,this.isPredefined)}get isPredefined(){return this._isPredefined}constructor(e,t,n,i,r,h){this.hslConvertionDone=!1,this.rgbConvertionDone=!1,this.transparency=0,this.r=0,this.g=0,this.b=0,this.h=0,this.s=0,this.l=0,this._name="",this._htmlcode=this.computeHTMLCode(),this.hslConvertionDone=e,this.isHSLColor=e,this.transparency=t,this._isPredefined=h===!0,e?(this.h=n,this.s=i,this.l=r,this.hsl2rgb()):(this.r=n,this.g=i,this.b=r,this.rgbConvertionDone=!0),this._htmlcode=this.computeHTMLCode()}computeHTMLCode(){let e=this.transparency/255,t=this.r,n=this.g,i=this.b;return"rgba("+t+","+n+","+i+","+e.toFixed(3)+")"}get htmlCode(){return this._htmlcode}};s.AliceBlue=new s(!1,255,240,248,255,!0);s.AntiqueWhite=new s(!1,255,250,235,215,!0);s.Aqua=new s(!1,255,0,255,255,!0);s.Aquamarine=new s(!1,255,127,255,212,!0);s.Azure=new s(!1,255,240,255,255,!0);s.Beige=new s(!1,255,245,245,220,!0);s.Bisque=new s(!1,255,255,228,196,!0);s.Black=new s(!1,255,0,0,0,!0);s.BlanchedAlmond=new s(!1,255,255,235,205,!0);s.Blue=new s(!1,255,0,0,255,!0);s.BlueViolet=new s(!1,255,138,43,226,!0);s.Brown=new s(!1,255,165,42,42,!0);s.BurlyWood=new s(!1,255,222,184,135,!0);s.CadetBlue=new s(!1,255,95,158,160,!0);s.Chartreuse=new s(!1,255,127,255,0,!0);s.Chocolate=new s(!1,255,210,105,30,!0);s.Coral=new s(!1,255,255,127,80,!0);s.CornflowerBlue=new s(!1,255,100,149,237,!0);s.Cornsilk=new s(!1,255,255,248,220,!0);s.Crimson=new s(!1,255,220,20,60,!0);s.Cyan=new s(!1,255,0,255,255,!0);s.DarkBlue=new s(!1,255,0,0,139,!0);s.DarkCyan=new s(!1,255,0,139,139,!0);s.DarkGoldenrod=new s(!1,255,184,134,11,!0);s.DarkGray=new s(!1,255,169,169,169,!0);s.DarkGreen=new s(!1,255,0,100,0,!0);s.DarkKhaki=new s(!1,255,189,183,107,!0);s.DarkMagenta=new s(!1,255,139,0,139,!0);s.DarkOliveGreen=new s(!1,255,85,107,47,!0);s.DarkOrange=new s(!1,255,255,140,0,!0);s.DarkOrchid=new s(!1,255,153,50,204,!0);s.DarkRed=new s(!1,255,139,0,0,!0);s.DarkSalmon=new s(!1,255,233,150,122,!0);s.DarkSeaGreen=new s(!1,255,143,188,143,!0);s.DarkSlateBlue=new s(!1,255,72,61,139,!0);s.DarkSlateGray=new s(!1,255,47,79,79,!0);s.DarkTurquoise=new s(!1,255,0,206,209,!0);s.DarkViolet=new s(!1,255,148,0,211,!0);s.DeepPink=new s(!1,255,255,20,147,!0);s.DeepSkyBlue=new s(!1,255,0,191,255,!0);s.DimGray=new s(!1,255,105,105,105,!0);s.DodgerBlue=new s(!1,255,30,144,255,!0);s.Firebrick=new s(!1,255,178,34,34,!0);s.FloralWhite=new s(!1,255,255,250,240,!0);s.ForestGreen=new s(!1,255,34,139,34,!0);s.Fuchsia=new s(!1,255,255,0,255,!0);s.Gainsboro=new s(!1,255,220,220,220,!0);s.GhostWhite=new s(!1,255,248,248,255,!0);s.Gold=new s(!1,255,255,215,0,!0);s.Goldenrod=new s(!1,255,218,165,32,!0);s.Gray=new s(!1,255,128,128,128,!0);s.Green=new s(!1,255,0,128,0,!0);s.GreenYellow=new s(!1,255,173,255,47,!0);s.Honeydew=new s(!1,255,240,255,240,!0);s.HotPink=new s(!1,255,255,105,180,!0);s.IndianRed=new s(!1,255,205,92,92,!0);s.Indigo=new s(!1,255,75,0,130,!0);s.Ivory=new s(!1,255,255,255,240,!0);s.Khaki=new s(!1,255,240,230,140,!0);s.Lavender=new s(!1,255,230,230,250,!0);s.LavenderBlush=new s(!1,255,255,240,245,!0);s.LawnGreen=new s(!1,255,124,252,0,!0);s.LemonChiffon=new s(!1,255,255,250,205,!0);s.LightBlue=new s(!1,255,173,216,230,!0);s.LightCoral=new s(!1,255,240,128,128,!0);s.LightCyan=new s(!1,255,224,255,255,!0);s.LightGoldenrodYellow=new s(!1,255,250,250,210,!0);s.LightGray=new s(!1,255,211,211,211,!0);s.LightGreen=new s(!1,255,144,238,144,!0);s.LightPink=new s(!1,255,255,182,193,!0);s.LightSalmon=new s(!1,255,255,160,122,!0);s.LightSeaGreen=new s(!1,255,32,178,170,!0);s.LightSkyBlue=new s(!1,255,135,206,250,!0);s.LightSlateGray=new s(!1,255,119,136,153,!0);s.LightSteelBlue=new s(!1,255,176,196,222,!0);s.LightYellow=new s(!1,255,255,255,224,!0);s.Lime=new s(!1,255,0,255,0,!0);s.LimeGreen=new s(!1,255,50,205,50,!0);s.Linen=new s(!1,255,250,240,230,!0);s.Magenta=new s(!1,255,255,0,255,!0);s.Maroon=new s(!1,255,128,0,0,!0);s.MediumAquamarine=new s(!1,255,102,205,170,!0);s.MediumBlue=new s(!1,255,0,0,205,!0);s.MediumOrchid=new s(!1,255,186,85,211,!0);s.MediumPurple=new s(!1,255,147,112,219,!0);s.MediumSeaGreen=new s(!1,255,60,179,113,!0);s.MediumSlateBlue=new s(!1,255,123,104,238,!0);s.MediumSpringGreen=new s(!1,255,0,250,154,!0);s.MediumTurquoise=new s(!1,255,72,209,204,!0);s.MediumVioletRed=new s(!1,255,199,21,133,!0);s.MidnightBlue=new s(!1,255,25,25,112,!0);s.MintCream=new s(!1,255,245,255,250,!0);s.MistyRose=new s(!1,255,255,228,225,!0);s.Moccasin=new s(!1,255,255,228,181,!0);s.NavajoWhite=new s(!1,255,255,222,173,!0);s.Navy=new s(!1,255,0,0,128,!0);s.OldLace=new s(!1,255,253,245,230,!0);s.Olive=new s(!1,255,128,128,0,!0);s.OliveDrab=new s(!1,255,107,142,35,!0);s.Orange=new s(!1,255,255,165,0,!0);s.OrangeRed=new s(!1,255,255,69,0,!0);s.Orchid=new s(!1,255,218,112,214,!0);s.PaleGoldenrod=new s(!1,255,238,232,170,!0);s.PaleGreen=new s(!1,255,152,251,152,!0);s.PaleTurquoise=new s(!1,255,175,238,238,!0);s.PaleVioletRed=new s(!1,255,219,112,147,!0);s.PapayaWhip=new s(!1,255,255,239,213,!0);s.PeachPuff=new s(!1,255,255,218,185,!0);s.Peru=new s(!1,255,205,133,63,!0);s.Pink=new s(!1,255,255,192,203,!0);s.Plum=new s(!1,255,221,160,221,!0);s.PowderBlue=new s(!1,255,176,224,230,!0);s.Purple=new s(!1,255,128,0,128,!0);s.Red=new s(!1,255,255,0,0,!0);s.RosyBrown=new s(!1,255,188,143,143,!0);s.RoyalBlue=new s(!1,255,65,105,225,!0);s.SaddleBrown=new s(!1,255,139,69,19,!0);s.Salmon=new s(!1,255,250,128,114,!0);s.SandyBrown=new s(!1,255,244,164,96,!0);s.SeaGreen=new s(!1,255,46,139,87,!0);s.SeaShell=new s(!1,255,255,245,238,!0);s.Sienna=new s(!1,255,160,82,45,!0);s.Silver=new s(!1,255,192,192,192,!0);s.SkyBlue=new s(!1,255,135,206,235,!0);s.SlateBlue=new s(!1,255,106,90,205,!0);s.SlateGray=new s(!1,255,112,128,144,!0);s.Snow=new s(!1,255,255,250,250,!0);s.SpringGreen=new s(!1,255,0,255,127,!0);s.SteelBlue=new s(!1,255,70,130,180,!0);s.Tan=new s(!1,255,210,180,140,!0);s.Teal=new s(!1,255,0,128,128,!0);s.Thistle=new s(!1,255,216,191,216,!0);s.Tomato=new s(!1,255,255,99,71,!0);s.Transparent=new s(!1,0,255,255,255,!0);s.Turquoise=new s(!1,255,64,224,208,!0);s.Violet=new s(!1,255,238,130,238,!0);s.Wheat=new s(!1,255,245,222,179,!0);s.White=new s(!1,255,255,255,255,!0);s.WhiteSmoke=new s(!1,255,245,245,245,!0);s.Yellow=new s(!1,255,255,255,0,!0);s.YellowGreen=new s(!1,255,154,205,50,!0);s._predefinedColors=null;var Se=class{constructor(e,t){this._noAntiAlias=!1,this._color=e,typeof t!="undefined"&&(this._noAntiAlias=t)}get noAntiAlias(){return this._noAntiAlias}get color(){return this._color}},J=class extends Se{},ue=class extends Se{constructor(e,t){super(e);this._color1=e,this._color2=t}get color1(){return this._color1}get color2(){return this._color2}},k=class{constructor(e,t,n){this._thickness=1,this._color=s.Black,this._noAntiAlias=!1,this._startCap=1,this._endCap=1,this._linejoin=k.LineJoin.Miter,this._thickness=t,this._color=t>0?e:s.Transparent,typeof n!="undefined"&&(this._noAntiAlias=n)}get noAntiAlias(){return this._noAntiAlias}get lineWidth(){return this._thickness}get strokeStyle(){return this._color.htmlCode}get color(){return this._color}set startCap(e){this._startCap=e}set endCap(e){this._endCap=e}set linejoin(e){this._linejoin=e}};(function(p){let e;(function(t){t[t.Miter=0]="Miter",t[t.Bevel=1]="Bevel",t[t.Round=2]="Round",t[t.MiterClipped=3]="MiterClipped"})(e=p.LineJoin||(p.LineJoin={}))})(k||(k={}));var S=class{constructor(e,t,n,i){this.x=e,this.y=t,this.w=n,this.h=i}},v=class{constructor(e,t){this.X=e>>0,this.Y=t>>0}},E=class{constructor(e,t){this.X=e,this.Y=t}},Be=class{constructor(){this.captureType=D.CaptureType.SVG,this.captureFolder="/",this.captureWidth=1024,this.captureHeight=1024,this.captureDPI=96}},Z=class{get userData(){return this._userData}set userData(e){this._userData=e}get directParent(){return this._directParent}constructor(e,t){this._userData=null,this._enabled=!1,this._panelTextAlign=Z.TextAlign.LEFT,this._text="",this._bgColor=new s(!1,255,255,255,192),this._borderColor=s.Black,this._borderthickness=1,this._padding=10,this._verticalMargin=10,this._horizontalMargin=10,this._bgBrush=null,this._pen=null,this._font=null,this._directParent=t,this._parentRenderer=e,this._font=new te(e,this,8,null)}get enabled(){return this._enabled}set enabled(e){this._enabled!=e&&(this._enabled=e,this._parentRenderer.clearCachedObjects(),this._parentRenderer.redraw())}get panelTextAlign(){return this._panelTextAlign}set panelTextAlign(e){this._panelTextAlign=e,this._enabled&&this._parentRenderer.redraw()}get text(){return this._text}set text(e){this._text=e,this._parentRenderer.clearCachedObjects(),this._enabled&&this._parentRenderer.redraw()}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e,this._bgBrush=null,this._enabled&&this._parentRenderer.redraw()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this._pen=null,this._enabled&&this._parentRenderer.redraw()}get borderthickness(){return this._borderthickness}set borderthickness(e){if(e<0)throw"Border thickness must be a positive value";this._borderthickness=e,this._parentRenderer.clearCachedObjects(),this._pen=null,this._enabled&&this._parentRenderer.redraw()}get padding(){return this._padding}set padding(e){if(e<0)throw new RangeError("Padding must be a positive value");this._padding=e,this._parentRenderer.clearCachedObjects(),this._enabled&&this._parentRenderer.redraw()}get verticalMargin(){return this._verticalMargin}set verticalMargin(e){this._verticalMargin=e,this._enabled&&this._parentRenderer.redraw()}get horizontalMargin(){return this._horizontalMargin}set horizontalMargin(e){this._horizontalMargin=e,this._enabled&&this._parentRenderer.redraw()}get bgBrush(){return this._bgBrush==null&&(this._bgBrush=new J(this._bgColor)),this._bgBrush}get pen(){return this._pen==null&&(this._pen=new k(this._borderColor,this._borderthickness,!0)),this._pen}get font(){return this._font}};(function(p){class e extends z{constructor(a,l,g){super(a,l,t)}}p.HorizontalAlignPosEnumItem=e;class t extends B{}t.LEFT=new e("LEFT","Left"),t.CENTER=new e("CENTER","Center"),t.RIGHT=new e("RIGHT","Right"),p.HorizontalAlignPos=t;class n extends z{constructor(a,l,g){super(a,l,i)}}p.VerticalAlignPosEnumItem=n;class i extends B{}i.TOP=new n("TOP","Top"),i.CENTER=new n("CENTER","Center"),i.BOTTOM=new n("BOTTOM","Bottom"),p.VerticalAlignPos=i;class r extends z{constructor(a,l,g){super(a,l,h)}}p.TextAlignEnumItem=r;class h extends B{}h.LEFT=new r("LEFT","Left"),h.CENTER=new r("CENTER","Center"),h.RIGHT=new r("RIGHT","Right"),p.TextAlign=h})(Z||(Z={}));var Q=class extends Z{constructor(e,t){super(e,t);this._panelHrzAlign=Z.HorizontalAlignPos.CENTER,this._panelVrtAlign=Z.VerticalAlignPos.CENTER}get panelHrzAlign(){return this._panelHrzAlign}set panelHrzAlign(e){this._panelHrzAlign=e,this._enabled&&this._parentRenderer.redraw()}get panelVrtAlign(){return this._panelVrtAlign}set panelVrtAlign(e){this._panelVrtAlign=e,this._enabled&&this._parentRenderer.redraw()}},Le=class extends Z{constructor(e,t){super(e,t);this._overlap=!1,this._positionOffsetX=50,this._positionOffsetY=50,this._panelHrzAlign=Z.HorizontalAlignPos.CENTER,this._panelVrtAlign=Z.VerticalAlignPos.TOP}get overlap(){return this._overlap}set overlap(e){!e&&this._panelHrzAlign==Z.HorizontalAlignPos.CENTER&&this._panelVrtAlign==Z.VerticalAlignPos.CENTER&&(this._panelVrtAlign=Z.VerticalAlignPos.TOP),this._overlap=e,this._parentRenderer.clearCachedObjects(),this._parentRenderer.redraw()}get positionOffsetX(){return this._positionOffsetX}set positionOffsetX(e){this._positionOffsetX=e,this._parentRenderer.clearCachedObjects(),this._enabled&&this._parentRenderer.redraw()}get positionOffsetY(){return this._positionOffsetY}set positionOffsetY(e){this._positionOffsetY=e,this._parentRenderer.clearCachedObjects(),this._enabled&&this._parentRenderer.redraw()}get panelHrzAlign(){return this._panelHrzAlign}set panelHrzAlign(e){!this._overlap&&e==Z.HorizontalAlignPos.CENTER&&this._panelVrtAlign==Z.VerticalAlignPos.CENTER&&(this._panelVrtAlign=Z.VerticalAlignPos.TOP),this._panelHrzAlign=e,this._parentRenderer.clearCachedObjects(),this._enabled&&this._parentRenderer.redraw()}get panelVrtAlign(){return this._panelVrtAlign}set panelVrtAlign(e){!this._overlap&&e==Z.VerticalAlignPos.CENTER&&this._panelHrzAlign==Z.HorizontalAlignPos.CENTER&&(this._panelHrzAlign=Z.HorizontalAlignPos.RIGHT),this._panelVrtAlign=e,this._parentRenderer.clearCachedObjects(),this._enabled&&this._parentRenderer.redraw()}},Ce=class{get directParent(){return this._directParent}get userData(){return this._userData}set userData(e){this._userData=e}resetCache(){}constructor(e,t){this._userData=null,this._zoneBrush=null,this._color=s.Red,this._visible=!1,this._min=0,this._max=100,this._directParent=t,this._parentRenderer=e}get zoneBrush(){return this._zoneBrush==null&&(this._zoneBrush=new J(this._color)),this._zoneBrush}get color(){return this._color}set color(e){this._color=e,this._zoneBrush=null,this.visible&&this._parentRenderer.redraw()}get visible(){return this._visible}set visible(e){this._visible=e,this._parentRenderer.redraw()}set_minMax(e,t){if(e>t)throw new RangeError("Min cannot be greater than max ");this._min=e,this._max=t,this.resetCache(),this.visible&&this._parentRenderer.redraw()}get min(){return this._min}set min(e){if(e>=this._max&&!D.minMaxCheckDisabled)throw new RangeError("Min cannot be greater than max ("+this._max.toString()+")");this._min=e,this.resetCache(),this.visible&&this._parentRenderer.redraw()}get max(){return this._max}set max(e){if(e<=this._min&&!D.minMaxCheckDisabled)throw new RangeError("Max cannot be greater than min ("+this._min.toString()+")");this._max=e,this.resetCache(),this.visible&&this._parentRenderer.redraw()}},G=class{get userData(){return this._userData}set userData(e){this._userData=e}get directParent(){return this._directParent}get value(){return this._value}set value(e){this._value=e,this.set_refPoint(),this._reset!=null&&this._reset(this)}get resizeRule(){return this._resizeRule}set resizeRule(e){this.set_refPoint(),this._resizeRule=e}set_refPoint(){this._refWidth=Math.max(1,this._parentRenderer.usableUiWidth()),this._refHeight=Math.max(1,this._parentRenderer.usableUiHeight()),this._refValue=this._value}constructor(e,t,n,i,r){this._reset=null,this._refWidth=1,this._refHeight=1,this._refValue=1,this.valueStack=[],this._resizeRule=G.ResizeRule.FIXED,this._userData=null,this._reset=r,this._parentRenderer=n,this._value=e,this._resizeRule=t,this._directParent=i,this.set_refPoint(),this._parentRenderer.AddNewProportionalToSizeValue(this)}containerResizedPushNewCoef(e){this.valueStack.push(this._value),this._value=Math.round(100*this._refValue*e)/100,this._reset!=null&&this._reset(this)}containerResizedPop(){if(this.valueStack.length<=0)throw new RangeError("Can't pop, empty stack.");this._value=this.valueStack.pop(),this._reset!=null&&this._reset(this)}static resizeCoef(e,t,n,i,r){switch(e){case G.ResizeRule.RELATIVETOWIDTH:return i/t;case G.ResizeRule.RELATIVETOHEIGHT:return r/n;case G.ResizeRule.RELATIVETOBOTH:return Math.min(r/n,i/t)}return 1}containerResized(e,t){this._value=Math.round(100*this._refValue*G.resizeCoef(this._resizeRule,this._refWidth,this._refHeight,e,t))/100,this._reset!=null&&this._reset(this)}forceChangeCallback(){this._reset!=null&&this._reset(this)}};(function(p){class e extends z{constructor(i,r,h){super(i,r,t)}}p.ResizeRuleEnumItem=e;class t extends B{}t.FIXED=new e("FIXED","Fixed"),t.RELATIVETOWIDTH=new e("RELATIVETOWIDTH","Relative to Width"),t.RELATIVETOHEIGHT=new e("RELATIVETOHEIGHT","Relative to height"),t.RELATIVETOBOTH=new e("RELATIVETOBOTH","Relative to Width and Height"),p.ResizeRule=t})(G||(G={}));var D=class{get annotationPanels(){return this._annotationPanels}get userData(){return this._userData}static get minMaxCheckDisabled(){return D._disableMinMaxCheck}static set minMaxCheckDisabled(e){D._disableMinMaxCheck=e}resetlegendPens(){}get getCaptureParameters(){return this._getCaptureParameters}set getCaptureParameters(e){this._getCaptureParameters=e}get messagePanels(){return this._messagePanels}static globalMouseMove(e){D.globalMouseX=e.pageX,D.globalMouseY=e.pageY}clearTransformationMatrix(){this._Scr2ElmMatrix=null,this._Elm2ScrMatrix=null}findElementAbsolutePosition(e){let t=!1,n=!1,i=0,r=0;for(;e!=null;){let h=window.getComputedStyle(e);!n&&h.position=="static"&&!t&&(i=e.offsetLeft+parseFloat(h.borderLeftWidth),r=e.offsetTop+parseFloat(h.borderTopWidth),t=!0),(h.position=="relative"||h.position=="absolute")&&(i+=e.offsetLeft+parseFloat(h.borderLeftWidth),r+=e.offsetTop+parseFloat(h.borderTopWidth),n=!0),e=e.parentElement}return new E(i,r)}get Elm2ScrMatrix(){if(this._Elm2ScrMatrix==null){let e=this.UIContainer,t=[];for(;e!=null;)t.push(this.findElementAbsolutePosition(e)),e=e.parentElement;e=this.UIContainer;let n=[],i=!1,r=!1,h=0;for(;e!=null;){let o=e.parentElement,a=window.getComputedStyle(e),l=t[h].X,g=t[h].Y;h<t.length-1&&(l-=t[h+1].X,g-=t[h+1].Y);let u=a.transform;if(u!="none"){let c=u.match(/matrix.*\((.+)\)/)[1].split(", "),_=[];for(let w=0;w<6;w++)_.push(parseFloat(c[w]));let m=null,f=M.newMatrix(_[0],_[2],_[4],_[1],_[3],_[5],0,0,1),x=null;if(a.transformOrigin){let w=a.transformOrigin.split(" "),d=Number.parseFloat(w[0]),P=Number.parseFloat(w[1]);m=M.newTranslateMatrix(-d,-P),x=M.newTranslateMatrix(d,P)}m!=null&&n.push(m),f!=null&&n.push(f),x!=null&&n.push(x)}(l!=0||g!=0)&&n.push(M.newTranslateMatrix(l,g)),e=o,h++}this._Elm2ScrMatrix=M.newIdentityMatrix();for(let o=n.length-1;o>=0;o--)this._Elm2ScrMatrix=this._Elm2ScrMatrix.multiplyByM(n[o])}return this._Elm2ScrMatrix}get Scr2ElmMatrix(){return this._Scr2ElmMatrix==null&&(this._Scr2ElmMatrix=this.Elm2ScrMatrix.inverse),this._Scr2ElmMatrix}addAnnotationPanel(){let e=new Le(this,this);return this._annotationPanels.push(e),this.redraw(),e}AllowRedraw(){if(this._redrawAllowed--,this._redrawAllowed<0)throw new RangeError("Too many AllowRedraw calls");this._redrawAllowed==0&&this.redraw()}AllowRedrawNoRefresh(){if(this._redrawAllowed--,this._redrawAllowed<0)throw new RangeError("Too many AllowRedraw calls")}DisableRedraw(){this._redrawAllowed++}AddNewProportionalToSizeValue(e){this.ProportionalToSizeValues.indexOf(e)<0&&this.ProportionalToSizeValues.push(e)}canRedraw(){return this._redrawAllowed==0}setPatchAnnotationCallback(e){this._PatchAnnotationCallback=e}patchAnnotation(e){if(e=e.replace("\\n",`
`),e.indexOf("$")<0)return e;let t=new Date;return e=e.replace("$DAY$",t.getDay().toString()),e=e.replace("$MONTH$",t.getMonth().toString()),e=e.replace("$YEAR$",t.getFullYear().toString()),e=e.replace("$HOUR$",t.getHours().toString()),e=e.replace("$MINUTE$",t.getMinutes().toString()),e=e.replace("$SECOND$",t.getSeconds().toString()),this._PatchAnnotationCallback!=null&&(e=this._PatchAnnotationCallback(e)),e}mouseLocalPosition(){let e=oe.FromXYCoord(D.globalMouseX,D.globalMouseY),n=this.Scr2ElmMatrix.multiplyByV(e).toPoint();return n.X<0||n.Y<0||n.X>this.UIContainer.offsetWidth||n.Y>this.UIContainer.offsetHeight?null:n}set proportionnalValueChangeCallback(e){this._proportionnalValueChangeCallback=e}ProportionnalValueChanged(e){this._proportionnalValueChangeCallback!=null&&this._proportionnalValueChangeCallback(e)}getContainerInnerWidth(){return this.UIContainer.offsetWidth}getContainerInnerHeight(){return this.UIContainer.offsetHeight}Draw(e){if(!this.canRedraw())return 0;let t=this.getContainerInnerWidth(),n=this.getContainerInnerHeight();if(t<=5||n<=5)return 0;this.DisableRedraw();let i=document.createElement("canvas");i.width=t,i.height=n;let r=new re(i,t,n,90),h=performance.now();try{this.Render(r,t,n)}catch(g){debugger;this.log("Rendering error: "+g.message)}let o=performance.now()-h,a=this.UIContainer.getContext("2d");a.clearRect(0,0,t,n),a.drawImage(i,0,0),this.rendererTimingTotal+=o,this.rendererTimingCount++;let l=this.rendererTimingTotal/this.rendererTimingCount;return r.Dispose(),this.AllowRedrawNoRefresh(),this.renderingPostProcessing(),0}renderingPostProcessing(){}get resizeRule(){return this._resizeRule}set resizeRule(e){if(e!=this._resizeRule){this.DisableRedraw(),this._resizeRule=e;for(let t=0;t<this.ProportionalToSizeValues.length;t++)this.ProportionalToSizeValues[t].resizeRule=this._resizeRule;this.AllowRedraw(),this.redraw()}}redraw(){document.visibilityState==="visible"&&(this._redrawAllowed>0||this.getContainerInnerWidth()<2||this.getContainerInnerHeight()<2||(this.requestAnimationFrameID!=null&&window.cancelAnimationFrame(this.requestAnimationFrameID),this.requestAnimationFrameID=window.requestAnimationFrame(e=>{try{this.Draw(e)}catch(t){throw console.log("caught"),this.requestAnimationFrameID=null,t}this.requestAnimationFrameID=null})))}usableUiWidth(){return this.getContainerInnerWidth()}usableUiHeight(){return this.getContainerInnerHeight()}resetProportionalSizeObjectsCachePush(e){if(this.clearCachedObjects(),this._resizeRule!=G.ResizeRule.FIXED)for(let t=0;t<this.ProportionalToSizeValues.length;t++)this.ProportionalToSizeValues[t].containerResizedPushNewCoef(e)}resetProportionalSizeObjectsCachePop(){if(this.clearCachedObjects(),this._resizeRule!=G.ResizeRule.FIXED)for(let e=0;e<this.ProportionalToSizeValues.length;e++)this.ProportionalToSizeValues[e].containerResizedPop()}resetProportionalSizeObjectsCache(e,t){if(this.clearCachedObjects(),this._resizeRule!=G.ResizeRule.FIXED)for(let n=0;n<this.ProportionalToSizeValues.length;n++)this.ProportionalToSizeValues[n].containerResized(e,t)}containerResized(){this.containerResize(null,null)}containerResize(e,t){this.clearTransformationMatrix(),this.DisableRedraw(),this.UIContainer.width=this.UIContainer.offsetWidth,this.UIContainer.height=this.UIContainer.offsetHeight,this.resetProportionalSizeObjectsCache(this.usableUiWidth(),this.usableUiHeight()),this.AllowRedraw(),this.redraw()}proportionnalsizeReset(){this.resetProportionalSizeObjectsCache(this.usableUiWidth(),this.usableUiHeight())}captureAndDownloadImage(e,t,n,i,r){let h="",o,a,l=this.getContainerInnerWidth()/this.getContainerInnerHeight();if(r==null&&(r=90),(t==null||typeof t=="undefined")&&(t="capture.",e==D.CaptureType.PNG&&(t=t+"png"),e==D.CaptureType.SVG&&(t=t+"svg")),n==null||typeof n=="undefined"?(o=this.getContainerInnerWidth(),i==null||typeof i=="undefined"?a=this.getContainerInnerHeight():(a=i>>0,o=a*l>>0)):(o=n>>0,i==null||typeof i=="undefined"?a=o*l>>0:a=i>>0),o<=5||a<=5)return;this.DisableRedraw();let g=document.createElement("canvas");g.width=o,g.height=a;let u;switch(e){case D.CaptureType.PNG:u=new re(g,o,a,r);break;case D.CaptureType.SVG:u=new K(g,o,a,r);break;default:throw new RangeError("capture :unknown type")}let c=G.resizeCoef(G.ResizeRule.RELATIVETOBOTH,this.refWidth,this.refHeight,o,a);this.log("start capture"),this.resetProportionalSizeObjectsCachePush(c);let _=!1;this._snapshotPanel.enabled=!1;try{let m=this.Render(u,o,a);_=!0}catch(m){h=m.message,this.log("Render error: "+h)}if(this.log("capture completed"),this.resetProportionalSizeObjectsCachePop(),_){let m=document.createElement("a"),f=u.get_downloadableData();m.setAttribute("href",f),m.setAttribute("download",t),m.style.display="none",document.body.appendChild(m),m.click(),document.body.removeChild(m)}u.Dispose(),this.AllowRedraw()}getFocus(e,t){this.log("got focus")}gainFocus(){}lostFocus(e,t){}get AllowPrintScreenCapture(){return this._AllowPrintScreenCapture}set AllowPrintScreenCapture(e){this._AllowPrintScreenCapture=e}constructor(e,t){this._redrawAllowed=1,this._refWidth=1,this._refHeight=1,this.rendererTimingTotal=0,this.rendererTimingCount=0,this._PatchAnnotationCallback=null,this._logFunction=null,this._annotationPanels=[],this._userData=null,this.documentVisibiltyChangeFct=null,this.containerResizedFct=null,this._getCaptureParameters=null,this.OnDblClick=null,this.OnRightClick=null,this._messagePanels=[],this._Scr2ElmMatrix=null,this._Elm2ScrMatrix=null,this.ProportionalToSizeValues=[],this._proportionnalValueChangeCallback=null,this._resizeRule=G.ResizeRule.FIXED,this.requestAnimationFrameID=null,this._snapshotPanel=null,this._snapshotTimer=null,this._AllowPrintScreenCapture=!1,D.globalMouseMoveSet||(document.addEventListener("mousemove",n=>{D.globalMouseMove(n)}),D.globalMouseMoveSet=!0),this.UIContainer=e,this.UIContainer.width=this.getContainerInnerWidth(),this.UIContainer.height=this.getContainerInnerHeight(),this._logFunction=t,this.parentForm=e.ownerDocument,this._annotationPanels=[],this._messagePanels=[],this.DisableRedraw(),this._snapshotPanel=this.addMessagePanel(),this._snapshotPanel.panelTextAlign=Q.TextAlign.CENTER,this._snapshotPanel.text="Captured to clipboard",this._snapshotPanel.panelHrzAlign=Q.HorizontalAlignPos.CENTER,this._snapshotPanel.panelVrtAlign=Q.VerticalAlignPos.CENTER,this._snapshotPanel.bgColor=new s(!1,200,204,247,161),this._snapshotPanel.font.size=16,this.AllowRedrawNoRefresh(),this.containerResizedFct=()=>{this.containerResize(null,null)},document.addEventListener("resize",this.containerResizedFct),this.resetRefrenceSize(),this.documentVisibiltyChangeFct=()=>{document.visibilityState==="visible"&&this.redraw()},document.addEventListener("visibilitychange",this.documentVisibiltyChangeFct)}destroy(){document.removeEventListener("visibilitychange",this.documentVisibiltyChangeFct),document.removeEventListener("resize",this.containerResized),this.UIContainer.parentNode.removeChild(this.UIContainer),this.UIContainer=null,this.parentForm=null,this._annotationPanels=null,this._messagePanels=null,this._Scr2ElmMatrix=null,this._Elm2ScrMatrix=null}resetRefrenceSize(){this._refWidth=this.getContainerInnerWidth(),this._refHeight=this.getContainerInnerHeight()}get refWidth(){return this._refWidth}get refHeight(){return this._refHeight}RendererCanvas_Click(e,t){}RendererCanvas_DoubleClick(e,t){}addMessagePanel(){let e=new Q(this,this);return this._messagePanels.push(e),e}DrawMessagePanels(e,t,n){for(let i=0;i<this._messagePanels.length;i++)if(this._messagePanels[i].enabled){let r=this._messagePanels[i],h=t-2*r.padding-r.borderthickness;h<100&&(h=100);let o=null,a=!1;for(;!a;)o=e.MeasureString(r.text,r.font,h),(o.width>=this.UIContainer.width||o.height>=this.UIContainer.height)&&r.font.size>5?r.font.size=Math.round(r.font.size*9)/10:a=!0;if(o==null)return;let l=o.width+2*r.padding+r.borderthickness,g=o.height+2*r.padding+r.borderthickness,u=0;switch(r.panelHrzAlign){case Q.HorizontalAlignPos.LEFT:u=r.horizontalMargin;break;case Q.HorizontalAlignPos.RIGHT:u=t-l-r.horizontalMargin;break;default:u=(t-l)/2;break}let c=0;switch(r.panelVrtAlign){case Q.VerticalAlignPos.TOP:c=r.verticalMargin;break;case Q.VerticalAlignPos.BOTTOM:c=n-g-r.verticalMargin;break;default:c=(n-g)/2;break}e.FillRectangleXYHW(r.bgBrush,u,c,l,g),r.borderthickness>0&&e.DrawRectangleXYHW(r.pen,u,c,l,g);let _=new $(16384);switch(r.panelTextAlign){case Q.TextAlign.LEFT:_.LineAlignment=0,_.Alignment=0;break;case Q.TextAlign.RIGHT:_.LineAlignment=2,_.Alignment=2;break;default:_.LineAlignment=1,_.Alignment=1;break}let m=new S(u+r.padding+r.borderthickness/2>>0,c+r.padding+r.borderthickness/2>>0,o.width+1,o.height+1);e.DrawStringRect(r.text,r.font,r.font.brush,m,_)}}drawAnnotationPanels(e,t,n,i,r,h){let o=!1;for(let a=0;a<this.annotationPanels.length;a++)this.annotationPanels[a].enabled&&(o=!0);if(!!o){for(let a=0;a<this.annotationPanels.length;a++)if(t[a].enabled&&t[a].overlap==r){let l=t[a],g=n-2*l.padding-l.borderthickness;g<100&&(g=100);let u=l.text.replace("\\n",`
`);u.indexOf("$")>=0&&(u=u.replace("\\n",`
`),u=this.patchAnnotation(u));let c=e.MeasureString(u,l.font,g),_=c.width+2*l.padding+l.borderthickness,m=c.height+2*l.padding+l.borderthickness,f=0;switch(l.panelHrzAlign){case Q.HorizontalAlignPos.LEFT:f=l.horizontalMargin,!t[a].overlap&&h.Lmargin<_+10&&(h.Lmargin=_+10);break;case Q.HorizontalAlignPos.RIGHT:f=n-_-l.horizontalMargin,!t[a].overlap&&h.Rmargin<_+20&&(h.Rmargin=_+20);break;default:f=(n-_)/2;break}let x=0;switch(l.panelVrtAlign){case Q.VerticalAlignPos.TOP:x=l.verticalMargin,!t[a].overlap&&h.Tmargin<m+20&&(h.Tmargin=m+20);break;case Q.VerticalAlignPos.BOTTOM:x=i-m-l.verticalMargin,!t[a].overlap&&h.Bmargin<m+20&&(h.Bmargin=m+20);break;default:x=(i-m)/2;break}t[a].overlap&&(f+=t[a].positionOffsetX/100*(n-_),x+=t[a].positionOffsetY/100*(i-m),f<0&&(f=0),x<0&&(x=0),f>n-_&&(f=n-_),x>i-m&&(x=i-m)),e.FillRectangleXYHW(l.bgBrush,f,x,_,m),l.borderthickness>0&&e.DrawRectangleXYHW(l.pen,f,x,_,m);let w=new $(16384);switch(l.panelTextAlign){case Q.TextAlign.LEFT:w.LineAlignment=0,w.Alignment=0;break;case Q.TextAlign.RIGHT:w.LineAlignment=2,w.Alignment=2;break;default:w.LineAlignment=1,w.Alignment=1;break}let d=new S(f+l.padding+l.borderthickness/2,x+l.padding+l.borderthickness/2,c.width+1,c.height+1);e.DrawStringRect(u,l.font,l.font.brush,d,w)}}}log(e){this._logFunction!=null&&this._logFunction(e)}};D.RendererDebug=!1;D.FloatToStrformats=["0","0","0","0.0","0.00","0.000","0.0000"];D._disableMinMaxCheck=!1;D.globalMouseMoveSet=!1;D.globalMouseX=-1;D.globalMouseY=-1;(function(p){class e extends z{constructor(a,l,g){super(a,l,t)}}p.CaptureTypeEnumItem=e;class t extends B{}t.PNG=new e("PNG","Bitmap (PNG)"),t.SVG=new e("SVG","Vector (SVG)"),p.CaptureType=t;class n extends z{constructor(a,l,g){super(a,l,i)}}p.CaptureTargetEnumItem=n;class i extends B{}i.ToClipBoard=new n("ToClipBoard","ClipBoard"),i.ToFile=new n("ToFile","File"),p.CaptureTarget=i;class r extends z{constructor(a,l,g){super(a,l,h)}}p.CaptureFormatsEnumItem=r;class h extends B{}h.Keep=new r("Keep","Keep original size"),h.Fixed=new r("Fixed","Fixed size"),h.FixedWidth=new r("FixedWidth","Fixed width, keep ration aspect"),h.FixedHeight=new r("FixedHeight","Fixed height, keep ration aspect"),p.CaptureFormats=h})(D||(D={}));var re=class{constructor(e,t,n,i){this._c=null,this._g=null,this._width=0,this._height=0,this._dpi=0,this._image=null,this._lastPen=null,this._lastBrush=null,this._lastFont=null,this._clipCounter=0,this._textRenderingHint=null,this._smoothingMode=j.Default,this._c=e,this._g=this._c.getContext("2d"),this._g.textBaseline="top",this._width=t,this._height=n,this._dpi=i}get_downloadableData(){return this._c.toDataURL("image/png")}get graphics(){return this._g}setPen(e){if(e!=this._lastPen){if(e!=null){this._g.lineWidth=e.lineWidth;let t=e.strokeStyle;this._g.strokeStyle=e.strokeStyle}else this._g.lineWidth=0;this._lastPen=e}}setBrush(e){if(e!=this._lastBrush){if(e instanceof J)this._g.fillStyle=e.color.htmlCode;else if(e instanceof ue){let t=this._g.createLinearGradient(0,0,0,this._height);t.addColorStop(0,e.color1.htmlCode),t.addColorStop(1,e.color2.htmlCode),this._g.fillStyle=t}else throw new Error("invalid / insupported brush type");this._lastBrush=e}}setFont(e){e==this._lastFont&&!e.hasChanged||(this._g.font=e.htmlCode,this._lastFont=e)}DrawLineXY(e,t,n,i,r){if(e.noAntiAlias){let h=e.lineWidth==e.lineWidth>>0&&(e.lineWidth&1)==1?.5:0;t=Math.round(t)+h,n=Math.round(n)+h,i=Math.round(i)+h,r=Math.round(r)+h}this.setPen(e),this._g.beginPath(),this._g.moveTo(t,n),this._g.lineTo(i,r),this._g.stroke()}DrawLine(e,t,n){this.setPen(e),this._g.beginPath(),this._g.moveTo(t.X,t.Y),this._g.lineTo(n.X,n.Y),this._g.stroke()}SetClip(e){this._g.save(),this._g.beginPath(),this._g.rect(e.x,e.y,e.w,e.h),this._g.clip(),this._clipCounter++}ResetClip(){if(this._clipCounter<=0)throw new Error("clipping stack error");this._g.restore(),this._clipCounter--}MeasureString(e,t,n){this.setFont(t);let i=new Fe(t,e),r=i.linesCount;if(r==0)return i;i.height=i.firstLineHeight*1.2+(r-1)*i.lineHeight;let h=0,o;for(let a=0;a<r;a++)o=this._g.measureText(i.lines[a]),h=Math.max(h,o.width);return i.width=h,i}MeasureStringSF(e,t,n,i){return this.MeasureString(e,t,n)}FillRectangle(e,t){this.setBrush(e),this._g.beginPath(),this._g.fillRect(t.x,t.y,t.w,t.h),this._g.fill()}FillRectangleXYHW(e,t,n,i,r){this.setBrush(e),this._g.beginPath(),this._g.fillRect(t,n,i,r),this._g.fill()}DrawRectangle(e,t){if(this.setPen(e),this._g.beginPath(),e.noAntiAlias){let n=e.lineWidth==e.lineWidth>>0&&(e.lineWidth&1)==1?.5:0;this._g.rect(Math.round(t.x)+n,Math.round(t.y)+n,Math.round(t.w),Math.round(t.h))}else this._g.rect(t.x,t.y,t.w,t.h);this._g.stroke()}DrawRectangleXYHW(e,t,n,i,r){if(e.noAntiAlias){let h=e.lineWidth==e.lineWidth>>0&&(e.lineWidth&1)==1?.5:0;t=Math.round(t)+h,n=Math.round(n)+h,i=Math.round(i),r=Math.round(r)}this.setPen(e),this._g.beginPath(),this._g.rect(t,n,i,r),this._g.stroke()}DrawStringXY(e,t,n,i,r){this.setPen(null),this.setBrush(n),this.setFont(t);let h=this.MeasureString(e,t,0),o=h.lineHeight;for(let a=0;a<h.linesCount;a++)this._g.fillText(h.lines[a],i,r),r+=o}DrawStringXYF(e,t,n,i,r,h){if(re._debugDrawString){let a=new k(s.Red,1);this.DrawLineXY(a,i-5,r,i+5,r),this.DrawLineXY(a,i,r-5,i,r+5)}let o=this.MeasureString(e,t,1e4);h.Alignment==1?i-=o.width>>1:h.Alignment==2&&(i-=o.width),h.LineAlignment==1?r-=o.height/2>>0:h.LineAlignment==2&&(r-=o.height),this.DrawStringXY(e,t,n,i,r)}DrawStringPF(e,t,n,i,r){this.DrawStringXYF(e,t,n,i.X,i.Y,r)}DrawString(e,t,n,i){if(re._debugDrawString){let r=new k(s.Red,1);this.DrawLineXY(r,i.X-5,i.Y,i.X+5,i.Y),this.DrawLineXY(r,i.X,i.Y-5,i.X,i.Y+5)}this.setPen(null),this.setBrush(n),this.setFont(t),this._g.fillText(e,i.X,i.Y)}DrawStringRect(e,t,n,i,r){if(re._debugDrawString){let g=new k(s.Red,1);this.DrawRectangle(g,i)}this.setPen(null),this.setBrush(n),this.setFont(t);let h=this.MeasureString(e,t,0),o=h.lineHeight,a=i.y;switch(r.LineAlignment){case 0:break;case 1:a+=(i.h-h.height)/2;break;case 2:a+=i.h-h.height;break}let l=i.x;r.FormatFlags&2&&(this.Transform(i.x,i.y,Math.PI/2),a-=i.y+i.w,l-=i.x);for(let g=0;g<h.linesCount;g++){let u=h.lines[g],c=this.MeasureString(u,t,0),_=l;switch(r.Alignment){case 0:break;case 1:_+=(i.w-c.width)/2;break;case 2:_+=i.w-c.width;break}this._g.fillText(u,_,a),a+=o}r.FormatFlags&2&&this.ResetTransform()}Transform(e,t,n){let i=Math.sin(n),r=Math.cos(n);this._g.save(),this._g.transform(r,i,-i,r,e,t)}ResetTransform(){this._g.restore()}FillEllipse(e,t,n,i,r){this.setBrush(e),this._g.beginPath(),this._g.ellipse(t+i/2,n+r/2,i/2,r/2,0,0,2*Math.PI),this._g.fill()}DrawEllipse(e,t,n,i,r){this.setPen(e),this._g.beginPath(),this._g.ellipse(t+i/2,n+r/2,i/2,r/2,0,0,2*Math.PI),this._g.stroke()}FillPolygon(e,t){if(this.setBrush(e),!(t.length<=2)){if(this._g.beginPath(),e.noAntiAlias){this._g.moveTo(Math.round(t[0].X)+.5,Math.round(t[0].Y)+.5);for(let n=1;n<t.length;n++)this._g.lineTo(Math.round(t[n].X)+.5,Math.round(t[n].Y)+.5)}else{this._g.moveTo(t[0].X,t[0].Y);for(let n=1;n<t.length;n++)this._g.lineTo(t[n].X,t[n].Y)}this._g.closePath(),this._g.fill()}}DrawPolygon(e,t){if(this.setPen(e),!(t.length<=1)){if(this._g.beginPath(),e.noAntiAlias){let n=e.lineWidth==e.lineWidth>>0&&(e.lineWidth&1)==1?.5:0;this._g.moveTo(Math.round(t[0].X)+n,Math.round(t[0].Y)+n);for(let i=1;i<t.length;i++)this._g.lineTo(Math.round(t[i].X)+n,Math.round(t[i].Y)+n)}else{this._g.moveTo(t[0].X,t[0].Y);for(let n=1;n<t.length;n++)this._g.lineTo(t[n].X,t[n].Y)}this._g.closePath(),this._g.stroke()}}DrawLines(e,t){if(this.setPen(e),!(t.length<=1)){this._g.beginPath(),this._g.lineCap="round",this._g.lineJoin="round",this._g.moveTo(t[0].X,t[0].Y);for(let n=1;n<t.length;n++)this._g.lineTo(t[n].X,t[n].Y);this._g.stroke()}}Dispose(){this._c=null,this._g=null,this._width=0,this._height=0,this._dpi=0}get TextRenderingHint(){return this._textRenderingHint}set TextRenderingHint(e){this._textRenderingHint=e}get SmoothingMode(){return this._smoothingMode}set SmoothingMode(e){this._smoothingMode=e}DrawImage(e,t,n,i){this._g.drawImage(e,n.x,n.y,n.w,n.h,t.x,t.y,t.w,t.h)}comment(e){}};re._debugDrawString=!1;var K=class extends re{constructor(e,t,n,i){super(e,t,n,i);this._clipcount=0,this._clipSectionsToClose=0,this._transformSectionsToClose=0,this._gradientCount=0,K.SVGID++,this._SVGdefs=new Ye,this._SVGcontents=new Ye,this._SVGdefs.AppendLine('<clipPath id="pageClip_'+K.SVGID.toString()+'"><rect x="0" y="0"  width="'+t.toString()+'" height="'+n.toString()+'"/></clipPath>')}static escapeXml(e){return e.replace(/[^ !#$%(-;=?-z]/g,t=>"&#"+t.charCodeAt(0)+";")}get_downloadableData(){return"data:image/svg+xml;base64,"+btoa(this.get_svgContents())}DrawLineXY(e,t,n,i,r){this._SVGcontents.AppendLine('<line x1="'+t.toString()+'"  y1 ="'+n.toString()+'"  x2 ="'+i.toString()+'"  y2 ="'+r.toString()+'" style = "stroke:'+e.color.svgCode+";stroke-opacity:"+e.color.alphaCode+"; stroke-width:"+e.lineWidth.toString()+'"/>')}DrawLine(e,t,n){this.DrawLineXY(e,t.X,t.Y,n.X,n.Y)}SetClip(e){this.ResetClip(),this._SVGdefs.AppendLine('<clipPath id="clip_'+K.SVGID.toString()+"_"+this._clipcount.toString()+'"><rect x="'+e.x.toString()+'" y="'+e.y.toString()+'"  width="'+e.w.toString()+'" height="'+e.h.toString()+'"/></clipPath>'),this._SVGcontents.AppendLine('<g clip-path="url(#clip_'+K.SVGID.toString()+"_"+this._clipcount.toString()+')">'),this._clipcount++,this._clipSectionsToClose++}ResetClip(){this._clipSectionsToClose>0&&(this._SVGcontents.AppendLine("</g>"),this._clipSectionsToClose--)}BrushToSVG(e,t){let n="";if(e instanceof J)n='fill = "'+e.color.svgCode+'" fill-opacity="'+e.color.alphaCode+'" ';else if(e instanceof ue)this._SVGdefs.AppendLine('<linearGradient id="grad_'+K.SVGID.toString()+"_"+this._gradientCount+'" x1="0%" '+(t?'y1="100%" ':'y1="0%" ')+'x2="0%" '+(t?'y2="0%" ':'y2="100%" ')+`>\r
<stop offset="0%" style ="stop-color:`+e.color1.svgCode+";stop-opacity:"+e.color1.alphaCode+`"/>\r
<stop offset="100%" style ="stop-color:`+e.color2.svgCode+";stop-opacity:"+e.color2.alphaCode+`"/>\r
</linearGradient>`),n='fill="url(#grad_'+K.SVGID.toString()+"_"+this._gradientCount+')" ',this._gradientCount++;else throw new ReferenceError("unsupported brush type.");return n}FillRectangle(e,t){this._SVGcontents.AppendLine('<rect x="'+t.x.toString()+'"  y ="'+t.y.toString()+'"  width ="'+t.w.toString()+'"  height ="'+t.h.toString()+'" '+this.BrushToSVG(e,!0)+'style="stroke-width:0"/>')}FillRectangleXYHW(e,t,n,i,r){this.FillRectangle(e,new S(t,n,i,r))}DrawRectangle(e,t){this._SVGcontents.AppendLine('<rect x="'+t.x.toString()+'"  y ="'+t.y.toString()+'"  width ="'+t.w.toString()+'"  height ="'+t.h.toString()+'"  fill="none" style = "stroke:'+e.color.svgCode+";stroke-opacity:"+e.color.alphaCode+"; stroke-width:"+e.lineWidth.toString()+'"/>')}DrawRectangleXYHW(e,t,n,i,r){this.DrawRectangle(e,new S(t,n,i,r))}DrawEllipse(e,t,n,i,r){this._SVGcontents.AppendLine('<ellipse  cx="'+(t+i/2).toString()+'"  cy ="'+(n+r/2).toString()+'"  rx ="'+(i/2).toString()+'"  ry ="'+(r/2).toString()+'"  fill="none" style = "stroke:'+e.color.svgCode+";stroke-opacity:"+e.color.alphaCode+"; stroke-width:"+e.lineWidth.toString()+'"/>')}FillEllipse(e,t,n,i,r){this._SVGcontents.AppendLine('<ellipse  cx="'+(t+i/2).toString()+'"  cy ="'+(n+r/2).toString()+'"  rx ="'+(i/2).toString()+'"  ry ="'+(r/2).toString()+'" '+this.BrushToSVG(e,!1)+'style="stroke-width:0"/>')}DrawStringXY(e,t,n,i,r){let h=e.split(`
`);for(let o=0;o<h.length;o++)e=h[o],this._SVGcontents.AppendLine('<text x="'+i.toString()+'" y="'+(r+t.sizeInPoints).toString()+'" text-anchor="start" font-family="'+t.name.toString()+'" font-size="'+t.sizeInPoints.toString()+'pt" font-weight="'+(t.bold?"bold":"normal")+'" font-style="'+(t.italic?"italic":"normal")+'" '+this.BrushToSVG(n,!1)+`style="stroke-width:0">\r
`+K.escapeXml(e)+`\r
</text>`),r+=t.sizeInPoints*1.75}DrawString(e,t,n,i){if(re._debugDrawString){let r=new k(s.Red,1);this.DrawLineXY(r,i.X-5,i.Y,i.X+5,i.Y),this.DrawLineXY(r,i.X,i.Y-5,i.X,i.Y+5)}this.DrawStringXY(e,t,n,i.X,i.Y)}DrawStringF(e,t,n,i,r){let h=this.MeasureString(e,t,0),o=i.Y+t.size*1.25;switch(r.LineAlignment){case 0:break;case 1:o+=-h.height/2;break;case 2:o+=-h.height;break}let a=e.split(`
`);for(let l=0;l<a.length;l++){let g=a[l],u=this.MeasureString(g,t,0),c=i.X;switch(r.Alignment){case 0:break;case 1:c+=-u.width/2;break;case 2:c+=-u.width;break}this._SVGcontents.AppendLine('<text x="'+c.toString()+'" y="'+o.toString()+'" text-anchor="start" font-family="'+t.name.toString()+'" font-size="'+t.sizeInPoints.toString()+'pt" font-weight="'+(t.bold?"bold":"normal")+'" font-style="'+(t.italic?"italic":"normal")+'" '+this.BrushToSVG(n,!1)+`style="stroke-width:0">\r
`+K.escapeXml(g)+`\r
</text>`),o+=t.sizeInPoints*1.75}}DrawStringRect(e,t,n,i,r){if(re._debugDrawString){let l=new k(s.Red,1);this.DrawRectangle(l,i)}let h=this.MeasureString(e,t,0),o=i.y+t.sizeInPoints*1.1;switch(r.LineAlignment){case 0:break;case 1:o+=(i.h-h.height)/2;break;case 2:o+=i.h-h.height;break}let a=e.split(`
`);for(let l=0;l<a.length;l++){let g=a[l],u=this.MeasureString(g,t,0),c=i.x;switch(r.Alignment){case 0:break;case 1:c+=(i.w-u.width)/2;break;case 2:c+=i.w-u.width;break}this._SVGcontents.AppendLine('<text x="'+c.toString()+'" y="'+o.toString()+'" text-anchor="start" font-family="'+t.name.toString()+'" font-size="'+(t.sizeInPoints*1.1).toString()+'pt" font-weight="'+(t.bold?"bold":"normal")+'" font-style="'+(t.italic?"italic":"normal")+'" '+this.BrushToSVG(n,!1)+`style="stroke-width:0">\r
`+K.escapeXml(g)+`\r
</text>`),o+=t.sizeInPoints*1.75}}Transform(e,t,n){this._SVGcontents.AppendLine('<g transform="translate('+e.toString()+" "+t.toString()+") rotate("+(180*n/Math.PI).toString()+')">'),this._transformSectionsToClose++}ResetTransform(){this._transformSectionsToClose>0&&(this._SVGcontents.AppendLine("</g>"),this._transformSectionsToClose--)}DrawPolygon(e,t){if(!(t.length<2)){this._SVGcontents.Append('<path  d="M '+t[0].X.toString()+" "+t[0].Y.toString());for(let n=1;n<t.length;n+=1)this._SVGcontents.Append(" L "+t[n].X.toString()+" "+t[n].Y.toString());this._SVGcontents.AppendLine(' z" fill="none" style="stroke:'+e.color.svgCode+";stroke-opacity:"+e.color.alphaCode+"; stroke-width:"+e.lineWidth.toString()+'"/>')}}DrawLines(e,t){if(!(t.length<2)){this._SVGcontents.Append('<path  d="M '+t[0].X.toString()+" "+t[0].Y.toString());for(let n=1;n<t.length;n++)this._SVGcontents.Append(" L "+t[n].X.toString()+" "+t[n].Y.toString());this._SVGcontents.AppendLine('" fill="none" style="stroke:'+e.color.svgCode+";stroke-opacity:"+e.color.alphaCode+"; stroke-linecap:round; stroke-linejoin:round;stroke-width:"+e.lineWidth.toString()+'"/>')}}FillPolygon(e,t){if(!(t.length<2)){this._SVGcontents.Append('<path  d="M '+t[0].X.toString()+" "+t[0].Y.toString());for(let n=1;n<t.length;n++)this._SVGcontents.Append(" L "+t[n].X.toString()+" "+t[n].Y.toString());this._SVGcontents.AppendLine(' z" '+this.BrushToSVG(e,!1)+`style="stroke-width:0"/>\r
`)}}DrawImage(e,t,n,i){throw new Error("DrawImage not supported, find an other way.")}save(e){throw new Error("Direct save to file not supported.")}comment(e){this._SVGcontents.AppendLine("<!--"+e+"-->")}get_svgContents(){let e=(2.54*(this._width/this._dpi)).toFixed(3),t=(2.54*(this._height/this._dpi)).toFixed(3);for(;this._clipSectionsToClose>0;)this._SVGcontents.AppendLine("</g>"),this._clipSectionsToClose--;for(;this._transformSectionsToClose>0;)this._SVGcontents.AppendLine("</g>"),this._transformSectionsToClose--;return`<?xml version = "1.0" standalone = "no" ?>\r
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r
<svg width = "`+e+'cm" height = "'+t+'cm" viewBox = "0 0 '+this._width.toString()+" "+this._height.toString()+`" xmlns = "http://www.w3.org/2000/svg" version = "1.1" >\r
<defs>\r
`+this._SVGdefs.contents+`</defs>\r
<g clip-path="url(#pageClip_`+K.SVGID.toString()+`)">\r
`+this._SVGcontents.contents+`</g>\r
</svg>
`}};K.SVGID=0;var Ee=class extends Ce{get path(){return this._path}setPathSize(e){this._path=new Array(e).fill(null)}setPathPoint(e,t){this._path[e]=t}resetPath(){this._path=null}resetCache(){this.resetPath()}get width(){return this._width}set width(e){if(e<=0)throw new RangeError("Width must be a positive value");this._width=e,this._path=null,this._parentRenderer.redraw()}get outerRadius(){return this._outerRadius}set outerRadius(e){this._outerRadius=Math.max(0,Math.min(100,e)),this._path=null,this._parentRenderer.redraw()}constructor(e,t){super(e,t);this._path=null,this._width=10,this._outerRadius=98}},ze=class extends D{get min(){return this._min}set min(e){if(e>=this._max&&!D.minMaxCheckDisabled)throw new RangeError("Min cannot be greater than max ("+this._max.toString()+")");this._min=e;for(let t=0;t<this._zones.length;t++)this._zones[t].resetPath();this._needleValue<this._min&&(this._needleValue=this._min),this.redraw()}get max(){return this._max}set max(e){if(e<=this._min&&!D.minMaxCheckDisabled)throw new RangeError("Max cannot be less than min ("+this._min.toString()+")");this._max=e;for(let t=0;t<this._zones.length;t++)this._zones[t].resetPath();this._needleValue>this._max&&(this._needleValue=this._max),this.redraw()}get borderpen(){return this._borderpen==null&&(this._borderpen=new k(this._borderColor,this._borderThickness),this._borderpen.startCap=1,this._borderpen.endCap=1),this._borderpen}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this._borderpen=null,this.redraw()}get backgroundColor1(){return this._backgroundColor1}set backgroundColor1(e){this._backgroundColor1=e,this._bgBrush=null,this.redraw()}get backgroundColor2(){return this._backgroundColor2}set backgroundColor2(e){this._backgroundColor2=e,this._bgBrush=null,this.redraw()}get borderThickness(){return this._borderThickness}set borderThickness(e){if(e<0)throw new RangeError("thickness must be a positive value");this._borderThickness=e,this._borderpen=null,this.redraw()}get valueFormater(){return this._valueFormater}set valueFormater(e){this._valueFormater=e,this.redraw()}get minmaxFormater(){return this._minmaxFormater}set minmaxFormater(e){this._minmaxFormater=e,this.redraw()}get thickness(){return this._thickness}set thickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._thickness=Math.max(Math.min(e,80),1),this.redraw()}get value(){return this._value}set value(e){this._value=e,this.redraw()}get color1(){return this._color1}set color1(e){this._color1=e,this.redraw()}get color2(){return this._color2}set color2(e){this._color2=e,this.redraw()}get graduationColor(){return this._graduationColor}set graduationColor(e){this._graduationColor=e,this._graduationPen=null,this.redraw()}get graduationThickness(){return this._graduationThickness}set graduationThickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._graduationThickness=e,this._graduationPen=null,this.redraw()}get graduationSize(){return this._graduationSize}set graduationSize(e){if(e<=0)throw new RangeError("Graduation size must be a positive value");this._graduationSize=e,this.redraw()}get graduation(){return this._graduation}set graduation(e){this._graduation=e,this.redraw()}get unitFactor(){return this._unitFactor}set unitFactor(e){if(e==0)throw new RangeError("Factor cannot be zero.");this._unitFactor=e,this.redraw()}get unit(){return this._unit}set unit(e){this._unit=e,this.redraw()}get unitFont(){return this._unitFont}get subgraduationColor(){return this._subgraduationColor}set subgraduationColor(e){this._subgraduationColor=e,this._subgraduationPen=null,this.redraw()}get subgraduationThickness(){return this._subgraduationThickness}set subgraduationThickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._subgraduationThickness=e,this._subgraduationPen=null,this.redraw()}get subgraduationSize(){return this._subgraduationSize}set subgraduationSize(e){if(e<=0)throw new RangeError("Size must be a positive value");this._subgraduationSize=e,this.redraw()}get graduationOuterRadiusSize(){return this._graduationOuterRadiusSize}set graduationOuterRadiusSize(e){this._graduationOuterRadiusSize=Math.max(0,Math.min(100,e)),this.redraw()}get subgraduationCount(){return this._subgraduationCount}set subgraduationCount(e){if(e<0)throw new RangeError("Count must be a positive value");this._subgraduationCount=e,this.redraw()}get statusColor(){return this._statusColor}set statusColor(e){this._statusColor=e,this.redraw()}get statusFont(){return this._unitFont}get statusLine(){return this._statusLine}set statusLine(e){this._statusLine=e,this.redraw()}get showNeedle(){return this._showNeedle}set showNeedle(e){this._showNeedle=e,this.redraw()}get needleColor(){return this._needleColor}set needleColor(e){this._needleColor=e,this._needleBrush=null,this.redraw()}get needleMaxSpeed(){return this._needleMaxSpeed}set needleMaxSpeed(e){if(e<=0)throw new RangeError("Speed must be a positive value");this._needleMaxSpeed=e,this.redraw()}get needleLength1(){return this._needleLength1}set needleLength1(e){this._needleLength1=e,this.redraw()}get needleLength2(){return this._needleLength2}set needleLength2(e){this._needleLength2=e,this.redraw()}get needleWidth(){return this._needleWidth}set needleWidth(e){if(e<=0)throw new RangeError("Width must be a positive value");this._needleWidth=e,this.redraw()}get needleContourColor(){return this._needleContourColor}set needleContourColor(e){this._needleContourColor=e,this._needleContourPen=null,this.redraw()}get needleContourThickness(){return this._needleContourThickness}set needleContourThickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._needleContourThickness=e,this._needleContourPen=null,this.redraw()}get graduationFont(){return this._graduationFont}get showMinMax(){return this._showMinMax}set showMinMax(e){this._showMinMax=e,this.redraw()}constructor(e,t){super(e,t);this._min=0,this._max=100,this.SegmentMaxLength=8,this._borderpen=null,this._borderColor=s.Black,this._bgBrush=null,this._backgroundColor1=s.FromArgb(255,240,240,240),this._backgroundColor2=s.FromArgb(255,200,200,200),this._borderThickness=5,this._valueFormater=null,this._minmaxFormater=null,this._thickness=20,this._value=0,this._needleValue=0,this._color1=s.Green,this._color2=s.Red,this._graduationPen=null,this._graduationColor=s.Black,this._graduationThickness=2,this._graduationSize=10,this._graduation=10,this._unitFactor=1,this._unit="",this._subgraduationPen=null,this._subgraduationColor=s.Black,this._subgraduationThickness=1,this._subgraduationSize=5,this._graduationOuterRadiusSize=98,this._subgraduationCount=5,this._statusColor=s.Gray,this._statusLine="",this._showNeedle=!0,this._needleBrush=null,this._needleColor=s.Red,this._needleMaxSpeed=5,this._needleLength1=90,this._needleLength2=5,this._needleWidth=5,this._needleContourPen=null,this._needleContourColor=s.DarkRed,this._needleContourThickness=1,this._showMinMax=!0,this._path=null,this._graduationFont=new te(this,this,Math.min(this.getContainerInnerWidth(),this.getContainerInnerHeight())/15,null),this._unitFont=new te(this,this,Math.min(this.getContainerInnerWidth(),this.getContainerInnerHeight())/20,null),this._statusFont=new te(this,this,Math.min(this.getContainerInnerWidth(),this.getContainerInnerHeight())/15,null),this.unitFont.color=s.DarkGray,this._statusFont.color=s.DarkGray,this.resizeRule=G.ResizeRule.RELATIVETOBOTH,this._zones=[]}clearCachedObjects(){if(this._zones!=null)for(let e=0;e<this._zones.length;e++)this._zones[e].resetPath();this._path=null,this._bgBrush=null}get zones(){return this._zones}AddZone(){let e=new Ee(this,this);return this._zones.push(e),e}Render(e,t,n){let i=new fe;i.Lmargin=0,i.Rmargin=0,i.Tmargin=0,i.Bmargin=0,e.SmoothingMode=j.HighQuality,e.TextRenderingHint=I.AntiAlias;let r=new $(16384),h=new $(16384);h.Alignment=1,h.LineAlignment=1,this.drawAnnotationPanels(e,this._annotationPanels,t,n,!1,i),e.TextRenderingHint=I.AntiAlias;let o=i.Lmargin+(t-i.Lmargin-i.Rmargin)/2,a=i.Tmargin+(n-i.Tmargin-i.Bmargin)/2,l=Math.min((t-i.Lmargin-i.Rmargin)/2,(n-i.Tmargin-i.Bmargin)/2)-this.borderThickness,g=2*l*3.14>>0,u=4*2*Math.PI/5;if(this._path==null){let L=2*l*Math.PI/this.SegmentMaxLength>>0,H=2*Math.PI/L;this._path=new Array(L).fill(null);let U=0;for(let N=0;N<L;N++){let X=2*N*Math.PI/L;this._path[U++]=new E(o+l*Math.cos(X),a-l*Math.sin(X))}}this._bgBrush==null&&(this._bgBrush=new ue(this._backgroundColor1,this._backgroundColor2)),this._borderpen==null&&(this._borderpen=new k(this._borderColor,this._borderThickness),this._borderpen.linejoin=k.LineJoin.Round),this._path.length>3&&e.FillPolygon(this._bgBrush,this._path),this._graduationPen==null&&(this._graduationPen=new k(this._graduationColor,this._graduationThickness)),this._subgraduationPen==null&&(this._subgraduationPen=new k(this._subgraduationColor,this._subgraduationThickness));let c=(this._unitFactor!=1?"x"+this._unitFactor.toString()+" ":"")+this._unit,_=e.MeasureStringSF(c.toString(),this._unitFont,1e4,r),m=new S(o-_.width/2>>0,a+l/2-_.height/2>>0,_.width+1>>0,_.height+1>>0);if(e.DrawStringRect(c,this._unitFont,this._unitFont.brush,m,h),this._statusLine!=""){_=e.MeasureStringSF(this._statusLine,this._statusFont,1e4,r);let F=new S(o-_.width/2>>0,a-l/3-_.height/2>>0,_.width+1,_.height+1);e.DrawStringRect(this._statusLine,this._statusFont,this._statusFont.brush,F,h)}let f,x,w,d,P,R,b,A=this._graduationOuterRadiusSize/100;for(let F=0;F<this._zones.length;F++)if(this._zones[F].visible){if(this._zones[F].path==null){let L=Math.max(this._min,Math.min(this._max,this._zones[F].min)),H=Math.max(this._min,Math.min(this._max,this._zones[F].max));if(H>L){let U=this._zones[F].outerRadius/100,N=(Math.PI-u)/2+u*(L-this._min)/(this._max-this._min),X=(Math.PI-u)/2+u*(H-this._min)/(this._max-this._min),O=(X-N)*l/this.SegmentMaxLength>>0;O<2&&(O=2),this._zones[F].setPathSize(2*O+2);for(let se=0;se<=O;se++){let xe=N+(X-N)*se/O;this._zones[F].setPathPoint(se,new E(o-l*U*Math.cos(xe),a-l*U*Math.sin(xe)))}let de=U-this._zones[F].width/100;for(let se=O;se>=0;se--){let xe=N+(X-N)*se/O;this._zones[F].setPathPoint(2*O+1-se,new E(o-l*de*Math.cos(xe),a-l*de*Math.sin(xe)))}}}this._zones[F].path!=null&&e.FillPolygon(this._zones[F].zoneBrush,this._zones[F].path)}for(f=this._graduation*(this._min/this._graduation)>>0,this._min<0&&(f-=this._graduation);f<this._min;)f+=this._graduation;if(x=1+(this._max-this._min)/this._graduation>>0,this._subgraduationCount>0&&this._subgraduationCount*x<g){let F=this._graduation/this._subgraduationCount;for(f=F*(this._min/F>>0),this._min<0&&(f-=F);f<this._min;)f+=F;x=1+(this._max-this._min)/F>>0;for(let L=0;L<x;L++){let H=f+L*F;H<=this._max&&(w=(Math.PI-u)/2+u*(H-this._min)/(this._max-this._min),d=Math.cos(w),P=Math.sin(w),R=A*(l-this._borderThickness/2),b=(100-this._subgraduationSize)*(A*(l-this._borderThickness/2))/100,e.DrawLineXY(this._subgraduationPen,o-R*d,a-R*P,o-b*d,a-b*P))}}if(x<g)for(let F=0;F<x;F++){let L=f+F*this._graduation;if(L<=this._max){w=(Math.PI-u)/2+u*(L-this._min)/(this._max-this._min),d=Math.cos(w),P=Math.sin(w),R=A*(l-this._borderThickness/2),b=(100-this._graduationSize)*(A*(l-this._borderThickness/2))/100,e.DrawLineXY(this._graduationPen,o-R*d,a-R*P,o-b*d,a-b*P),_=e.MeasureStringSF(L.toString().trim(),this._graduationFont,1e3,r);let H=.4*Math.sqrt(_.width*_.width+_.height*_.height),U=new S(o-(b-H)*d-_.width/2>>0,a-(b-H)*P-_.height/2>>0,(_.width>>0)+1,_.height>>0);e.DrawStringRect(L.toString(),this._graduationFont,this._graduationFont.brush,U,h)}}if(this._borderThickness>0&&this._path.length>3&&e.DrawPolygon(this._borderpen,this._path),this.drawAnnotationPanels(e,this._annotationPanels,t,n,!0,i),this._showNeedle){if(this._needleValue!=this._value){let N=this._unitFactor*this._needleMaxSpeed*(this._max-this._min)/100;Math.abs(this._value-this._needleValue)<N?this._needleValue=this._value:this._needleValue<this.value?this._needleValue+=N:this._needleValue-=N}let F=this._needleValue/this._unitFactor,L=(this._max-this.min)*.05;F<this._min-L&&(F=this._min-L),F>this._max+L&&(F=this._max+L),w=(Math.PI-u)/2+u*(F-this._min)/(this._max-this._min),d=Math.cos(w),P=Math.sin(w),R=l*this._needleLength1/100,b=l*this._needleLength2/100;let H=l*this._needleWidth/200,U=new Array(4).fill(null);if(U[0]=new E(o-R*d,a-R*P),U[1]=new E(o+H*P,a-H*d),U[2]=new E(o+b*d,a+b*P),U[3]=new E(o-H*P,a+H*d),this._needleBrush==null&&(this._needleBrush=new J(this._needleColor)),e.FillPolygon(this._needleBrush,U),this._needleContourThickness>0){this._needleContourPen==null&&(this._needleContourPen=new k(this._needleContourColor,this._needleContourThickness),this._needleContourPen.startCap=2,this._needleContourPen.endCap=2,this._needleContourPen.linejoin=k.LineJoin.Round);let N=new Array(5).fill(null);N[0]=U[0],N[1]=U[1],N[2]=U[2],N[3]=U[3],N[4]=U[0],e.DrawLines(this._needleContourPen,N)}}return this.DrawMessagePanels(e,t,n),0}renderingPostProcessing(){this._needleValue!=this._value&&this.redraw()}};var le=class extends D{get backgroundColor1(){return this._backgroundColor1}set backgroundColor1(e){this._backgroundColor1=e,this._bgBrush=null,this.redraw()}get backgroundColor2(){return this._backgroundColor2}set backgroundColor2(e){this._backgroundColor2=e,this._bgBrush=null,this.redraw()}get alternateValue(){return this._alternateValue}set alternateValue(e){this._alternateValue=e,this.redraw()}get valueFormater(){return this._valueFormater}set valueFormater(e){this._valueFormater=e,this.redraw()}get hrzAlignmentOfset(){return this._hrzAlignmentOfset}set hrzAlignmentOfset(e){this._hrzAlignmentOfset=e,this.redraw()}get hrzAlignment(){return this._hrzAlignment}set hrzAlignment(e){this._hrzAlignment=e,this.redraw()}get outOfRangeMin(){return this._outOfRangeMin}set outOfRangeMin(e){if(!Number.isNaN(e)&&!Number.isNaN(this._outOfRangeMax)&&!D.minMaxCheckDisabled&&e>=this._outOfRangeMax)throw new RangeError("Min cannot be greater than max ("+this._outOfRangeMax.toString()+")");this._outOfRangeMin=e,this.redraw()}get outOfRangeMax(){return this._outOfRangeMax}set outOfRangeMax(e){if(!Number.isNaN(e)&&!Number.isNaN(this._outOfRangeMin)&&!D.minMaxCheckDisabled&&e<=this._outOfRangeMin)throw new RangeError("Min cannot be less than max ("+this._outOfRangeMin.toString()+")");this._outOfRangeMax=e,this.redraw()}get outOfRangeColor(){return this._outOfRangeColor}set outOfRangeColor(e){this._outOfRangeColor=e,this.redraw()}get value(){return this._value}set value(e){this._value=e,this.redraw()}get font(){return this._font}constructor(e,t){super(e,t);this._bgBrush=null,this._backgroundColor1=s.Black,this._backgroundColor2=s.FromArgb(255,48,48,48),this._alternateValue=null,this._valueFormater=null,this._hrzAlignmentOfset=5,this._hrzAlignment=le.HrzAlignment.DECIMAL,this._outOfRangeMin=Number.NaN,this._outOfRangeMax=Number.NaN,this._outOfRangeColor=s.Red,this._value=0,this._font=new te(this,this,Math.min(e.width/5,e.height/2),null),this._font.color=s.LightGreen,this.resizeRule=G.ResizeRule.RELATIVETOBOTH}clearCachedObjects(){this.font!=null&&this.font.ResetFont(null),this._bgBrush=null}Render(e,t,n){let i=new fe;i.Lmargin=0,i.Rmargin=0,i.Tmargin=0,i.Bmargin=0,e.SmoothingMode=j.HighQuality,e.TextRenderingHint=I.AntiAlias;let r=new $(16384);r.Alignment=1,r.LineAlignment=1,this._bgBrush==null&&(this._bgBrush=new ue(this._backgroundColor1,this._backgroundColor2)),e.FillRectangleXYHW(this._bgBrush,0,0,t,n),this.drawAnnotationPanels(e,this._annotationPanels,t,n,!1,i),i.Tmargin>=20&&(i.Tmargin-=10),i.Bmargin>=20&&(i.Bmargin-=10),e.TextRenderingHint=I.AntiAlias;let h=t-(i.Lmargin+i.Rmargin),o=n-(i.Tmargin+i.Bmargin);if(h>10&&o>10){let a;this._alternateValue==null?(a=this._valueFormater==null?this.value.toFixed(3):this._valueFormater(this,this.value),!Number.isNaN(this._outOfRangeMin)&&this.value<this._outOfRangeMin?this.font.alternateColor=this._outOfRangeColor:!Number.isNaN(this._outOfRangeMax)&&this.value>this._outOfRangeMax?this.font.alternateColor=this._outOfRangeColor:this.font.alternateColor=null):(this._font.alternateColor=null,a=this._alternateValue);let l=e.MeasureStringSF(a,this.font,1e4,r),g,u=this._hrzAlignment;switch(this._alternateValue!=null&&u==le.HrzAlignment.DECIMAL&&(u=le.HrzAlignment.RIGHT),u==le.HrzAlignment.DECIMAL&&a.indexOf(".")<0&&(u=le.HrzAlignment.RIGHT),u){case le.HrzAlignment.LEFT:g=new S(i.Lmargin+(h*this.hrzAlignmentOfset/100>>0),i.Tmargin+(o-l.height)/2>>0,l.width+1>>0,l.height+1>>0),e.DrawStringRect(a,this.font,this.font.brush,g,r);break;case le.HrzAlignment.CENTER:g=new S(i.Lmargin+(h-l.width)/2>>0,i.Tmargin+(o-l.height)/2>>0,l.width+1>>0,l.height+1>>0),e.DrawStringRect(a,this.font,this.font.brush,g,r);break;case le.HrzAlignment.DECIMAL:let c="",_=a.lastIndexOf(",");if(_<0&&(_=a.lastIndexOf(".")),_>=0)c=a.substring(0,_+1);else{for(_=0;_<a.length&&(a[_]>="0"&&a[_]<="9"||a[_]=="-"||a[_]=="'"||a[_]==" ");)_++;c=a.substring(0,_)}let m=e.MeasureStringSF(c,this.font,1e4,r);g=new S(i.Lmargin+(h-m.width-h*this.hrzAlignmentOfset/100)>>0,i.Tmargin+(o-l.height)/2>>0,l.width+1>>0,l.height+1>>0),e.DrawStringRect(a,this.font,this.font.brush,g,r);break;case le.HrzAlignment.RIGHT:g=new S(i.Lmargin+(h-l.width-h*this.hrzAlignmentOfset/100)>>0,i.Tmargin+(o-l.height)/2>>0,l.width+1>>0,l.height+1>>0),e.DrawStringRect(a,this.font,this.font.brush,g,r);break}}return this.drawAnnotationPanels(e,this._annotationPanels,t,n,!0,i),this.DrawMessagePanels(e,t,n),0}};(function(p){class e extends z{constructor(i,r,h){super(i,r,t)}}p.HrzAlignmentEnumItem=e;class t extends B{}t.LEFT=new e("LEFT","Left"),t.CENTER=new e("CENTER","Center"),t.DECIMAL=new e("DECIMAL","Decimal"),t.RIGHT=new e("RIGHT","Right"),p.HrzAlignment=t})(le||(le={}));var ae=class{constructor(e,t){this.x=e===void 0?0:e,this.y=t===void 0?0:t}clone(){return new ae(this.x,this.y)}},De=class{constructor(){this.success=!1,this.result=0}},ye=class{constructor(){this.step=0,this.format=0}},C=class extends Date{ToString(e){let t="",n="";if(e&C.D&&(t=t+this.getDate()+" "),e&C.M&&(t=t+C.months[this.getMonth()]+" "),e&C.YY){let i=this.getFullYear().toString();t=t+i.substr(i.length-2)+" "}else if(e&C.YYYY){let i=this.getFullYear().toString();t=t+i+" "}if(e&C.CR&&(t=t+`
`),e&C.h)if(C.use24Hformat){let i="0"+this.getHours().toString();t=t+i.substring(i.length-2),e&C.m||(t=t+"H")}else{let i=this.getHours();n="AM",i>11&&(n="PM"),i>12&&(i=i-12),i==0&&(i=12),t=t+i.toString()}if(e&C.m){let i="0"+this.getMinutes().toString();t=t+":"+i.substring(i.length-2)}if(e&C.s){let i="0"+this.getSeconds().toString();t=t+":"+i.substring(i.length-2)}if(e&C.ms1){let i="00"+this.getMilliseconds().toString();t=t+"."+i.substring(i.length-3).substring(1)}else if(e&C.ms01){let i="00"+this.getMilliseconds().toString();t=t+"."+i.substring(i.length-3).substring(2)}else if(e&C.ms001){let i="00"+this.getMilliseconds().toString();t=t+"."+i.substring(i.length-3).substring(3)}return e&C.h&&!C.use24Hformat&&(t=t+n),t}};C.D=1;C.DD=2;C.M=4;C.YY=8;C.h=16;C.m=32;C.s=64;C.ms1=128;C.ms01=256;C.ms001=512;C.CR=1024;C.isRelative=2048;C.YYYY=4096;C.d=new Date().toLocaleTimeString().toUpperCase();C.use24Hformat=C.d.indexOf("AM")<0&&C.d.indexOf("PM")<0;C.months=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];var Y=class{static UTCNow(){return new C}static ToUnixTime(e){return e.getTime()/1e3}static FromUnixTime(e){let t=new C;return t.setTime(e*1e3),t}static tryParseStringToAbsDateTime(e){let t=new De;t.success=!1;let n=new Date,i=n.getFullYear(),r=n.getMonth(),h=n.getDate(),o=0,a=0,l=0;for(e=e.trim();e.indexOf("  ")>0;)e=e.replace("  "," ");let g=!1,u=!1,c=e.split(" ");if(c.length<=0)return t;for(let _=0;_<c.length&&_<2;_++)if(c[_].indexOf("-")>0){let m=c[_].split("-");m.length==1?h=parseInt(m[0]):m.length==2?(h=parseInt(m[1]),r=parseInt(m[0])-1):(h=parseInt(m[2]),r=parseInt(m[1])-1,i=parseInt(m[0])),g=!0}else if(c[_].indexOf(":")>0){let m=c[_].split(":");m.length==1?o=parseInt(m[0]):m.length==2?(o=parseInt(m[0]),a=parseInt(m[1])):(o=parseInt(m[0]),a=parseInt(m[1]),l=parseFloat(m[2])),u=!0}return!u&&!g||isNaN(i)||isNaN(r)||isNaN(h)||isNaN(o)||isNaN(a)||isNaN(l)||(n.setFullYear(i,r,h),n.setHours(o,a,l>>0,1e3*(l%1)>>0),t.result=n.getTime()/1e3,t.success=!0),t}static tryParseStringToSecTimeSpan(e){let t=new De,n=0;e=e.toUpperCase();let i=e.indexOf("D");if(i>0){if(n=parseFloat(e.substring(0,i)),isNaN(n))return t;if(t.result+=+n*86400,i==e.length-1)return t.success=!0,t;e=e.substring(i+1)}if(i=e.indexOf("H"),i>0){if(n=parseFloat(e.substring(0,i)),isNaN(n))return t;if(t.result+=n*3600,i==e.length-1)return t.success=!0,t;e=e.substring(i+1)}if(i=e.indexOf("M"),i>0){if(n=parseFloat(e.substring(0,i)),isNaN(n))return t;if(t.result+=n*60,i==e.length-1)return t.success=!0,t;e=e.substring(i+1)}return i=e.indexOf("S"),i<0&&(i=e.length),n=parseFloat(e.substring(0,i)),isNaN(n)||(t.result+=n,t.success=!0),t}static secTimeSpanToString(e,t){let n=!1,i="";if(e<0&&(i="-",e=-e),e>=86400){let h=e/86400>>0;i=i+h.toString()+"d",e-=86400*h,n=!0}if(t>=86400)return i!=""?i:"0d";if(e>=3600){let h=e/3600>>0,o=h.toString();n&&o.length==1&&(o="0"+o),i=i+o+"h",e-=3600*h,n=!0}if(t>=3600||e<t)return i!=""?i:"0h";if(e>=60){let h=e/60>>0,o=h.toString();n&&o.length==1&&(o="0"+o),i=i+o+"m",e-=60*h,n=!0}if(t>=60||e<t)return i!=""?i:"0m";e=Math.round(e*100)/100;let r;return t>.1?r=e.toFixed(0):t>.01?r=e.toFixed(1):t>.001?r=e.toFixed(2):r=e.toString(),n&&e<10&&(r="0"+r),i=i+r+"s",i}static RelativeFormat(e,t,n){let i=!0,r=!0,h=!0,o=!1,a=!1,l=!1;e<=.1&&(r=!0),e<=1&&(i=!0),(e>=60||t>=60)&&(o=!0),(e>=3600||t>=3600)&&(a=!0),(e>=86400||t>=86400)&&(l=!0),n>=.1&&(r=!1),n>=1&&(i=!1),n>=60&&(h=!1),n>=3600&&(o=!1),n>=86400&&(a=!1);let g=0;return g|=C.isRelative,i&&(g|=C.ms1),r&&(g|=C.ms01),h&&(g|=C.s),o&&(g|=C.m),a&&(g|=C.h),l&&(g|=C.D),g}static BestTimeformat(e,t,n){let i=new ye,r=!0,h=!0,o=!0,a=!1,l=!1,g=!1,u=!1,c=!1;return t<=.1?i.step=.01:t<=1?i.step=.1:t<=2?i.step=.2:t<=5?i.step=.5:t<=10?i.step=1:t<=20?i.step=2:t<=30?i.step=3:t<=40?i.step=4:t<=60?i.step=5:t<=120?i.step=10:t<=300?i.step=30:t<=900?i.step=60:t<=1800?i.step=180:t<=3600?i.step=300:t<=7200?i.step=600:t<=14e3?i.step=900:t<=21600?i.step=1800:t<=43200?i.step=3600:t<=86400?i.step=7200:t<=2*86400?i.step=2*7200:t<=4*86400?i.step=4*7200:t<=7*86400?i.step=86400:t<=14*86400?i.step=2*86400:t<=28*86400?i.step=4*86400:t<=56*86400?i.step=7*86400:t<=112*86400?i.step=14*86400:t<=224*86400?i.step=31*86400:t<=448*86400?i.step=62*86400:t<=896*86400?i.step=93*86400:i.step=365*86400,n==Y.TimeReference.ABSOLUTE?(h=!0,r=!0,a=!0,l=!0,g=e>86400,u=e>86400,c=e>28*6*86400,i.step>=.1&&(h=!1),i.step>=1&&(r=!1),i.step>=60&&(o=!1),i.step>=3600&&(a=!1),i.step>=86400&&(l=!1),i.step>=31*86400&&(g=!1),i.step>=365*86400&&(u=!1),i.format=0,h&&(i.format|=C.ms01),r&&(i.format|=C.ms1),o&&(i.format|=C.s),a&&(i.format=i.format|=C.m),l&&(i.format=i.format|=C.h),i.format!=0&&(g||u)&&(i.format|=C.CR),g&&(i.format|=C.D),u&&(i.format|=C.M),c&&(i.format|=C.YY),i.format==C.YY&&(i.format=C.YYYY)):i.format=Y.RelativeFormat(e,t,i.step),i}};(function(p){class e extends z{constructor(i,r,h){super(i,r,t)}}p.TimeReferenceEnumItem=e;class t extends B{}t.ABSOLUTE=new e("ABSOLUTE","Absolute"),t.RELATIVE=new e("RELATIVE","Relative to first data"),p.TimeReference=t})(Y||(Y={}));var ge=class{constructor(e,t){this.Min=0,this.Max=0,this.Min=e,this.Max=t}},V=class{static extend(e,t){if(isNaN(e.Min))return e;let n=e.Max-e.Min;return new ge(e.Min-n*(t-1)/2,e.Max+n*(t-1)/2)}static DefaultValue(e,t){if(typeof t=="undefined")return typeof e=="undefined"?new ge(Number.NaN,Number.NaN):new ge(e,e);if(typeof e=="undefined")return new ge(t,t);if(t<e)throw new RangeError("MinMax invalid parameters ("+e.toString()+">"+t.toString());return new ge(e,t)}static isDefined(e){return!isNaN(e.Min)}static Combine(e,t){if(isNaN(e.Min))return new ge(t.Min,t.Max);if(isNaN(t.Min))return new ge(e.Min,e.Max);let n=new ge(t.Min,t.Max);return e.Min<n.Min&&(n.Min=e.Min),e.Max<n.Min&&(n.Min=e.Max),e.Min>n.Max&&(n.Max=e.Min),e.Max>n.Max&&(n.Max=e.Max),n}static CombineWithNumber(e,t){return isNaN(e.Min)?new ge(t,t):t<e.Min?new ge(t,e.Max):t>e.Max?new ge(e.Min,t):new ge(e.Min,e.Max)}},_e=class{static ArrayCopy(e,t,n,i,r){for(let h=0;h<r;h++)n[i+h]=e[t+h].clone()}constructor(e){if(this.data=[],this.count=0,e instanceof Array)this.data=new Array(e.length),_e.ArrayCopy(e,0,this.data,0,e.length),this.count=e.length;else if(e instanceof ae)this.data=new Array(_e.SegmentGranularity),this.data[0]=e,this.count=1;else throw new Error("invalid constructor paramter type")}grow(){let e=this.data.length+_e.SegmentGranularity;for(;this.data.length<e;)this.data.push(null)}};_e.SegmentGranularity=1e3;var me=class{get userData(){return this._userData}set userData(e){this._userData=e}static get MaxPointsPerSeries(){return me._MaxPointsPerSeries}static set MaxPointsPerSeries(e){me._MaxPointsPerSeries=e}get timeRange(){return this._timeRange}get valueRange(){return this._valueRange}constructor(e){if(this.totalPointCount=0,this._userData=null,this._yAxisIndex=0,this._pen=null,this._legendPen=null,this._brush=null,this._navigatorpen=null,this._visible=!0,this._disabled=!1,this._color=s.Black,this._thickness=1,this._legend="",this._unit="",this.segments=[],e.yAxes.length<=0)throw new Error("Define at least one yAxis");this._timeRange=V.DefaultValue(),this._valueRange=V.DefaultValue(),this.parent=e}get yAxisIndex(){return this._yAxisIndex}set yAxisIndex(e){if(e>=this.parent.yAxes.length)throw new RangeError("No such yAxis ("+e.toString()+")");this._yAxisIndex=e,this.parent.yAxes[this._yAxisIndex].AutoShow()}get pen(){return this._pen==null&&(this._pen=new k(this._color,this._thickness),this._pen.endCap=2,this._pen.linejoin=k.LineJoin.Round),this._pen}get legendPen(){return this._legendPen==null&&(this._legendPen=new k(this._color,this._thickness*this.parent.legendPanel.traceWidthFactor)),this._legendPen}resetlegendPen(){this._legendPen=null}get brush(){return this._brush==null&&(this._brush=new J(this._color)),this._brush}get navigatorpen(){return this._navigatorpen==null&&(this._navigatorpen=new k(s.FromArgb(100,this._color.red,this._color.green,this._color.blue),1)),this._navigatorpen}get visible(){return this._visible}set visible(e){this._visible=e,this.parent.redraw()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.parent.redraw()}get color(){return this._color}set color(e){this._color=e,this._pen=null,this._legendPen=null,this._brush=null,this._navigatorpen=null,this.parent.redraw()}get thickness(){return this._thickness}set thickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._thickness=e,this._pen=null,this._legendPen=null,this.parent.redraw()}get legend(){return this._legend}set legend(e){this._legend=e,this.parent.redraw()}get unit(){return this._unit}set unit(e){this._unit=e,this.parent.redraw()}AddNewSegment(e){this.segments.splice(0,0,new _e(e))}getlastPoint(){return this.segments.length<=0?new ae(NaN,NaN):this.segments[this.segments.length-1].data[this.segments[this.segments.length-1].count-1]}AddPoint(e){if(this._timeRange=V.CombineWithNumber(this._timeRange,e.x),this._valueRange=V.CombineWithNumber(this._valueRange,e.y),this.segments.length<=0){this.AddNewSegment(e),this.totalPointCount++;return}else if(this.segments[0].count>1){let t=this.segments[0].data[this.segments[0].count-1].x-this.segments[0].data[this.segments[0].count-2].x,n=e.x-this.segments[0].data[this.segments[0].count-1].x;if(n>.1&&(n<0||n>2*t)){this.AddNewSegment(e);return}else this.segments[0].count>=this.segments[0].data.length&&this.segments[0].grow()}this.segments[0].data[this.segments[0].count]=e,this.segments[0].count++,this.totalPointCount++,me._MaxPointsPerSeries>0&&this.totalPointCount>me._MaxPointsPerSeries&&this.dataCleanUp(),this.parent.adjustGlobalTimeRange(e.x),this.parent.redraw()}dataCleanUp(){if(this.segments.length<=0)return;let e=me._MaxPointsPerSeries*90/100;for(;this.segments[this.segments.length-1].count<=this.totalPointCount-e;)this.totalPointCount-=this.segments[this.segments.length-1].count,this.segments.splice(this.segments.length-1,1);if(this.totalPointCount>e){let h=this.totalPointCount-e,o=this.segments[this.segments.length-1].count-h,a=new Array(o);_e.ArrayCopy(this.segments[this.segments.length-1].data,h,a,0,this.segments[this.segments.length-1].count-h),this.segments[this.segments.length-1].data=a,this.segments[this.segments.length-1].count-=h,this.totalPointCount-=h}let t=this.segments[0].data[0].x,n=this.segments[0].data[0].x,i=this.segments[0].data[0].y,r=this.segments[0].data[0].y;for(let h=0;h<this.segments.length;h++){let o=this.segments[h].count;t>this.segments[h].data[0].x&&(t=this.segments[h].data[0].x),n<this.segments[h].data[o-1].x&&(n=this.segments[h].data[o-1].x);for(let a=0;a<o;a++)i>this.segments[h].data[a].y&&(i=this.segments[h].data[a].y),r<this.segments[h].data[a].y&&(r=this.segments[h].data[a].y)}this._timeRange.Min=t,this._timeRange.Max=n,this._valueRange.Min=i,this._valueRange.Max=r}InsertPoints(e){if(e.length==0)return;if(e.length==1){this._timeRange=V.CombineWithNumber(this._timeRange,e[0].x),this._valueRange=V.CombineWithNumber(this._valueRange,e[0].y);return}let t=e[1].x-e[0].x,n=e[e.length-1].x-e[e.length-2].x,i=-1,r=-1;for(let h=0;h<this.segments.length;h++)if(this.segments[h].count>1){let o=this.segments[h].data[0].x-e[e.length-1].x,a=e[0].x-this.segments[h].data[this.segments[h].count-1].x;o>0&&o<2*t&&(i=h),a>0&&a<2*n&&(r=h)}i>=0?(this.segments[i].count+e.length>=this.segments[i].data.length&&this.segments[i].grow(),_e.ArrayCopy(this.segments[i].data,0,this.segments[i].data,e.length,this.segments[i].count),_e.ArrayCopy(e,0,this.segments[i].data,0,e.length),this.segments[i].count+=e.length,this.totalPointCount+=e.length):r>=0?(this.segments[r].count+e.length>=this.segments[r].data.length&&this.segments[r].grow(),_e.ArrayCopy(e,0,this.segments[r].data,this.segments[r].count,e.length),this.segments[r].count+=e.length,this.totalPointCount+=e.length):(this.segments.push(new _e(e)),this.totalPointCount+=e.length),this._timeRange=V.CombineWithNumber(this._timeRange,e[0].x),this._timeRange=V.CombineWithNumber(this._timeRange,e[e.length-1].x);for(let h=0;h<e.length;h++)this._valueRange=V.CombineWithNumber(this._valueRange,e[h].y);me._MaxPointsPerSeries>0&&this.totalPointCount>me._MaxPointsPerSeries&&this.dataCleanUp(),this.parent.redraw()}static CompareSegments(e,t){return e.data[0].x>t.data[0].x?-1:e.data[0].x<t.data[0].x?1:0}getData(){let e=[];this.segments.sort(me.CompareSegments);for(let t=this.segments.length-1;t>=0;t--)for(let n=0;n<this.segments[t].count;n++)e.push(this.segments[t].data[n]);return e}findClosestValue(e,t){let n=0,i=0,r=0;if(this.segments.length<=0)return null;for(let a=0;a<this.segments.length;a++)if(e>=this.segments[a].data[0].x&&e<=this.segments[a].data[this.segments[a].count-1].x){let l=this.segments[a].data;for(n=0,i=this.segments[a].count-1;i-n>1;){let g=n+i>>1;l[g].x>e?i=g:n=g}if(r=n-1,r<0&&(r=0),t){if(r++,e==l[r].x)return l[r];if(e==l[r+1].x)return l[r+1];let g=new ae;return g.x=e,g.y=l[r].y+(l[r+1].y-l[r].y)*(e-l[r].x)/(l[r+1].x-l[r].x),g}else return e-l[r].x<l[r+1].x-e?l[r]:l[r+1]}if(t)return null;try{this.segments[0].data[0].clone()}catch(a){debugger}let h=this.segments[0].data[0],o=Math.abs(this.segments[0].data[0].x-e);for(let a=0;a<this.segments.length;a++){let l=Math.abs(this.segments[a].data[0].x-e),g=Math.abs(this.segments[a].data[this.segments[a].count-1].x-e);l<o&&(h=this.segments[a].data[0],o=l),g<o&&(h=this.segments[a].data[this.segments[a].count-1],o=g)}return h.clone()}clear(){this.segments=[],this._timeRange=V.DefaultValue(),this._valueRange=V.DefaultValue(),this.parent.clearCachedObjects(),this.totalPointCount=0}};me._MaxPointsPerSeries=0;var Re=class{get directParent(){return this._directParent}get userData(){return this._userData}set userData(e){this._userData=e}constructor(e,t){this._userData=null,this._enabled=!1,this._showSerieName=!1,this._showTimeStamp=!1,this._dataPrecisionString="",this._dataPrecision=Re.DataPrecision.PRECISION_NOLIMIT,this._diameter=5,this._handleLength=25,this._detectionDistance=50,this._bgColor=s.FromArgb(200,255,255,255),this._borderColor=s.Black,this._borderthickness=1,this._padding=10,this._verticalMargin=10,this._horizontalMargin=10,this._bgBrush=null,this._pen=null,this._font=null,this._directParent=t,this._parentRenderer=e,this._font=new te(e,this,8,null)}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._parentRenderer.redraw()}get showSerieName(){return this._showSerieName}set showSerieName(e){this._showSerieName=e,this._parentRenderer.redraw()}get showTimeStamp(){return this._showTimeStamp}set showTimeStamp(e){this._showTimeStamp=e,this._parentRenderer.redraw()}get dataPrecisionString(){return this._dataPrecisionString}get dataPrecision(){return this._dataPrecision}set dataPrecision(e){this._dataPrecision=e,this.compute_dataPrecisionString(),this._parentRenderer.redraw()}compute_dataPrecisionString(){if(this._dataPrecision==Re.DataPrecision.PRECISION_NOLIMIT){this._dataPrecisionString="";return}this._dataPrecisionString="0."}get diameter(){return this._diameter}set diameter(e){if(e<0)throw new RangeError("Diameter must be a positive value");this._diameter=e,this._parentRenderer.redraw()}get handleLength(){return this._handleLength}set handleLength(e){if(e<0)throw new RangeError("Hanle length must be a positive value");this._handleLength=e,this._parentRenderer.redraw()}get detectionDistance(){return this._detectionDistance}set detectionDistance(e){if(e<=0)throw new RangeError("Distance must be a positive value");this._detectionDistance=e}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e,this._bgBrush=null,this._parentRenderer.redraw()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this._pen=null,this._parentRenderer.redraw()}get borderthickness(){return this._borderthickness}set borderthickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._borderthickness=e,this._pen=null,this._parentRenderer.redraw()}get padding(){return this._padding}set padding(e){if(e<0)throw new RangeError("Padding must be a positive value");this._padding=e,this._parentRenderer.redraw()}get verticalMargin(){return this._verticalMargin}set verticalMargin(e){if(e<0)throw new RangeError("Margin must be a positive value");this._verticalMargin=e,this._parentRenderer.redraw()}get horizontalMargin(){return this._horizontalMargin}set horizontalMargin(e){if(e<0)throw new RangeError("Margin must be a positive value");this._horizontalMargin=e,this._parentRenderer.redraw()}get bgBrush(){return this._bgBrush==null&&(this._bgBrush=new J(this._bgColor)),this._bgBrush}get pen(){return this._pen==null&&(this._pen=new k(this._borderColor,this._borderthickness,!0)),this._pen}get font(){return this._font}};(function(p){class e extends z{constructor(i,r,h){super(i,r,t)}}p.DataPrecisionEnumItem=e;class t extends B{}t.PRECISION_NOLIMIT=new e("PRECISION_NOLIMIT","As is"),t.PRECISION_1=new e("PRECISION_1","1"),t.PRECISION_01=new e("PRECISION_01","0.1"),t.PRECISION_001=new e("PRECISION_001","0.01"),t.PRECISION_0001=new e("PRECISION_0001","0.001"),t.PRECISION_00001=new e("PRECISION_00001","0.0001"),t.PRECISION_000001=new e("PRECISION_000001","0.00001"),t.PRECISION_0000001=new e("PRECISION_0000001","0.000001"),t.PRECISION_00000001=new e("PRECISION_00000001","0.0000001"),t.PRECISION_000000001=new e("PRECISION_000000001","0.00000001"),t.PRECISION_0000000001=new e("PRECISION_0000000001","0.000000001"),p.DataPrecision=t})(Re||(Re={}));var ne=class{get directParent(){return this._directParent}get userData(){return this._userData}set userData(e){this._userData=e}get traceWidthFactor(){return this._traceWidth}set traceWidthFactor(e){if(e<=0)throw new RangeError("This has to be a strictly positive value");this._traceWidth=e,this._parentRenderer.resetlegendPens(),this._parentRenderer.redraw()}constructor(e,t){this._userData=null,this._traceWidth=1,this._enabled=!1,this._position=ne.Position.BOTTOM,this._overlap=!1,this._bgColor=s.FromArgb(200,255,255,255),this._borderColor=s.Black,this._borderthickness=1,this._padding=10,this._verticalMargin=10,this._horizontalMargin=10,this._bgBrush=null,this._pen=null,this._font=null,this._directParent=t,this._parentRenderer=e,this._font=new te(e,this,8,null)}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._parentRenderer.redraw()}get position(){return this._position}set position(e){this._position=e,this._parentRenderer.redraw()}get overlap(){return this._overlap}set overlap(e){this._overlap=e,this._parentRenderer.redraw()}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e,this._bgBrush=null,this._parentRenderer.redraw()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this._pen=null,this._parentRenderer.redraw()}get borderthickness(){return this._borderthickness}set borderthickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._borderthickness=e,this._pen=null,this._parentRenderer.redraw()}get padding(){return this._padding}set padding(e){if(e<0)throw new RangeError("Padding must be a positive value");this._padding=e,this._parentRenderer.redraw()}get verticalMargin(){return this._verticalMargin}set verticalMargin(e){if(e<0)throw new RangeError("Margin must be a positive value");this._verticalMargin=e,this._parentRenderer.redraw()}get horizontalMargin(){return this._horizontalMargin}set horizontalMargin(e){if(e<0)throw new RangeError("Margin must be a positive value");this._horizontalMargin=e,this._parentRenderer.redraw()}get bgBrush(){return this._bgBrush==null&&(this._bgBrush=new J(this._bgColor)),this._bgBrush}get pen(){return this._pen==null&&(this._pen=new k(this._borderColor,this._borderthickness,!0)),this._pen}get font(){return this._font}};(function(p){class e extends z{constructor(i,r,h){super(i,r,t)}}p.PositionEnumItem=e;class t extends B{}t.LEFT=new e("LEFT","Left"),t.TOPLEFT=new e("TOPLEFT","Top-Left"),t.TOP=new e("TOP","Top"),t.TOPRIGHT=new e("TOPRIGHT","Top-Right"),t.RIGHT=new e("RIGHT","Right"),t.BOTTOMRIGHT=new e("BOTTOMRIGHT","Bottom-Right"),t.BOTTOM=new e("BOTTOM","Bottom"),t.BOTTOMLEFT=new e("BOTTOMLEFT","Bottom-Left"),p.Position=t})(ne||(ne={}));var be=class{get directParent(){return this._directParent}get userData(){return this._userData}set userData(e){this._userData=e}get showXAxisZones(){return this._showXAxisZones}set showXAxisZones(e){this._showXAxisZones=e}get relativeheight(){return this._relativeheight}set relativeheight(e){e<10&&(e=10),e>50&&(e=50),this._relativeheight=e,this._parentRenderer.redraw()}constructor(e,t){this._userData=null,this._viewport=new fe,this.Xrange=null,this._showXAxisZones=!0,this._relativeheight=10,this._enabled=!1,this._bgColor1=s.FromArgb(255,225,225,225),this._cursorBorderColor=s.FromArgb(255,40,40,40),this._yAxisHandling=be.YAxisHandling.AUTO,this._bgColor2=s.FromArgb(255,225,225,225),this._cursorColor=s.FromArgb(100,0,255,0),this._cursorBrush=null,this._pen=null,this._cursorBorderPen=null,this._xAxisColor=s.Black,this._xAxisThickness=1,this._borderPen=null,this._borderColor=s.DimGray,this._borderThickness=1,this._bgBrush=null,this._font=null,this._directParent=t,this._parentRenderer=e,this._font=new te(e,this,8,null)}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._parentRenderer.redraw()}get bgColor1(){return this._bgColor1}set bgColor1(e){this._bgColor1=e,this._bgBrush=null,this._parentRenderer.redraw()}get cursorBorderColor(){return this._cursorBorderColor}set cursorBorderColor(e){this._cursorBorderColor=e,this._cursorBorderPen=null,this._parentRenderer.redraw()}get yAxisHandling(){return this._yAxisHandling}set yAxisHandling(e){this._yAxisHandling=e,this._parentRenderer.redraw()}get bgColor2(){return this._bgColor2}set bgColor2(e){this._bgColor2=e,this._bgBrush=null,this._parentRenderer.redraw()}get cursorColor(){return this._cursorColor}set cursorColor(e){this._cursorColor=e,this._cursorBrush=null,this._parentRenderer.redraw()}get cursorBrush(){return this._cursorBrush==null&&(this._cursorBrush=new J(this._cursorColor)),this._cursorBrush}get pen(){return this._pen==null&&(this._pen=new k(this._xAxisColor,this._xAxisThickness,!0)),this._pen}get cursorBorderPen(){return this._cursorBorderPen==null&&(this._cursorBorderPen=new k(this._cursorBorderColor,1,!0)),this._cursorBorderPen}get xAxisColor(){return this._xAxisColor}set xAxisColor(e){this._xAxisColor=e,this._pen=null,this._parentRenderer.redraw()}get xAxisThickness(){return this._xAxisThickness}set xAxisThickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._xAxisThickness=e,this._pen=null,this._parentRenderer.redraw()}get borderPen(){return this._borderPen==null&&(this._borderPen=new k(this._borderColor,this._borderThickness,!0)),this._borderPen}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this._borderPen=null,this._parentRenderer.redraw()}get borderThickness(){return this._borderThickness}set borderThickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._borderThickness=e,this._borderPen=null,this._parentRenderer.redraw()}setPosition(e,t,n,i,r,h){(this._viewport.Lmargin!=n||this._viewport.Rmargin!=i||this._viewport.Tmargin!=r||this._viewport.Bmargin!=h)&&(this._bgBrush=null),this._viewport.Lmargin=n,this._viewport.Rmargin=i,this._viewport.Bmargin=h,this._viewport.Tmargin=r,this._viewport.Width=e,this._viewport.Height=t}setIRLPosition(e,t,n,i){this._viewport.IRLx=e,this._viewport.IRLy=t,this._viewport.zoomx=n,this._viewport.zoomy=i}startCapture(e,t,n){this._viewport.OriginalXAxisMin=t,this._viewport.OriginalXAxisMax=n,this._viewport.OriginalIRLx=this._viewport.IRLx,this._viewport.OriginalLmargin=this._viewport.Lmargin,this._viewport.OriginalZoomx=this._viewport.zoomx,this._viewport.IRLCaptureStartX=e.x,this._viewport.Capture=!0}get Capture(){return this._viewport.Capture}stopCapture(){this._viewport.Capture=!1}get viewport(){return this._viewport}get bgBrush(){return this._bgBrush==null&&(this._bgBrush=new ue(this._bgColor1,this._bgColor2)),this._bgBrush}get font(){return this._font}};(function(p){class e extends z{constructor(i,r,h){super(i,r,t)}}p.YAxisHandlingEnumItem=e;class t extends B{}t.AUTO=new e("AUTO","Automatic"),t.INHERIT=new e("INHERIT","Inherit from main view"),p.YAxisHandling=t})(be||(be={}));var he=class{get userData(){return this._userData}set userData(e){this._userData=e}static _round100(e){return Math.round(100*e)/100}get stringFormat(){if(this._stringFormat!=null)return this._stringFormat;switch(this._stringFormat=new $(16384),this._stringFormat.LineAlignment=1,this._textAlign){case he.TextAlign.LEFT:this._stringFormat.Alignment=0;break;case he.TextAlign.CENTER:this._stringFormat.Alignment=1;break;case he.TextAlign.RIGHT:this._stringFormat.Alignment=2;break}return this._stringFormat}get PatchTextCallback(){return this._MarkerTextCallback}set PatchTextCallback(e){this._MarkerTextCallback=e}get directParent(){return this._directParent}constructor(e,t){this._userData=null,this._stringFormat=null,this._MarkerTextCallback=null,this._enabled=!1,this._xposition=0,this._xpositionIsRelative=!1,this._yposition=92,this._text="Marker",this._textAlign=he.TextAlign.CENTER,this._bgColor=s.FromArgb(255,255,255,192),this._borderColor=s.DarkRed,this._borderthickness=1,this._arrowSize=5,this._padding=5,this._verticalMargin=5,this._horizontalMargin=5,this._bgBrush=null,this._arrowBrush=null,this._pen=null,this._navigatorpen=null,this._font=null,this._directParent=t,this._parentRenderer=e,this._font=new te(e,this,8,null)}startCapture(){this._parentRenderer.startMarkerCapture(this)}setCapturedPosition(e,t){this.enabled=!0,this._xpositionIsRelative=t.timeReference==Y.TimeReference.RELATIVE&&t.zeroTime>0,this._xposition=he._round100(this._xpositionIsRelative?e-t.zeroTime:e),this._parentRenderer.clearCachedObjects(),this._parentRenderer.redraw()}get enabled(){return this._enabled}set enabled(e){this._enabled!=e&&(this._enabled=e,this._parentRenderer.clearCachedObjects(),this._parentRenderer.redraw())}get xposition(){return this._xposition}set xposition(e){this._xposition=he._round100(e),this._enabled&&this._parentRenderer.redraw()}get timereference(){return this._xpositionIsRelative?Y.TimeReference.RELATIVE:Y.TimeReference.ABSOLUTE}set timereference(e){let t=e==Y.TimeReference.RELATIVE;if(this._xpositionIsRelative!=t){let n=this._directParent.zeroTime;isNaN(n)&&(n=0),t?(this._xpositionIsRelative=!0,this._xposition-=n):(this._xpositionIsRelative=!1,this._xposition+=n),this._xposition=he._round100(this._xposition),this._parentRenderer.redraw()}}get positionOnXAxis(){return new Ae(this._xposition,this._xpositionIsRelative)}set positionOnXAxis(e){if(e.capture)this.startCapture();else{let t=he._round100(e.value);(this._xpositionIsRelative!=e.relative||this._xposition!=t)&&(this._xposition=t,this._xpositionIsRelative=e.relative,this._enabled&&this._parentRenderer.redraw())}}get yposition(){return this._yposition}set yposition(e){this._yposition=Math.min(100,Math.max(0,e)),this._enabled&&this._parentRenderer.redraw()}get text(){return this._text}set text(e){this._text=e,this._parentRenderer.clearCachedObjects(),this._enabled&&this._parentRenderer.redraw()}get textAlign(){return this._textAlign}set textAlign(e){this._textAlign=e,this._stringFormat=null,this._enabled&&this._parentRenderer.redraw()}get shortText(){return this._text.length<=20?this._text:this._text.substring(0,18)+".."}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e,this._bgBrush=null,this._enabled&&this._parentRenderer.redraw()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this._arrowBrush=null,this._pen=null,this._navigatorpen=null,this._enabled&&this._parentRenderer.redraw()}get borderthickness(){return this._borderthickness}set borderthickness(e){if(e<0)throw new RangeError("thickness must be a positive value");this._borderthickness=e,this._parentRenderer.clearCachedObjects(),this._pen=null,this._enabled&&this._parentRenderer.redraw()}get arrowSize(){return this._arrowSize}set arrowSize(e){this._arrowSize=e,this._enabled&&this._parentRenderer.redraw()}get padding(){return this._padding}set padding(e){if(e<0)throw new RangeError("Padding must be a positive value");this._padding=e,this._parentRenderer.clearCachedObjects(),this._enabled&&this._parentRenderer.redraw()}get verticalMargin(){return this._verticalMargin}set verticalMargin(e){this._verticalMargin=e,this._enabled&&this._parentRenderer.redraw()}get horizontalMargin(){return this._horizontalMargin}set horizontalMargin(e){this._horizontalMargin=e,this._enabled&&this._parentRenderer.redraw()}get bgBrush(){return this._bgBrush==null&&(this._bgBrush=new J(this._bgColor)),this._bgBrush}get arrowBrush(){return this._arrowBrush==null&&(this._arrowBrush=new J(this._borderColor,!0)),this._arrowBrush}get pen(){return this._pen==null&&(this._pen=new k(this._borderColor,this._borderthickness,!0)),this._pen}get navigatorpen(){return this._navigatorpen==null&&(this._navigatorpen=new k(this._borderColor,1)),this._navigatorpen}get font(){return this._font}};(function(p){class e extends z{constructor(i,r,h){super(i,r,t)}}p.TextAlignEnumItem=e;class t extends B{}t.LEFT=new e("LEFT","Left"),t.CENTER=new e("CENTER","Center"),t.RIGHT=new e("RIGHT","Right"),p.TextAlign=t})(he||(he={}));var Ie=class{get directParent(){return this._directParent}get userData(){return this._userData}set userData(e){this._userData=e}constructor(e,t){this._userData=null,this._title="",this._font=null,this._directParent=t,this._parentRenderer=e,this._font=new te(e,this,12,null)}get title(){return this._title}set title(e){this._title=e,this._parentRenderer.redraw()}get font(){return this._font}},Me=class{get directParent(){return this._directParent}get zones(){return this._zones}AddZone(){let e=new Ce(this._parentRenderer,this);return this._zones.push(e),e}get userData(){return this._userData}set userData(e){this._userData=e}get AxisChanged(){return this._AxisChanged}set AxisChanged(e){this._AxisChanged=e}constructor(e,t){this._userData=null,this._AxisChanged=null,this._pen=null,this._gridPen=null,this._visible=!0,this._AllowAutoShow=!1,this._min=Number.NaN,this._max=Number.NaN,this._step=Number.NaN,this._thickness=1,this._color=s.Black,this._showGrid=!1,this._gridColor=s.FromArgb(50,0,0,0),this._gridThickness=1,this._font=null,this._zones=[],this._directParent=t,this._parentRenderer=e,this._legend=new Ie(e,this),this._font=new te(e,this)}get pen(){return this._pen==null&&(this._pen=new k(this._color,this._thickness,!0)),this._pen}get gridPen(){return this._gridPen==null&&(this._gridPen=new k(this._gridColor,this._gridThickness,!0)),this._gridPen}get visible(){return this._visible}set visible(e){this._visible=e,e||(this._AllowAutoShow=!1),this._parentRenderer.redraw()}get AllowAutoShow(){return this._AllowAutoShow}set AllowAutoShow(e){this._AllowAutoShow=e}AutoShow(){this._AllowAutoShow&&(this.visible=!0,this._AxisChanged!=null&&this._AxisChanged(this))}set_minMax(e,t){if(!isNaN(e)&&!isNaN(t)&&e>=t)throw new RangeError("Min ("+e.toString()+") cannot be greater than max ("+t.toString()+")");this._min=e,this._max=t,this._parentRenderer.redraw()}get min(){return this._min}set min(e){if(!isNaN(e)&&!isNaN(this._max)&&!D.minMaxCheckDisabled&&e>=this._max)throw new RangeError("Min cannot be greater than max ("+this._max.toString()+")");this._min=e,this._parentRenderer.redraw()}setMinMax(e,t){e<t&&(this._min=e,this._max=t,this._parentRenderer.redraw())}get max(){return this._max}set max(e){if(!isNaN(e)&&!isNaN(this._min)&&!D.minMaxCheckDisabled&&e<=this._min)throw new RangeError("Max cannot be less than min ("+this._min.toString()+")");this._max=e,this._parentRenderer.redraw()}get step(){return this._step}set step(e){if(!isNaN(e)&&e<0)throw new RangeError("Steps must be a strictely positive value");this._step=e,this._parentRenderer.redraw()}get thickness(){return this._thickness}set thickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._thickness=e,this._pen=null,this._parentRenderer.redraw()}get color(){return this._color}set color(e){this._color=e,this._pen=null,this._parentRenderer.redraw()}get showGrid(){return this._showGrid}set showGrid(e){this._showGrid=e,this._parentRenderer.redraw()}get gridColor(){return this._gridColor}set gridColor(e){this._gridColor=e,this._gridPen=null,this._parentRenderer.redraw()}get gridThickness(){return this._gridThickness}set gridThickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._gridThickness=e,this._gridPen=null,this._parentRenderer.redraw()}get font(){return this._font}get legend(){return this._legend}},ke=class{constructor(){this.dataMin=0,this.dataMax=0,this.absMin=0,this.absMax=0,this.step=0,this.start=0,this.stop=0,this.precision=0}},Ae=class{get relative(){return this._isRelative}set relative(e){this._isRelative=e}get value(){return this._value}set value(e){this._value=e}constructor(e,t,n){this._isRelative=!1,this._value=0,this._capture=!1,this._isRelative=t,this._value=e,this._capture=typeof n=="undefined"?!1:n}clone(){return new Ae(this._value,this._isRelative,this._capture)}toString(){if(this._isRelative)return Y.secTimeSpanToString(this._value,0);{let e=Y.FromUnixTime(this._value),t=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString()+" "+e.getHours().toString()+":",n=e.getMinutes().toString();n.length<=1&&(n="0"+n),t=t+n+":";let i=e.getSeconds(),r=e.getMilliseconds();return i=i+r/1e3,i<10&&(t=t+"0"),r==0?t=t+i.toString():t=t+i.toFixed(3),t}}TryParse(e){return this._isRelative?Y.tryParseStringToSecTimeSpan(e):Y.tryParseStringToAbsDateTime(e)}get capture(){return this._capture}set capture(e){this._capture=e}};Ae.DTdisplayformat="DD/MM/YY hh:mm:ss.ff";Ae.TSdisplayformat="dd.hh:mm:ss.ff";var Oe=class{constructor(){this.NumberDecimalSeparator="."}},ce=class extends Me{constructor(e,t,n){super(e,t);this._index=0,this._highlightZero=!1,this._position=ce.HrzPosition.LEFT,this.innerWidth=0,this.zoom=0,this.IRLy=0,this._index=n,this.nfi=new Oe,this.nfi.NumberDecimalSeparator=".",this.startStopStep=new ke,this.startStopStep.start=0,this.startStopStep.stop=1,this.startStopStep.step=.1}get index(){return this._index}lockMinMax(){this._min=this.startStopStep.absMin,this._max=this.startStopStep.absMax,this._parentRenderer.redraw()}unlockMinMax(){this._min=Number.NaN,this._max=Number.NaN,this._parentRenderer.redraw()}get highlightZero(){return this._highlightZero}set highlightZero(e){this._highlightZero=e,this._parentRenderer.redraw()}get position(){return this._position}set position(e){this._position=e,this._parentRenderer.redraw()}computeStartAndStep(e){let t=new ke,n=this.min,i=this.max;t.step=this.step,t.precision=0,V.isDefined(e)||(e=V.DefaultValue(),e.Min=0,e.Max=100),isNaN(n)&&(n=e.Min),isNaN(i)&&(i=e.Max),t.absMax=i,t.absMin=n,n==i&&(n-=.5,i+=.5),n!=0&&(n-=(i-n)*.025),i!=0&&(i+=(i-n)*.025),t.start=n,t.stop=i,t.dataMin=n,t.dataMax=i;let r=i-n;if(isNaN(t.step)){let h=Math.log10(r);h-Math.floor(h)!=0&&(h=Math.floor(h)+1),t.precision=h-1>>0;let o=Math.pow(10,t.precision),a=r/o;if(a<=2?(t.step=o/5,t.precision--):a<=5?(t.step=o/2,t.precision--):t.step=o,isNaN(this.min)){let l=n/t.step;l-Math.floor(l)!=0&&(l=l>0?Math.floor(l)+1:Math.floor(l)-1),t.start=t.step*l}}else{let h=t.step.toString(),o=h.indexOf(".");o>=0?t.precision=-(h.length-o-1):t.precision=0}return this.startStopStep=t,t}};(function(p){class e extends z{constructor(i,r,h){super(i,r,t)}}p.HrzPositionEnumItem=e;class t extends B{}t.LEFT=new e("LEFT","Left"),t.RIGHT=new e("RIGHT","Right"),p.HrzPosition=t})(ce||(ce={}));var ie=class extends Me{get position(){return this._position}set position(e){this._position=e,this._parentRenderer.redraw()}get markers(){return this._markers}AddMarker(){let e=new he(this._parentGraph,this);return this._markers.push(e),this._parentGraph.clearCachedObjects(),this._parentGraph.redraw(),e}get initialZoom(){return this._initialZoom}set initialZoom(e){if(e<=0)throw new RangeError("Zoom must be a positive value");this._initialZoom=e,this.min=this.min-this._initialZoom*this._initialOffset/100,this.max=this.min+this.initialZoom,this._parentRenderer.redraw()}get initialOffset(){return this._initialOffset}set initialOffset(e){this._initialOffset=e;let t=this._parentGraph.getMostRecentPoint();if(isNaN(t.x))this._min=this._min-this._initialZoom*this._initialOffset/100,this._max=this._min+this._initialZoom,this._parentRenderer.redraw();else{let n=this._max-this._min;this._min=t.x-n*this._initialOffset/100,this._max=this._min+n}this._parentRenderer.redraw()}get labelFormat(){return this._format}set labelFormat(e){this._format=e,this._parentRenderer.redraw()}constructor(e,t){super(e,t);this._position=ie.VrtPosition.BOTTOM,this._markers=[],this._initialZoom=300,this._initialOffset=0,this._format=ie.FORMATAUTO,this._timeReference=Y.TimeReference.ABSOLUTE,this._zeroTime=0,this._fullSize=0,this.innerHeight=0,this._overflowHandling=ie.OverflowHandling.DONOTHING,this._parentGraph=e,this._markers=[],this.min=Y.ToUnixTime(Y.UTCNow()),this.max=this.min+this.initialZoom,this.step=30}get timeReference(){return this._timeReference}set timeReference(e){this._timeReference=e,this._parentRenderer.redraw()}get zeroTime(){return this._zeroTime}set zeroTime(e){this._zeroTime=e}get fullSize(){return this._fullSize}set fullSize(e){this._fullSize=e}bestFormat(e,t){return Y.BestTimeformat(e,t,this._timeReference)}get overflowHandling(){return this._overflowHandling}set overflowHandling(e){this._overflowHandling=e}};ie.FORMATAUTO=0;(function(p){class e extends z{constructor(h,o,a){super(h,o,t)}}p.VrtPositionEnumItem=e;class t extends B{}t.TOP=new e("TOP","Top"),t.BOTTOM=new e("BOTTOM","Bottom"),p.VrtPosition=t;class n extends z{constructor(h,o,a){super(h,o,i)}}p.OverflowHandlingEnumItem=n;class i extends B{}i.DONOTHING=new n("DONOTHING","Do nothing"),i.SCROLL=new n("SCROLL","Scroll contents"),i.CONTRACT=new n("CONTRACT","Squeeze contents"),p.OverflowHandling=i})(ie||(ie={}));var ee=class extends Z{constructor(e,t){super(e,t);this._panelHrzAlign=ee.HorizontalAlign.CENTERED,this._panelVrtAlign=ee.VerticalAlign.CENTERED,this._horizontalPosition=ee.HorizontalPosition.ABSOLUTEX,this._verticalPosition=ee.VerticalPosition.ABSOLUTEY,this._AbsoluteXposition=0,this._AbsoluteYposition=0,this._YScaleIndex=0}get panelHrzAlign(){return this._panelHrzAlign}set panelHrzAlign(e){this._panelHrzAlign=e,this._enabled&&this._parentRenderer.redraw()}get panelVrtAlign(){return this._panelVrtAlign}set panelVrtAlign(e){this._panelVrtAlign=e,this._enabled&&this._parentRenderer.redraw()}get horizontalPosition(){return this._horizontalPosition}set horizontalPosition(e){this._horizontalPosition=e,this._enabled&&this._parentRenderer.redraw()}get verticalPosition(){return this._verticalPosition}set verticalPosition(e){this._verticalPosition=e,this._enabled&&this._parentRenderer.redraw()}get AbsoluteXposition(){return this._AbsoluteXposition}set AbsoluteXposition(e){this._AbsoluteXposition=e,this._enabled&&this._parentRenderer.redraw()}get AbsoluteYposition(){return this._AbsoluteYposition}set AbsoluteYposition(e){this._AbsoluteYposition=e,this._enabled&&this._parentRenderer.redraw()}get yScaleIndex(){return this._YScaleIndex}set yScaleIndex(e){this._YScaleIndex=e,this._enabled&&this._parentRenderer.redraw()}};(function(p){class e extends z{constructor(g,u,c){super(g,u,t)}}p.HorizontalAlignEnumItem=e;class t extends B{}t.LEFTOF=new e("LEFTOF","Left"),t.CENTERED=new e("CENTERED","Center"),t.RIGHTOF=new e("RIGHTOF","Right"),p.HorizontalAlign=t;class n extends z{constructor(g,u,c){super(g,u,i)}}p.VerticalAlignEnumItem=n;class i extends B{}i.ABOVE=new n("ABOVE","Top"),i.CENTERED=new n("CENTERED","Center"),i.BELOW=new n("BELOW","Bottom"),p.VerticalAlign=i;class r extends z{constructor(g,u,c){super(g,u,h)}}p.HorizontalPositionEnumItem=r;class h extends B{}h.LEFTBORDER=new r("LEFTBORDER","Left border"),h.ABSOLUTEX=new r("ABSOLUTEX","Absolute X position"),h.RIGHTBORDER=new r("RIGHTBORDER","Right borde"),p.HorizontalPosition=h;class o extends z{constructor(g,u,c){super(g,u,a)}}p.VerticalPositionEnumItem=o;class a extends B{}a.TOPBORDER=new o("TOPBORDER","Top border"),a.ABSOLUTEY=new o("ABSOLUTEY","Absolute Y position"),a.BOTTOMBORDER=new o("BOTTOMBORDER","Bottom border"),p.VerticalPosition=a})(ee||(ee={}));var He=class{constructor(e){}get handle(){return"crosshair"}},Pe=class{constructor(e){this._value=0,this._value=e}toString(e){let t="",n=Math.abs(this._value/1e3),i=Math.floor(n),r=Math.round(1e3*(n-Math.floor(n)));if(e&C.ms1){let h="00"+r.toString();t="."+h.substring(h.length-3).substring(0,1)}else if(e&C.ms01){let h="00"+r.toString();t="."+h.substring(h.length-3).substring(0,2)}else if(e&C.ms001){let h="00"+r.toString();t="."+h.substring(h.length-3).substring(0,3)}if(e&C.s){let h=i%60,o="0"+h.toString();t=o.substring(o.length-2)+t+"s"}if(i=Math.floor(i/60),e&C.m){let h=i%60,o="0"+h.toString();t=o.substring(o.length-2)+"m"+t}if(i=Math.floor(i/60),e&C.h){let h=i%24,o="0"+h.toString();t=o.substring(o.length-2)+"h"+t}if(i=Math.floor(i/24),e&C.D){let h=i.toString();t=h.substring(h.length-2)+"d"+t}return t}};Pe.TicksPerSecond=1e3;var T=class extends D{get legendPanel(){return this._legendPanel}get dataTracker(){return this._dataTracker}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this._borderPen=null,this.redraw()}get borderThickness(){return this._borderThickness}set borderThickness(e){if(e<0)throw new RangeError("thickness must be a positive value");this._borderThickness=e,this._borderPen=null,this.redraw()}static get verticalDragZoomEnabled(){return T._defaultVerticalDragZoomEnabled}static set verticalDragZoomEnabled(e){T._defaultVerticalDragZoomEnabled=e}static createCaptureCursor(){if(T.captureCursor!=null)return;let e="iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALHRFWHRDcmVhdGlvbiBUaW1lAFRodSAyMCBBdWcgMjAyMCAxMjoxNTo1MCArMDEwMP38NhoAAAAHdElNRQfkCBQOJAvCrm0ZAAAACXBIWXMAAFxGAABcRgEUlENBAAAABGdBTUEAALGPC / xhBQAAAmVJREFUeNrtVrFuFDEQHd9eBImAIBFoAgVC0NJQUFDwL / QgRXzAfUz + Iy0pQwsIJAhCQMQBUS5c2DXv7T5fzN5qs / Fxdw0jPY3ttT3jt54ZmyXIYDDoQXnodWBV / SRJXZhJbwCXov65pZ + 4zklfBsZRf2EMxOuTjc / igIu0s0UygAvnonWZ0NP4fB2QkQz6yHvP / i76V4E1jZ / bic4LIuMnND7ZwDl + u4 / me + AnkKPvu + 7rFMNZBzZ64eRTm5w6sQ8cAcUZexVytOCpOnv7j + QdDD + CHgKjMg80nWpeQrYgd4A3wHjWPJAqN4BVoLcsB1ZMd25ZDkzkvwNLd6AMQ4XGIuXElKz6SAo3rYpLhsZKyyJmwu2WTLiF5g / g2NozIY1 / BkacRwaYkZgUPlr7L2EdeAhjLxpqwTOr0vAHOZG37FPIOO3mfXXG1qEWAGvM + TC6Rydk / KmMv7bmWlD / v95qtaCThGpo1TPsFvp7wBO0v4nBqWoYvR0yOeLFThHmdH4TcgGQy8i + hkn5V / WbSjGr7e9oD96372LJB1o7izbPtYHpPw7V / 8u4yvzFkvPTO3MXuMbx8JRPij8svgAcAw / EwCe0f8XGxZYFB6JQZzl + rHWj1Gf5WZLVTj5py5HbVoXjeF4OuMhYnQHKulW / x6U64CPtbfpVxQu7CX0PeicMov3cKup5EZmw / KwMFNb8pMtl5G3MhIyHkOX3PPUSMmXzOX7Fqsw35Gu5NidEwXWr / jnnD + XUFzLARJRaDXnCQ53o0BpSLzcXzQfAK + Cl9EEwXrKTyr1OWGa3sFnLvPDsn6Tg8P0PrBcSMR2NtfsAAAAASUVORK5CYII =";try{T.captureCursor=new He(atob(e))}catch(t){console.log("Cannot create custom cursor")}}get dataPanels(){return this._dataPanels}addDataPanel(){let e=new ee(this,this);return this._dataPanels.push(e),e}setMarkerCaptureCallbacks(e,t){this._markerCaptureStartedCallback=e,this._markerCaptureStoppedCallback=t}startMarkerCapture(e){this._markerCaptureStartedCallback!=null&&this._markerCaptureStartedCallback(e),this.markerCapture=e,this.UIContainer.focus()}constructor(e,t){super(e,t);this._markerCaptureStartedCallback=null,this._markerCaptureStoppedCallback=null,this.lastPointCount=-1,this.lastTopMargin=-1,this.lastBottomMargin=-1,this.navigatorCache=null,this.markerCapture=null,this._borderPen=null,this._borderColor=s.LightGray,this._borderThickness=1,this._touchStartfct=null,this._touchMovefct=null,this._touchEndfct=null,this._mouseDownfct=null,this._mouseMovefct=null,this._mouseWheelfct=null,this._mouseKeyDownfct=null,this.mainViewPort=new fe,this._timeRange=null,this._bgBrush=null,this._bgColor1=s.FromArgb(255,200,200,200),this._bgColor2=s.FromArgb(255,255,255,255),this._touchStartPinchDistance=-1,this._touchStartPinchCenter=new v(0,0),this._touchStartPinchZoom=1,this._touchStartPinchIRLx=0,this._touchStartPinchRange=0,this.dataTrackerRefreshtimeout=null,T.createCaptureCursor(),this._xAxis=new ie(this,this),this._yAxes=[],this._series=[],this._dataPanels=[],this._navigator=new be(this,this),this._legendPanel=new ne(this,this),this._dataTracker=new Re(this,this),this._touchStartfct=o=>{this.TouchStart(this.UIContainer,o)},this._touchMovefct=o=>{this.TouchMove(this.UIContainer,o)},this._touchEndfct=o=>{this.TouchEnd(this.UIContainer,o)},this._mouseDownfct=o=>{this.MouseDown(this.UIContainer,o)},this._mouseMovefct=o=>{this.MouseMove(this.UIContainer,o)},this._mouseWheelfct=o=>{this.mouseWheelEvent(this.UIContainer,o)},this._mouseKeyDownfct=o=>{this.KeyDown(this.UIContainer,o)},this.UIContainer.addEventListener("touchstart",this._touchStartfct),this.UIContainer.addEventListener("touchmove",this._touchMovefct),this.UIContainer.addEventListener("touchend",this._touchEndfct),this.UIContainer.addEventListener("mousedown",this._mouseDownfct),this.UIContainer.addEventListener("mousemove",this._mouseMovefct),this.UIContainer.addEventListener("wheel",this._mouseWheelfct),this.UIContainer.addEventListener("keydown",this._mouseKeyDownfct),this._timeRange=V.DefaultValue();let n=e.width,i=e.height,r=e.width,h=e.height}destroy(){this._touchStartfct!=null&&this.UIContainer.removeEventListener("touchstart",this._touchStartfct),this._touchMovefct!=null&&this.UIContainer.removeEventListener("touchstart",this._touchMovefct),this._touchEndfct!=null&&this.UIContainer.removeEventListener("touchstart",this._touchEndfct),this._mouseDownfct!=null&&this.UIContainer.removeEventListener("mousedown",this._mouseDownfct),this._mouseMovefct!=null&&this.UIContainer.removeEventListener("mousemove",this._mouseMovefct),this._mouseWheelfct!=null&&this.UIContainer.removeEventListener("wheel",this._mouseWheelfct),this._mouseKeyDownfct!=null&&this.UIContainer.removeEventListener("keydown",this._mouseKeyDownfct),super.destroy(),Object.entries(this).forEach(e=>{Reflect.set(this,e[0],null)})}getMostRecentPoint(){let e=new ae(NaN,NaN);for(let t=0;t<this._series.length;t++)if(!this.series[t].disabled){let n=this.series[t].getlastPoint();isNaN(n.x)||(isNaN(e.x)||n.x>e.x)&&(e=n)}return e}adjustGlobalTimeRange(e){let t=this._timeRange.Max;if(this._timeRange=V.CombineWithNumber(this._timeRange,e),isNaN(t))return;let n=e-t;if(n>0)switch(this._xAxis.overflowHandling){case ie.OverflowHandling.SCROLL:t>this._xAxis.min+(this._xAxis.max-this._xAxis.min)*.85&&t<=this._xAxis.max&&(this.DisableRedraw(),this._xAxis.set_minMax(this._xAxis.min+n,this._xAxis.max+n),this.AllowRedraw());break;case ie.OverflowHandling.CONTRACT:t>this._xAxis.min+(this._xAxis.max-this._xAxis.min)*.95&&t<=this._xAxis.max&&(this.DisableRedraw(),this._xAxis.max+=n,this.AllowRedraw());break}}get bgColor1(){return this._bgColor1}set bgColor1(e){this._bgColor1=e,this._bgBrush=null,this.redraw()}get bgColor2(){return this._bgColor2}set bgColor2(e){this._bgColor2=e,this._bgBrush=null,this.redraw()}get xAxis(){return this._xAxis}get navigator(){return this._navigator}get yAxes(){return this._yAxes}get series(){return this._series}addYAxis(){let e=new ce(this,this,this._yAxes.length);return this._yAxes.push(e),this.redraw(),e}addSerie(){let e=new me(this);return this._series.push(e),this.redraw(),e}clearCachedObjects(){this._bgBrush=null,this.navigatorCache=null}TouchStart(e,t){t.touches.length==1?this.HandleMouseDown(e,t.touches[0].pageX,t.touches[0].pageY):t.touches.length==2&&(t.preventDefault(),this.HandleEndOfMouseCapture(),this._touchStartPinchDistance=Math.sqrt(Math.pow(t.touches[1].pageX-t.touches[0].pageX,2)+Math.pow(t.touches[1].pageY-t.touches[0].pageY,2)),this._touchStartPinchCenter=new v(t.touches[1].pageX+t.touches[0].pageX>>2,t.touches[1].pageY+t.touches[0].pageY>>2),this._touchStartPinchZoom=this.mainViewPort.zoomx,this._touchStartPinchIRLx=this.mainViewPort.IRLx,this._touchStartPinchRange=this._xAxis.max-this._xAxis.min)}MouseDown(e,t){t.buttons==2&&this.markerCapture!=null&&(this.markerCapture=null,this._markerCaptureStoppedCallback!=null&&this._markerCaptureStoppedCallback(null)),t.buttons==1&&this.HandleMouseDown(e,t.pageX,t.pageY)}HandleMouseDown(e,t,n){let i=this.Scr2ElmMatrix.multiplyByV(oe.FromXYCoord(t,n)).toPoint(),r=i.X,h=i.Y;if(r>=this.mainViewPort.Lmargin&&r<=this.mainViewPort.Width-this.mainViewPort.Rmargin&&h>=this.mainViewPort.Tmargin&&h<=this.mainViewPort.Height-this.mainViewPort.Bmargin){if(this.markerCapture!=null){let a=T.ViewPortPointToIRL(this.mainViewPort,new v(r,h));this.markerCapture.setCapturedPosition(a.x,this.xAxis),this._markerCaptureStoppedCallback!=null&&this._markerCaptureStoppedCallback(this.markerCapture),this.markerCapture=null;return}let o=T.ViewPortPointToIRL(this.mainViewPort,new v(r,h));this.mainViewPort.OriginalXAxisMin=this.xAxis.min,this.mainViewPort.OriginalXAxisMax=this.xAxis.max,this.mainViewPort.OriginalIRLx=this.mainViewPort.IRLx,this.mainViewPort.OriginalLmargin=this.mainViewPort.Lmargin,this.mainViewPort.OriginalZoomx=this.mainViewPort.zoomx,this.mainViewPort.CaptureStartY=h,this.mainViewPort.IRLCaptureStartX=o.x,this.mainViewPort.Capture=!0}else if(r>=this._navigator.viewport.Lmargin&&r<=this._navigator.viewport.Width-this._navigator.viewport.Rmargin&&h>=this._navigator.viewport.Lmargin&&h<=this._navigator.viewport.Height-this._navigator.viewport.Bmargin){let o=T.ViewPortPointToIRL(this._navigator.viewport,new v(r,h)),a=T.ViewPortPointToIRL(this.mainViewPort,new v(this.mainViewPort.Lmargin,0)),l=T.ViewPortPointToIRL(this.mainViewPort,new v(this.mainViewPort.Width-this.mainViewPort.Rmargin,0));if(o.x>=a.x&&o.x<=l.x)this._navigator.startCapture(o,this._xAxis.min,this._xAxis.max);else{this.DisableRedraw();let g=o.x-(l.x-a.x)/2,u=g+(l.x-a.x);this._xAxis.set_minMax(g,u),this.AllowRedraw(),this.Draw(0)}}}TouchMove(e,t){if(t.touches.length==1)t.preventDefault(),this.HandleMouseMove(e,t.touches[0].pageX,t.touches[0].pageY);else if(t.touches.length==2){t.preventDefault();let i=Math.sqrt(Math.pow(t.touches[1].pageX-t.touches[0].pageX,2)+Math.pow(t.touches[1].pageY-t.touches[0].pageY,2))/this._touchStartPinchDistance,r=this._touchStartPinchZoom*i;if(r>this.mainViewPort.zoomx&&r>1e3)return;let h=this._xAxis.max-this._xAxis.min;this.mainViewPort.IRLx=this._touchStartPinchIRLx+(this._touchStartPinchCenter.X-this.mainViewPort.Lmargin)/this._touchStartPinchZoom-(this._touchStartPinchCenter.X-this.mainViewPort.Lmargin)/r,this._xAxis.set_minMax(this.mainViewPort.IRLx,this.mainViewPort.IRLx+this._touchStartPinchRange/i),this.mainViewPort.zoomx=r,this.redraw()}}TouchEnd(e,t){this.HandleEndOfMouseCapture()}MouseMove(e,t){t.buttons!=1&&(this.mainViewPort.Capture||this._navigator.Capture)&&this.HandleEndOfMouseCapture(),this.HandleMouseMove(e,t.pageX,t.pageY),this.dataTracker.enabled&&(this.dataTrackerRefreshtimeout!=null&&clearTimeout(this.dataTrackerRefreshtimeout),this.dataTrackerRefreshtimeout=setTimeout(()=>{this.redraw()},100))}HandleEndOfMouseCapture(){this.mainViewPort.Capture=!1,this._navigator.stopCapture(),this._dataTracker.enabled&&this.redraw()}HandleMouseMove(e,t,n){let i=this.Scr2ElmMatrix.multiplyByV(oe.FromXYCoord(t,n)).toPoint(),r=i.X,h=i.Y;if(this.markerCapture!=null?r>this.mainViewPort.Lmargin&&r<this.mainViewPort.Width-this.mainViewPort.Rmargin&&h>this.mainViewPort.Tmargin&&h<this.mainViewPort.Height-this.mainViewPort.Bmargin?this.UIContainer.style.cursor!=T.captureCursor.handle&&this.UIContainer.style.cursor!="crosshair"&&(this.UIContainer.style.cursor=T.captureCursor!=null?T.captureCursor.handle:"crosshair"):this.UIContainer.style.cursor!="default"&&(this.UIContainer.style.cursor="default"):this.UIContainer.style.cursor!="default"&&(this.UIContainer.style.cursor="default"),this.mainViewPort.Capture){let a=this.mainViewPort.OriginalIRLx+(r-this.mainViewPort.OriginalLmargin)/this.mainViewPort.OriginalZoomx-this.mainViewPort.IRLCaptureStartX,l=h-this.mainViewPort.CaptureStartY;this.DisableRedraw();let g=(this.mainViewPort.OriginalXAxisMax-this.mainViewPort.OriginalXAxisMin)/2,u=(this.mainViewPort.OriginalXAxisMax+this.mainViewPort.OriginalXAxisMin)/2,c=T._defaultVerticalDragZoomEnabled&&Math.abs(l)>10?Math.pow(1.01,l):1;this._xAxis.set_minMax(u-g*c-a,u+g*c-a),this.AllowRedraw(),this.redraw();return}if(this._navigator.viewport.Capture){let a=this._navigator.viewport.OriginalIRLx+(r-this._navigator.viewport.OriginalLmargin)/this._navigator.viewport.OriginalZoomx-this._navigator.viewport.IRLCaptureStartX;this.DisableRedraw(),this._xAxis.set_minMax(this._navigator.viewport.OriginalXAxisMin+a,this._navigator.viewport.OriginalXAxisMax+a),this.AllowRedraw(),this.redraw();return}}cross(e){}static IRLPointToViewPort(e,t,n,i){if(n===void 0){let o=e.Lmargin+Math.round((t.x-e.IRLx)*e.zoomx),a=e.Height-e.Bmargin-Math.round((t.y-e.IRLy)*e.zoomy);return new v(o>>0,a>>0)}let r=e.Lmargin+Math.round((t.x-e.IRLx)*e.zoomx),h=e.Height-e.Bmargin-Math.round((t.y-n)*i);return new v(r>>0,h>>0)}static ViewPortPointToIRL(e,t,n,i){return n===void 0?new ae(e.IRLx+(t.X-e.Lmargin)/e.zoomx,e.IRLy+(+e.Height-t.Y-e.Bmargin)/e.zoomy):new ae(e.IRLx+(t.X-e.Lmargin)/e.zoomx,n+(+e.Height-t.Y-e.Bmargin)/i)}static FindMinMax(e,t,n,i){let r=V.DefaultValue();if(!(n[0].x<t)&&n[i-1].x>e)return r;let h=0,o=0,a=0;if(n[0].x<e){for(h=0,o=i-1;o-h>1;){let g=h+o>>1;n[g].x>e?o=g:h=g}a=h-1,a<0&&(a=0)}let l=i-1;if(n[l]===void 0)debugger;if(n[l].x>t){for(h=0,o=i-1;o-h>1;){let g=h+o>>1;n[g].x<t?h=g:o=g}l=o+1,l>i-1&&(l=i-1)}r.Min=n[a].y,r.Max=n[a].y;for(let g=a+1;g<=l;g++)n[g].y<r.Min&&(r.Min=n[g].y),n[g].y>r.Max&&(r.Max=n[g].y);return r}resetlegendPens(){for(let e=0;e<this._series.length;e++)this._series[e].resetlegendPen()}drawLegendPanel(e,t,n,i){let r=1.25;if(!this._legendPanel.enabled)return;let h=new Array(this._series.length),o=new Array(this._series.length),a=new Array(this._series.length),l=new Array(this._series.length),g=new Array(this._series.length),u=0,c=0,_=0,m=0;e.TextRenderingHint=I.SingleBitPerPixelGridFit,e.SetClip(new S(0,0,t,n));for(let R=0;R<this._series.length;R++)this._series[R].legend!=""?g[R]=this._series[R].legend:g[R]="Series "+(R+1).toString();if(this._legendPanel.position==ne.Position.TOP||this._legendPanel.position==ne.Position.BOTTOM){let R=t-2*this._legendPanel.padding+this._legendPanel.borderthickness;this._legendPanel.overlap&&(R=R-i.Lmargin-i.Rmargin),u=0;let b=0,A=0;for(let F=0;F<this._series.length;F++)if(this._series[F].segments.length>0&&this._series[F].visible&&!this._series[F].disabled){let L=e.MeasureString(g[F],this._legendPanel.font,1e5);o[F]=L.height+1;let H=L.width+20;b==0&&(u+=L.height),R-b<H?b==0?(a[F]=b,l[F]=A,A+=L.height,_<H&&(_=H)):(A+=L.height,a[F]=0,l[F]=A,b=H,u+=L.height,_<b&&(_=b)):(a[F]=b,l[F]=A,b+=H,_<b&&(_=b))}c>R&&(c=R)}else{let R=0;for(let b=0;b<this._series.length;b++)if(this._series[b].segments.length>0&&this._series[b].visible&&!this._series[b].disabled){let A=e.MeasureString(g[b],this._legendPanel.font,1e5);h[b]=A.width+1,_<h[b]+20&&(_=h[b]+20),o[b]=A.height+1,m<o[b]&&(m=o[b]),a[b]=0,l[b]=R,R+=A.height*r,u+=b==0?A.height:A.height*r}}let f=_+2*this._legendPanel.padding+this._legendPanel.borderthickness,x=u+2*this._legendPanel.padding+this._legendPanel.borderthickness,w=0,d=0;switch(this._legendPanel.position){case ne.Position.LEFT:w=this._legendPanel.horizontalMargin,this._legendPanel.overlap?(w+=i.Lmargin,d=i.Tmargin+(n-i.Tmargin-i.Bmargin-x)/2):(i.Lmargin+=f+2*this.legendPanel.horizontalMargin+this.legendPanel.borderthickness>>0,d=(n-x)/2);break;case ne.Position.TOPLEFT:w=this._legendPanel.horizontalMargin,d=this._legendPanel.verticalMargin,this._legendPanel.overlap?(w+=i.Lmargin,d+=i.Tmargin):i.Lmargin+=f+2*this.legendPanel.horizontalMargin+this.legendPanel.borderthickness>>0;break;case ne.Position.TOP:this._legendPanel.overlap?(w=i.Lmargin+(t-i.Lmargin-i.Rmargin-f)/2-this._legendPanel.horizontalMargin-this._legendPanel.borderthickness,d=i.Tmargin+this._legendPanel.verticalMargin-this._legendPanel.borderthickness):(w=(t-f)/2-this._legendPanel.horizontalMargin-this._legendPanel.borderthickness,d=this._legendPanel.verticalMargin+this._legendPanel.borderthickness,i.Tmargin+=u+this._legendPanel.verticalMargin+2*this._legendPanel.verticalMargin+this._legendPanel.borderthickness>>0);break;case ne.Position.TOPRIGHT:w=t-this._legendPanel.horizontalMargin-f,d=this._legendPanel.verticalMargin,this._legendPanel.overlap?(w-=i.Rmargin,d+=i.Tmargin):i.Rmargin+=f+2*this._legendPanel.horizontalMargin+this._legendPanel.borderthickness>>0;break;case ne.Position.RIGHT:w=t-this._legendPanel.horizontalMargin-f,this._legendPanel.overlap?(w-=i.Rmargin,d=i.Tmargin+(n-i.Tmargin-i.Bmargin-x)/2):(i.Rmargin+=f+2*this._legendPanel.horizontalMargin+this._legendPanel.borderthickness>>0,d=(n-x)/2);break;case ne.Position.BOTTOMRIGHT:w=t-this._legendPanel.horizontalMargin-f,this._legendPanel.overlap?(w-=i.Rmargin,d=n-i.Bmargin-x-this._legendPanel.verticalMargin):(i.Rmargin+=f+2*this._legendPanel.horizontalMargin+this._legendPanel.borderthickness>>0,d=n-this._legendPanel.verticalMargin-x);break;case ne.Position.BOTTOM:this._legendPanel.overlap?(w=i.Lmargin+(t-i.Lmargin-i.Rmargin-f)/2-this._legendPanel.horizontalMargin-this._legendPanel.borderthickness,d=n-i.Bmargin-u-2*this._legendPanel.padding-2*this._legendPanel.verticalMargin-this._legendPanel.borderthickness):(w=(t-f)/2-this._legendPanel.horizontalMargin-this._legendPanel.borderthickness,d=n-this._legendPanel.verticalMargin-2*this._legendPanel.padding-this._legendPanel.borderthickness-u,i.Bmargin+=u+2*this._legendPanel.padding+2*this._legendPanel.verticalMargin+this._legendPanel.borderthickness);break;case ne.Position.BOTTOMLEFT:w=this._legendPanel.horizontalMargin,d=this._legendPanel.verticalMargin,this._legendPanel.overlap?(w+=i.Lmargin,d=n-i.Bmargin-x-this._legendPanel.verticalMargin):(i.Lmargin+=f+2*this._legendPanel.horizontalMargin+this._legendPanel.borderthickness,d=n-this._legendPanel.verticalMargin-x);break}let P=new S(w>>0,d>>0,f>>0,x>>0);e.FillRectangle(this._legendPanel.bgBrush,P),e.DrawRectangle(this._legendPanel.pen,P),e.TextRenderingHint=I.AntiAlias;for(let R=0;R<this._series.length;R++)if(this._series[R].segments.length>0&&this._series[R].visible&&!this._series[R].disabled){e.DrawStringXY(g[R],this._legendPanel.font,this._legendPanel.font.brush,w+a[R]+20+this._legendPanel.padding>>0,d+l[R]+this._legendPanel.padding>>0);let b=w+a[R]+this._legendPanel.borderthickness/2+this._legendPanel.padding+6>>0,A=d+l[R]+this._legendPanel.padding+o[R]/2>>0;e.DrawLine(this._series[R].legendPen,new E(b,A),new E(b+12,A))}}static DoSegmentRendering(e,t,n,i,r,h,o){if(i[0].x>o||i[r-1].x<h)return 0;let a=t instanceof K,l=0,g=0,u=0;if(i[0].x<h){for(l=0,g=r-1;g-l>1;){let _=l+g>>1;i[_].x>h?g=_:l=_}u=l-1,u<0&&(u=0)}let c=r-1;if(i[c].x>o){for(l=0,g=r-1;g-l>1;){let _=l+g>>1;i[_].x<o?l=_:g=_}c=g+1,c>r-1&&(c=r-1)}if(c-u>2*e.Width-e.Lmargin-e.Rmargin){let _=new Array(3*(c-u+1)),m=T.IRLPointToViewPort(e,i[u]),f,x=u+1,w=0,d,P,R;for(;x<c;){_[w++]=new E(m.X,m.Y),P=i[x].y,d=P,R=T.ViewPortPointToIRL(e,new v(m.X+1,m.Y+1)).x;do i[x].y>d&&(d=i[x].y),i[x].y<P&&(P=i[x].y),x++;while(x<c&&i[x].x<R);let b=T.IRLPointToViewPort(e,new ae(i[x].x,P)),A=T.IRLPointToViewPort(e,new ae(i[x].x,d));Math.abs(b.Y-A.Y)>2&&(_[w++]=new E(b.X,b.Y),_[w++]=new E(A.X,A.Y)),m=T.IRLPointToViewPort(e,i[x])}return _[w++]=m,_=_.slice(0,w),w>1&&t.DrawLines(n,_),w}else if(a){let _=new Array(c-u+1);for(let m=u;m<=c;m++)_[m-u]=T.IRLPointToViewPort(e,i[m]);t.DrawLines(n,_)}else for(let _=u;_<c;_++)t.DrawLine(n,T.IRLPointToViewPort(e,i[_]),T.IRLPointToViewPort(e,i[_+1]));return c-u}DrawYAxisZones(e,t,n){if(!n.visible)return;let r=(n.startStopStep.dataMax-n.startStopStep.dataMin)/(e.Height-e.Bmargin-e.Tmargin);for(let h=0;h<n.zones.length;h++)if(n.zones[h].visible){let o=n.zones[h].max,a=n.zones[h].min;if(Number.isNaN(o)&&(o=n.startStopStep.dataMax),Number.isNaN(a)&&(a=n.startStopStep.dataMin),o<a){let u=o;o=a,a=u}let l=e.Height-e.Bmargin-Math.round((o-n.startStopStep.dataMin)/r)>>0,g=Math.round((o-a)/r)>>0;t.FillRectangleXYHW(n.zones[h].zoneBrush,this.mainViewPort.Lmargin,l,this.mainViewPort.Width-this.mainViewPort.Rmargin-this.mainViewPort.Lmargin+1,g)}}DrawXAxisZones(e,t,n){if(!n.visible)return;let r=(n.max-n.min)/(e.Width-e.Lmargin-e.Rmargin);for(let h=0;h<n.zones.length;h++)if(n.zones[h].visible){let o=n.zones[h].max,a=n.zones[h].min;if(Number.isNaN(o)&&(o=n.min),Number.isNaN(a)&&(a=n.max),o<a){let g=o;o=a,a=g}let l=e.Lmargin+Math.round((a-n.min)/r)>>0;t.FillRectangleXYHW(n.zones[h].zoneBrush,l,this.mainViewPort.Tmargin,(o-a)/r>>0,this.mainViewPort.Height-this.mainViewPort.Tmargin-this.mainViewPort.Bmargin)}}static DrawYAxis(e,t,n,i,r){if(!n.visible)return n.innerWidth=0,n.innerWidth;let h=n.startStopStep.dataMax-n.startStopStep.dataMin,o=h/(e.Height-e.Bmargin-e.Tmargin),a=n.position==ce.HrzPosition.LEFT,l=a?e.Lmargin-i:e.Width-e.Rmargin+i;r||t.DrawLineXY(n.pen,l,e.Tmargin,l,e.Height-e.Bmargin);let g=new $(16384);g.LineAlignment=1,g.Alignment=a?2:0;let u=n.startStopStep.step*Math.floor(n.startStopStep.start/n.startStopStep.step);u<0&&(u-=n.startStopStep.step);let c=((h-(u-n.startStopStep.dataMin))/n.startStopStep.step>>0)+1;r||(t.TextRenderingHint=I.AntiAlias);let _=0,m=0;if(n.startStopStep.precision<0&&(m=-n.startStopStep.precision),c<e.Height)for(let f=0;f<c;f++){let x=Math.round((u+f*n.startStopStep.step-n.startStopStep.dataMin)/o)>>0;if(x>=0){x=e.Height-e.Bmargin-x;let w=u+f*n.startStopStep.step;r||(n.showGrid&&(f>0||n.startStopStep.dataMin!=0)&&t.DrawLineXY(n.gridPen,e.Lmargin,x,e.Width-e.Rmargin,x),Math.abs(w)<1e-6&&n.highlightZero&&t.DrawLineXY(n.pen,e.Lmargin,x,e.Width-e.Rmargin,x),t.DrawLineXY(n.pen,l+(a?-2:2),x,l+(a?5:-5),x));let d=w.toFixed(m),P=t.MeasureString(d,n.font,1e5);if(P.width>_&&(_=P.width),!r){let R=new v(l+(a?-3:3),x);t.DrawStringPF(d,n.font,n.font.brush,R,g)}}}if(n.legend.title!=""){let f=t.MeasureString(n.legend.title,n.legend.font,1e5);if(!r){let x=new $(16384);x.Alignment=1,x.LineAlignment=1,x.Trimming=0;let w=l+(a?-_-f.height:_+f.height+2)>>0,d=e.Tmargin+(e.Height-e.Tmargin-e.Bmargin)/2>>0;t.Transform(w,d,a?-Math.PI/2:Math.PI/2),t.DrawStringPF(n.legend.title,n.legend.font,n.legend.font.brush,new v(0,0),x),t.ResetTransform()}_+=f.height}return n.innerWidth=(_>>0)+10,n.innerWidth}DrawMonitorXAxis(e,t,n,i){let r=n.Max-n.Min,h=Y.BestTimeformat(r,r,this.xAxis.timeReference),o=r/(e.Width-e.Lmargin-e.Rmargin),a=(r/h.step>>0)+2,l=h.step*Math.floor(n.Min/h.step);l<n.Min&&(l+=h.step),t.TextRenderingHint=I.AntiAlias;let g=e.Height-e.Bmargin;t.DrawLineXY(this._navigator.pen,e.Lmargin,e.Height-e.Bmargin-1,e.Width-e.Rmargin,e.Height-e.Bmargin-1);let u,c=l;do{let _=Y.FromUnixTime(c);if(h.step>30*86400&&(c=Y.ToUnixTime(new Date(_.getFullYear(),_.getMonth(),1))),c>=n.Min){let m=e.Lmargin+Math.round((c-n.Min)/o);t.DrawLineXY(this._navigator.pen,m,g,m,g-4),i==ie.FORMATAUTO?u=Y.FromUnixTime(c).ToString(h.format):u=Y.FromUnixTime(c).ToString(i);let f=t.MeasureString(u,this._navigator.font,1e5);t.DrawString(u,this._navigator.font,this._navigator.font.brush,new v(m-f.width/2,g-f.height-1))}c+=h.step}while(c<n.Max)}static XLabel(e,t,n,i){let r;if(t.timeReference==Y.TimeReference.ABSOLUTE)t.labelFormat==ie.FORMATAUTO?r=Y.FromUnixTime(e).ToString(n.format):r=e.toString();else{let h=Pe.TicksPerSecond*(Math.round(1e3*(e-t.zeroTime))/1e3);r=h<0?"-"+new Pe(-h).toString(n.format):new Pe(h).toString(n.format)}return r}DrawXAxis(e,t,n,i){if(e.Width-e.Rmargin-e.Lmargin<10)return 1;let r=new $(16384);r.Alignment=1;let h=n.position==ie.VrtPosition.BOTTOM,o=h?e.Height-e.Bmargin:e.Tmargin;i||t.DrawLineXY(n.pen,e.Lmargin,o,e.Width-e.Rmargin,o);let a=n.max-n.min,l=a/(e.Width-e.Lmargin-e.Rmargin),g=(a/n.step>>0)+1,u=0,c=V.DefaultValue();for(let A=0;A<this._series.length;A++)this._series[A].disabled||(c=V.Combine(c,this._series[A].timeRange));if(n.zeroTime=c.Min,n.timeReference==Y.TimeReference.ABSOLUTE)u=n.step*Math.floor(n.min/n.step),c.Min=n.min,c.Max=n.max;else{if(Number.isNaN(c.Min))return 0;u=c.Min+n.step*Math.floor((n.min-n.zeroTime)/n.step)}u<n.min&&(u+=n.step);let _=0;n.timeReference!=Y.TimeReference.ABSOLUTE&&(_=u),n.fullSize=c.Max-c.Min;let m=n.bestFormat(c.Max-c.Min,n.max-n.min);i||(t.TextRenderingHint=I.AntiAlias);let f=0,x;n.step=m.step;let w=parseFloat(u.toString());x=T.XLabel(w,n,m,c);let d=t.MeasureString(x,n.font,1e5),P=1;for(;P*(e.Width-e.Rmargin-e.Lmargin)/g<d.width;)P++;let R=Math.round((w-_)/n.step)>>0,b=0;do{let A=Y.FromUnixTime(w);if(n.step>32*86400&&n.timeReference==Y.TimeReference.ABSOLUTE){if(n.step>=365*86400){let F=A.getMonth();w=Y.ToUnixTime(new Date(A.getFullYear()+(F>5?1:0),0,1))}else w=Y.ToUnixTime(new Date(A.getFullYear(),A.getMonth(),1));if(w<b)debugger}if(w>=n.min){let F=e.Lmargin+Math.round((w-n.min)/l)>>0;F<=e.Width-e.Rmargin&&(i||(n.showGrid&&t.DrawLineXY(n.gridPen,F,e.Tmargin,F,e.Height-e.Bmargin),t.DrawLineXY(n.pen,F,o+(h?2:-2),F,o+(h?-5:5))),x=T.XLabel(w,n,m,c),d=t.MeasureString(x,n.font,1e5),d.height>f&&(f=d.height),i||R%P==0&&t.DrawStringPF(x,n.font,n.font.brush,new E(F,o+(h?5:-d.height>>0)-2),r))}if(b=w,w+=n.step,w<b)debugger;R++}while(w<=n.max);if(n.legend.title!=""){let A=t.MeasureString(n.legend.title,n.legend.font,1e5);if(!i){let F=e.Lmargin+(e.Width-e.Lmargin-e.Rmargin-A.width)/2>>0,L=h?e.Height-e.Bmargin+f+5:e.Tmargin-f-A.height*1.5;t.DrawString(n.legend.title,n.legend.font,n.legend.font.brush,new E(F,L))}f+=A.height>>0}return n.innerHeight=(f>>0)+10,n.innerHeight}pixelxSize(e,t){let n=t.max-t.min,i=e.Width-e.Lmargin-e.Rmargin;return i>0?n/i:0}TimeToAutoSting(e,t,n){let i="",r=n.max-n.min,h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(r>0){let o=this.pixelxSize(t,n);if(o>0)if(n.timeReference==Y.TimeReference.ABSOLUTE){let a=Y.FromUnixTime(e),l=h[a.getMonth()],g=a.getDate().toString(),u=a.getHours().toString();u.length<2&&(u="0"+u);let c=a.getMinutes().toString();c.length<2&&(c="0"+c);let _=a.getSeconds().toString();_.length<2&&(_="0"+_);let m=Math.round(a.getMilliseconds()/10).toString();m.length<2&&(m="0"+_);let f=Math.round(a.getMilliseconds()/100).toString();r>=86400&&(i+=l+" "+g),o<.1?i+=(i!=""?" ":"")+u+":"+c+":"+_+"."+m:o<1?i+=(i!=""?" ":"")+u+":"+c+":"+_+"."+f:o<60?i+=(i!=""?" ":"")+u+":"+c+":"+_:o<3600?i+=(i!=""?" ":"")+u+":"+c:o<86400&&(i+=(i!=""?" ":"")+u+"H")}else{let a=Y.RelativeFormat(n.fullSize,r,o),l=Pe.TicksPerSecond*(Math.round(100*(e-n.zeroTime))/100);i+=l<0?"-"+new Pe(-l).toString(a):new Pe(l).toString(a)}}return i}DrawDataTracker(e,t,n,i){if(!this._dataTracker.enabled)return;let r=this.mouseLocalPosition();if(r==null||r.X<=this.mainViewPort.Lmargin||r.Y<=this.mainViewPort.Tmargin||r.X>=this.UIContainer.width-this.mainViewPort.Rmargin||r.Y>=this.UIContainer.height-this.mainViewPort.Bmargin)return;e.SetClip(new S(0,0,t,n));let h=T.ViewPortPointToIRL(this.mainViewPort,r),o=-1,a=-1,l=new Array(this._series.length),g=new Array(this._series.length);for(let u=0;u<this._series.length;u++)if(this._series[u].visible&&!this._series[u].disabled){let c=this._series[u].findClosestValue(h.x,!1);c!=null&&(g[u]=c,l[u]=T.IRLPointToViewPort(this.mainViewPort,g[u],this.yAxes[this._series[u].yAxisIndex].IRLy,this.yAxes[this._series[u].yAxisIndex].zoom),(a<0||o>Math.abs(l[u].Y-r.Y))&&(o=Math.abs(l[u].Y-r.Y),(this._dataTracker.detectionDistance==0||o<=this._dataTracker.detectionDistance&&Math.abs(l[u].X-r.X)<this._dataTracker.detectionDistance)&&(a=u)))}if(a>=0){let u=l[a].X-this._dataTracker.diameter/2>>0,c=l[a].Y-this._dataTracker.diameter/2>>0,_=this._dataTracker.diameter;e.FillEllipse(this._series[a].brush,u,c,_,_),e.DrawEllipse(this._dataTracker.pen,u,c,_,_);let m,f;r.X>this.mainViewPort.Lmargin+(t-this.mainViewPort.Lmargin-this.mainViewPort.Rmargin)/2?m=-1:m=1,r.Y>this.mainViewPort.Tmargin+(n-this.mainViewPort.Tmargin-this.mainViewPort.Bmargin)/2?f=-1:f=1;let x=l[a].X+m*(this._dataTracker.handleLength*1.5)>>0,w=l[a].Y+f*this._dataTracker.handleLength>>0;e.DrawLineXY(this._dataTracker.pen,l[a].X+m*.707*this._dataTracker.diameter/2>>0,l[a].Y+f*.707*this._dataTracker.diameter/2>>0,l[a].X+m*this._dataTracker.handleLength>>0,l[a].Y+f*this._dataTracker.handleLength>>0),e.DrawLineXY(this._dataTracker.pen,l[a].X+m*this._dataTracker.handleLength>>0,l[a].Y+f*this._dataTracker.handleLength>>0,x,w);let d="";if(this._dataTracker.showSerieName&&(d+=this._series[a].legend+`\r
`),this._dataTracker.showTimeStamp){let A=g[a].x;d+=this.TimeToAutoSting(A,this.mainViewPort,i)+`\r
`}if(this._dataTracker.dataPrecision.toString==Re.DataPrecision.PRECISION_NOLIMIT.toString)d+=g[a].y.toString()+this._series[a].unit;else{let A=this._dataTracker.dataPrecision.description,F=-Math.log10(Number(A));d+=g[a].y.toFixed(F)+this._series[a].unit}let P=e.MeasureString(d,this._dataTracker.font,1e4),R=P.width+2*this._dataTracker.padding+this._dataTracker.borderthickness,b=P.height+2*this._dataTracker.padding+this._dataTracker.borderthickness;m>0?(e.FillRectangleXYHW(this._dataTracker.bgBrush,x,w-(b>>1),R,b),e.DrawRectangleXYHW(this._dataTracker.pen,x,w-(b>>1),R,b),e.DrawStringXY(d,this._dataTracker.font,this._dataTracker.font.brush,x+this._dataTracker.padding>>0,w-(b>>1)+this._dataTracker.padding>>0)):(e.FillRectangleXYHW(this._dataTracker.bgBrush,x-R,w-(b>>1),R,b),e.DrawRectangleXYHW(this._dataTracker.pen,x-R,w-(b>>1),R,b),e.DrawStringXY(d,this._dataTracker.font,this.dataTracker.font.brush,x+this._dataTracker.padding-R>>0,w-(b>>1)+this._dataTracker.padding>>0))}}DrawMarkers(e,t,n,i,r){if(this._xAxis.markers.length==0)return;t.SetClip(new S(e.Lmargin,e.Tmargin,e.Width-e.Rmargin-e.Lmargin,e.Height-e.Bmargin-e.Tmargin));let h=T.ViewPortPointToIRL(e,new v(e.Lmargin,e.Height-e.Bmargin)),o=T.ViewPortPointToIRL(e,new v(e.Width-e.Rmargin,e.Tmargin)),a=(e.Height-e.Bmargin-e.Tmargin)/100,l=-1;t.TextRenderingHint=I.AntiAlias;for(let g=0;g<this._xAxis.markers.length;g++)if(this._xAxis.markers[g].enabled){l<0&&(l=this.pixelxSize(this.mainViewPort,n));let u=!0,c=0;if(this._xAxis.markers[g].timereference==Y.TimeReference.RELATIVE?this._xAxis.zeroTime>0?c=this._xAxis.markers[g].xposition+this._xAxis.zeroTime:u=!1:c=this._xAxis.markers[g].xposition,c>h.x-100*l&&c<o.x+100*l&&u){let m=T.IRLPointToViewPort(e,new ae(c,0)).X>>0,f=e.Height-e.Bmargin-this._xAxis.markers[g].yposition*a>>0,x=this._xAxis.markers[g].text.replace("\\n",`
`),w=new Date;if(x.indexOf("$")>=0){if(x.indexOf("$MARKERTIME$")>=0){let A=this._xAxis.markers[g].timereference==Y.TimeReference.RELATIVE?Y.secTimeSpanToString(this._xAxis.markers[g].xposition,l):this.TimeToAutoSting(this._xAxis.markers[g].xposition,this.mainViewPort,n);x=x.replace("$MARKERTIME$",A)}if(x.indexOf("$VALUE")>=0)for(let A=0;A<this._series.length;A++)if(this._series[A].disabled)x=x.replace("$VALUE"+(A+1).toString()+"$","");else{let F=this._series[A].findClosestValue(c,!0),L=F!=null?F.y.toFixed(0):"--";x=x.replace("$VALUE"+(A+1).toString()+"$",L)}if(x.indexOf("$UNIT")>=0)for(let A=0;A<this._series.length;A++)this._series[A].disabled?x=x.replace("$UNIT"+(A+1).toString()+"$",""):x=x.replace("$UNIT"+(A+1).toString()+"$",this._series[A].unit);if(x.indexOf("$LEGEND")>=0)for(let A=0;A<this._series.length;A++)this._series[A].disabled?x=x.replace("$LEGEND"+(A+1).toString()+"$",""):x=x.replace("$LEGEND"+(A+1).toString()+"$",this._series[A].legend);this._xAxis.markers[g].PatchTextCallback!=null&&(x=this._xAxis.markers[g].PatchTextCallback(x))}let d=t.MeasureString(x,this._xAxis.markers[g].font,1e4),P=d.width+2*this._xAxis.markers[g].padding+this._xAxis.markers[g].borderthickness,R=d.height+2*this._xAxis.markers[g].padding+this._xAxis.markers[g].borderthickness;t.FillRectangleXYHW(this._xAxis.markers[g].bgBrush,m-(P>>1),f-(R>>1),P>>0,R>>0),t.DrawRectangleXYHW(this._xAxis.markers[g].pen,m-(P>>1),f-(R>>1),P>>0,R>>0);let b;switch(this._xAxis.markers[g].textAlign){case he.TextAlign.LEFT:b=m-(P>>1)+this._xAxis.markers[g].padding;break;case he.TextAlign.RIGHT:b=m+(P>>1)-this._xAxis.markers[g].padding;break;default:b=m;break}if(t.DrawStringPF(x,this._xAxis.markers[g].font,this._xAxis.markers[g].font.brush,new E(b,f),this._xAxis.markers[g].stringFormat),t.DrawLineXY(this._xAxis.markers[g].pen,m,e.Tmargin>>0,m,f-(R>>1)),t.DrawLineXY(this._xAxis.markers[g].pen,m,f+(R>>1),m,e.Height-e.Bmargin>>0),this._xAxis.markers[g].arrowSize>0){if(this._xAxis.markers[g].yposition>25){let A=[new E(m-this._xAxis.markers[g].arrowSize,f+(R>>1)),new E(m+this._xAxis.markers[g].arrowSize,f+(R>>1)),new E(m,f+(R>>1)+this._xAxis.markers[g].arrowSize)];t.FillPolygon(this._xAxis.markers[g].arrowBrush,A)}if(this._xAxis.markers[g].yposition<75){let A=[new E(m-this._xAxis.markers[g].arrowSize,f+(R>>1)),new E(m+this._xAxis.markers[g].arrowSize,f+(R>>1)),new E(m,f-(R>>1)-this._xAxis.markers[g].arrowSize)];t.FillPolygon(this._xAxis.markers[g].arrowBrush,A)}}}}t.ResetClip()}DrawDataPanels(e,t,n,i,r,h){if(this._dataPanels.length!=0){t.SetClip(new S(e.Lmargin,e.Tmargin,e.Width-e.Rmargin-e.Lmargin,e.Height-e.Bmargin-e.Tmargin));for(let o=0;o<this._dataPanels.length;o++)if(this._dataPanels[o].enabled){let a=this._dataPanels[o];if(a.yScaleIndex<i.length){let l=e.Width-2*a.padding-a.borderthickness;l<100&&(l=100);let g=t.MeasureString(a.text,a.font,l>>0),u=g.width+2*a.padding+a.borderthickness,c=g.height+2*a.padding+a.borderthickness,_=0;switch(a.horizontalPosition){case ee.HorizontalPosition.LEFTBORDER:_=e.Lmargin;break;case ee.HorizontalPosition.RIGHTBORDER:_=e.Width-e.Rmargin;break;case ee.HorizontalPosition.ABSOLUTEX:let d=(n.max-n.min)/(e.Width-e.Lmargin-e.Rmargin);_=e.Lmargin+Math.round((a.AbsoluteXposition-n.min)/d)>>0;break}let m=0;switch(a.verticalPosition){case ee.VerticalPosition.TOPBORDER:m=e.Tmargin;break;case ee.VerticalPosition.BOTTOMBORDER:m=e.Height-e.Bmargin;break;case ee.VerticalPosition.ABSOLUTEY:m=e.Height-e.Bmargin-Math.round((a.AbsoluteYposition-i[a.yScaleIndex].IRLy)*i[a.yScaleIndex].zoom)>>0;break}switch(a.panelHrzAlign){case ee.HorizontalAlign.LEFTOF:_-=u+a.horizontalMargin;break;case ee.HorizontalAlign.RIGHTOF:_+=a.horizontalMargin;break;default:_-=u/2;break}switch(a.panelVrtAlign){case ee.VerticalAlign.ABOVE:m-=c+a.verticalMargin;break;case ee.VerticalAlign.BELOW:m+=a.verticalMargin;break;default:m-=c/2;break}t.FillRectangleXYHW(a.bgBrush,_>>0,m>>0,u>>0,c>>0),a.borderthickness>0&&t.DrawRectangleXYHW(a.pen,_>>0,m>>0,u>>0,c>>0);let f=new $(16384);switch(a.panelTextAlign){case Q.TextAlign.LEFT:f.LineAlignment=0,f.Alignment=0;break;case Q.TextAlign.RIGHT:f.LineAlignment=2,f.Alignment=2;break;default:f.LineAlignment=1,f.Alignment=1;break}let x=new S(_+a.padding+a.borderthickness/2>>0,m+a.padding+a.borderthickness/2>>0,g.width>>=1,(g.height>>0)+1);t.DrawStringRect(a.text,a.font,a.font.brush,x,f)}else throw new RangeError("Cannot renderer data panel #"+o.toString()+", no such Y axis")}}}Render(e,t,n){if(t<50||n<50)return 0;let i=this.mainViewPort.Lmargin,r=this.mainViewPort.Rmargin;this.mainViewPort.Width=t,this.mainViewPort.Height=n,this.mainViewPort.Lmargin=0,this.mainViewPort.Rmargin=0,e.SmoothingMode=j.HighQuality;let h=5;for(let d=0;d<this._yAxes.length;d++)if(this._yAxes[d].visible){let R=(e.MeasureString("8",this._yAxes[d].font,1e5).height+1)/2>>0;h<R&&(h=R)}this.mainViewPort.Tmargin=this._xAxis.position==ie.VrtPosition.TOP?0:h,this.mainViewPort.Bmargin=this._xAxis.position==ie.VrtPosition.BOTTOM?0:h,this._legendPanel.overlap||this.drawLegendPanel(e,t,n,this.mainViewPort),this.drawAnnotationPanels(e,this._annotationPanels,t,n,!1,this.mainViewPort),this.mainViewPort.Bmargin==0&&(this.mainViewPort.Bmargin=5),this.mainViewPort.Tmargin==0&&(this.mainViewPort.Tmargin=5);let o=this.DrawXAxis(this.mainViewPort,e,this._xAxis,!0);this._xAxis.position==ie.VrtPosition.TOP?this.mainViewPort.Tmargin+=o:this.mainViewPort.Bmargin+=o,this.mainViewPort.IRLx=this._xAxis.min;let a;for(let d=0;d<this._yAxes.length;d++){a=V.DefaultValue();for(let P=0;P<this._series.length;P++)if(this._series[P].yAxisIndex==d&&!this._series[P].disabled)for(let R=0;R<this._series[P].segments.length;R++)a=V.Combine(a,T.FindMinMax(this._xAxis.min,this._xAxis.max,this._series[P].segments[R].data,this._series[P].segments[R].count));this._yAxes[d].computeStartAndStep(a)}this.mainViewPort.Lmargin==0&&(this.mainViewPort.Lmargin=5),this.mainViewPort.Rmargin==0&&(this.mainViewPort.Rmargin=5);for(let d=0;d<this._yAxes.length;d++){let P=T.DrawYAxis(this.mainViewPort,e,this._yAxes[d],0,!0);this.mainViewPort.Lmargin+=this._yAxes[d].position==ce.HrzPosition.LEFT?P:0,this.mainViewPort.Rmargin+=this._yAxes[d].position==ce.HrzPosition.RIGHT?P:0}if(this._navigator.enabled){(i!=this.mainViewPort.Lmargin||r!=this.mainViewPort.Rmargin)&&(this.navigatorCache=null);let d=this._navigator.relativeheight*this.UIContainer.height/100>>0,P=this.xAxis.position==ie.VrtPosition.BOTTOM?o:0;this._navigator.setPosition(t,n,this.mainViewPort.Lmargin,this.mainViewPort.Rmargin,this.mainViewPort.Height-d-this.mainViewPort.Bmargin+P,this.mainViewPort.Bmargin-P),this.mainViewPort.Bmargin+=d}(this.lastTopMargin!=this.mainViewPort.Tmargin||this.lastBottomMargin!=this.mainViewPort.Bmargin)&&(this._bgBrush=null,this.lastTopMargin=this.mainViewPort.Tmargin,this.lastBottomMargin=this.mainViewPort.Bmargin),this._bgBrush==null&&(this._bgBrush=new ue(this._bgColor2,this._bgColor1)),e.FillRectangleXYHW(this._bgBrush,this.mainViewPort.Lmargin,this.mainViewPort.Tmargin,this.mainViewPort.Width-this.mainViewPort.Rmargin-this.mainViewPort.Lmargin,this.mainViewPort.Height-this.mainViewPort.Bmargin-this.mainViewPort.Tmargin),this._borderThickness>0&&(this._borderPen==null&&(this._borderPen=new k(this._borderColor,this._borderThickness)),e.DrawRectangleXYHW(this._borderPen,this.mainViewPort.Lmargin,this.mainViewPort.Tmargin,this.mainViewPort.Width-this.mainViewPort.Rmargin-this.mainViewPort.Lmargin,this.mainViewPort.Height-this.mainViewPort.Bmargin-this.mainViewPort.Tmargin)),e.SetClip(new S(this.mainViewPort.Lmargin,this.mainViewPort.Tmargin,this.mainViewPort.Width-this.mainViewPort.Rmargin-this.mainViewPort.Lmargin,this.mainViewPort.Height-this.mainViewPort.Bmargin-this.mainViewPort.Tmargin));for(let d=0;d<this._yAxes.length;d++)this.DrawYAxisZones(this.mainViewPort,e,this._yAxes[d]);this.DrawXAxisZones(this.mainViewPort,e,this.xAxis),e.ResetClip(),this.DrawXAxis(this.mainViewPort,e,this._xAxis,!1);let l=0,g=0;for(let d=0;d<this._yAxes.length;d++){let P=T.DrawYAxis(this.mainViewPort,e,this._yAxes[d],this._yAxes[d].position==ce.HrzPosition.LEFT?l:g,!1);this._yAxes[d].position==ce.HrzPosition.LEFT&&(l+=P),this._yAxes[d].position==ce.HrzPosition.RIGHT&&(g+=P)}e.SetClip(new S(this.mainViewPort.Lmargin,this.mainViewPort.Tmargin,this.mainViewPort.Width-this.mainViewPort.Rmargin-this.mainViewPort.Lmargin,this.mainViewPort.Height-this.mainViewPort.Bmargin-this.mainViewPort.Tmargin)),this.mainViewPort.zoomx=(this.mainViewPort.Width-this.mainViewPort.Lmargin-this.mainViewPort.Rmargin)/(this._xAxis.max-this._xAxis.min);let u=null,c=0,_=0,m=T.ViewPortPointToIRL(this.mainViewPort,new v(this.mainViewPort.Lmargin,this.mainViewPort.Height-this.mainViewPort.Bmargin)),f=T.ViewPortPointToIRL(this.mainViewPort,new v(this.mainViewPort.Width-this.mainViewPort.Rmargin,this.mainViewPort.Tmargin)),x=m.x,w=f.x;for(let d=0;d<this._series.length;d++)if(this._series[d].visible&&!this._series[d].disabled){let P=this._series[d].yAxisIndex;u=this._series[d].pen,this.mainViewPort.IRLy=this._yAxes[P].startStopStep.dataMin,this._yAxes[this._series[d].yAxisIndex].IRLy=this.mainViewPort.IRLy;let R=this._yAxes[P].startStopStep.dataMax-this._yAxes[P].startStopStep.dataMin;R==0&&(R=1,this.mainViewPort.IRLy-=R/2),this.mainViewPort.zoomy=(this.mainViewPort.Height-this.mainViewPort.Tmargin-this.mainViewPort.Bmargin)/R,this._yAxes[this._series[d].yAxisIndex].zoom=this.mainViewPort.zoomy,e.comment("** main view-port series "+d.toString());for(let b=0;b<this._series[d].segments.length;b++)c+=T.DoSegmentRendering(this.mainViewPort,e,u,this._series[d].segments[b].data,this._series[d].segments[b].count,x,w),_+=this._series[d].segments[b].count}if(e.ResetClip(),this._navigator.enabled){e.comment("** navigator **");let d=this._navigator.viewport,P=V.DefaultValue();for(let X=0;X<this._series.length;X++)this._series[X].disabled||(P=V.Combine(P,this._series[X].timeRange));if(this._navigator.Xrange=V.extend(P,1.05),d.zoomx=(d.Width-d.Lmargin-d.Rmargin)/(this._navigator.Xrange.Max-this._navigator.Xrange.Min),this.lastPointCount!=_&&!this.mainViewPort.Capture&&!this._navigator.Capture||this.navigatorCache==null||e instanceof K){e.comment("Redraw navigator"),this.navigatorCache!=null&&(this.navigatorCache=null),this.navigatorCache=document.createElement("canvas"),this.navigatorCache.width=d.Width,this.navigatorCache.height=d.Height,this.lastPointCount=_;let X;if(e instanceof K?X=e:X=new re(this.navigatorCache,d.Width,d.Height,90),X.FillRectangleXYHW(this._navigator.bgBrush,d.Lmargin,d.Tmargin,d.Width-d.Rmargin-d.Lmargin,d.Height-d.Bmargin-d.Tmargin),this.xAxis.zones.length>0&&this._navigator.showXAxisZones){let O=(this._navigator.Xrange.Max-this._navigator.Xrange.Min)/(d.Width-d.Lmargin-d.Rmargin);for(let de=0;de<this.xAxis.zones.length;de++)if(this.xAxis.zones[de].visible){let se=this.xAxis.zones[de].min,xe=this.xAxis.zones[de].max;isNaN(se)&&(se=this._navigator.Xrange.Min),isNaN(xe)&&(xe=this._navigator.Xrange.Max),X.FillRectangleXYHW(this.xAxis.zones[de].zoneBrush,d.Lmargin+(se-this._navigator.Xrange.Min)/O>>0,d.Tmargin>>0,(xe-se)/O>>0,d.Height-d.Bmargin-d.Tmargin)}}if(V.isDefined(this._navigator.Xrange)&&this._navigator.Xrange.Max-this._navigator.Xrange.Min>0){let q,O;d.IRLx=this._navigator.Xrange.Min;let de=4/(d.Height-d.Bmargin-d.Tmargin),se=T.ViewPortPointToIRL(d,new v(d.Lmargin,d.Height-d.Bmargin)),xe=T.ViewPortPointToIRL(d,new v(d.Width-d.Rmargin,d.Tmargin)),Ve=se.x,ve=xe.x;if(this._navigator.yAxisHandling==be.YAxisHandling.AUTO){for(let y=0;y<this._series.length;y++)if(!this._series[y].disabled){X.comment("** navigator series "+y.toString()),d.IRLy=this._series[y].valueRange.Min;let we=this._series[y].yAxisIndex;if(u=this._series[y].navigatorpen,q=this._series[y].valueRange.Min,O=this._series[y].valueRange.Max,O-q<=0)d.IRLy=q-.5,O=q+.5;else{let W=O-q;q-=W*de,O+=W*de}d.IRLy=q,d.zoomy=(d.Height-d.Tmargin-d.Bmargin)/(O-q);for(let W=0;W<this._series[y].segments.length;W++)c+=T.DoSegmentRendering(d,X,u,this._series[y].segments[W].data,this._series[y].segments[W].count,Ve,ve)}}else for(let y=0;y<this._yAxes.length;y++){let we=V.DefaultValue();for(let W=0;W<this._series.length;W++)this._series[W].yAxisIndex==y&&!this._series[W].disabled&&(we=V.Combine(we,this._series[W].valueRange));we=V.extend(we,1+2*de),q=this._yAxes[y].min,isNaN(q)&&(q=we.Min),O=this._yAxes[y].max,isNaN(O)&&(O=we.Max),Number.isNaN(q)&&(q=0,O=1),O-q<=0&&(q=q-.5,O=q+.5),d.IRLy=q,d.zoomy=(d.Height-d.Tmargin-d.Bmargin)/(O-q);for(let W=0;W<this._series.length;W++)if(this._series[W].yAxisIndex==y&&!this._series[W].disabled&&this._series[W].visible){X.comment("** navigator series "+W.toString()),u=this._series[W].navigatorpen;for(let Te=0;Te<this._series[W].segments.length;Te++)c+=T.DoSegmentRendering(d,X,u,this._series[W].segments[Te].data,this._series[W].segments[Te].count,Ve,ve)}}for(let y=0;y<this._xAxis.markers.length;y++)if(this._xAxis.markers[y].enabled){let we=T.IRLPointToViewPort(d,new ae(this._xAxis.markers[y].xposition+(this._xAxis.markers[y].timereference==Y.TimeReference.RELATIVE?this._xAxis.zeroTime:0),0));X.DrawLineXY(this._xAxis.markers[y].navigatorpen,we.X,d.Tmargin,we.X,d.Height-d.Bmargin)}this._navigator.borderThickness>0&&X.DrawLineXY(this._navigator.borderPen,d.Lmargin,d.Tmargin,d.Width-d.Rmargin,d.Tmargin),this.DrawMonitorXAxis(d,X,this._navigator.Xrange,this.xAxis.labelFormat),this._navigator.setIRLPosition(d.IRLx,d.IRLy,d.zoomx,d.zoomy)}e instanceof K||X.Dispose()}let R=d.Width-d.Rmargin-d.Lmargin+1,b=d.Width-d.Rmargin-d.Lmargin+1,A=new S(d.Lmargin,d.Tmargin-1,R,b),F=new S(d.Lmargin,d.Tmargin,R,b);e.SetClip(F),e instanceof K||e.DrawImage(this.navigatorCache,A,F,2),this._navigator.borderThickness>0&&(e.DrawLineXY(this._navigator.borderPen,d.Lmargin+1,d.Tmargin,d.Lmargin+1,d.Height-d.Bmargin-1),e.DrawLineXY(this._navigator.borderPen,d.Width-d.Rmargin,d.Tmargin,d.Width-d.Rmargin,d.Height-d.Bmargin-1),e.DrawLineXY(this._navigator.borderPen,d.Lmargin+1,d.Tmargin,d.Width-d.Rmargin,d.Tmargin));let L=T.ViewPortPointToIRL(this.mainViewPort,new v(this.mainViewPort.Lmargin,0)),H=T.ViewPortPointToIRL(this.mainViewPort,new v(this.mainViewPort.Width-this.mainViewPort.Rmargin,0)),U=T.IRLPointToViewPort(this._navigator.viewport,new ae(L.x,0)),N=T.IRLPointToViewPort(this._navigator.viewport,new ae(H.x,0));e.FillRectangle(this._navigator.cursorBrush,new S(U.X-1,d.Tmargin,N.X-U.X+2,d.Height-d.Bmargin-d.Tmargin-1)),e.DrawLineXY(this._navigator.cursorBorderPen,U.X-1>>0,d.Tmargin>>0,U.X-1>>0,d.Height-d.Bmargin-1),e.DrawLineXY(this._navigator.cursorBorderPen,N.X+1>>0,d.Tmargin>>0,N.X+1>>0,d.Height-d.Bmargin-1),e.ResetClip()}return this._legendPanel.overlap&&this.drawLegendPanel(e,t,n,this.mainViewPort),e.TextRenderingHint=I.SingleBitPerPixelGridFit,this.DrawMarkers(this.mainViewPort,e,this.xAxis,t,n),this.drawAnnotationPanels(e,this._annotationPanels,t,n,!0,this.mainViewPort),this.DrawDataPanels(this.mainViewPort,e,this.xAxis,this._yAxes,t,n),this.DrawDataTracker(e,t,n,this.xAxis),this.DrawMessagePanels(e,t,n),0}KeyDown(e,t){if(t.code=="ArrowLeft"){let n=.2*(this._xAxis.max-this._xAxis.min);this._xAxis.set_minMax(this._xAxis.min-n,this._xAxis.max-n),this.redraw()}if(t.code=="ArrowRight"){let n=.2*(this._xAxis.max-this._xAxis.min);this._xAxis.set_minMax(this._xAxis.min+n,this._xAxis.max+n),this.redraw()}t.code=="ArrowUp"&&this.mouseWheel(new v(this.UIContainer.width>>1,this.UIContainer.height>>1),10),t.code=="ArrowDown"&&this.mouseWheel(new v(this.UIContainer.width>>1,this.UIContainer.height>>1),-10)}mouseWheel(e,t){let n=Math.pow(1.25,t/120),i=this.mainViewPort.zoomx*n;if(i>this.mainViewPort.zoomx&&i>1e3||(this._xAxis.max-this._xAxis.min)/n>25*365*86400)return;this.mainViewPort.IRLx+=(e.X-this.mainViewPort.Lmargin)/this.mainViewPort.zoomx-(e.X-this.mainViewPort.Lmargin)/i;let h=this._xAxis.max-this._xAxis.min;this._xAxis.set_minMax(this.mainViewPort.IRLx,this.mainViewPort.IRLx+h/n),this.mainViewPort.zoomx=i,this.redraw()}mouseWheelEvent(e,t){let n=this.Scr2ElmMatrix.multiplyByV(oe.FromXYCoord(t.pageX,t.pageY)).toPoint(),i=n.X,r=n.Y;this.mouseWheel(new v(i,r),t.deltaY>0?-150:150),t.preventDefault()}};T._defaultVerticalDragZoomEnabled=!1;T.captureCursor=null;var Ne=class{constructor(){this.outerRadius=0,this.innerRadius=0,this.angleStart=0,this.angleEnd=0,this.ycenter=0,this.xcenter=0,this.heightTop=0,this.heightBottom=0,this.valueRectangle=new S(0,0,0,0),this.valueFormat=new $(16384),this.minValueRectangle=new S(0,0,0,0),this.minValueFormat=new $(16384),this.maxValueRectangle=new S(0,0,0,0),this.maxValueFormat=new $(16384),this.minValue="",this.maxValue="",this.value=""}},pe=class extends D{get min(){return this._min}set min(e){if(e>=this._max&&!D.minMaxCheckDisabled)throw new RangeError("Min cannot be greater than max ("+this._max.toString()+")");this._min=e,this._shownValue<this._min&&(this._shownValue=this._min),this.redraw()}get max(){return this._max}set max(e){if(e<=this._min&&!D.minMaxCheckDisabled)throw new RangeError("Max cannot be less than min ("+this._min.toString()+")");this._max=e,this._shownValue>this._max&&(this._shownValue=this._max),this.redraw()}get borderpen(){return this._borderpen==null&&(this._borderpen=new k(this._borderColor,this._borderThickness),this._borderpen.startCap=1,this._borderpen.endCap=1),this._borderpen}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this._borderpen=null,this.redraw()}get backgroundColor1(){return this._backgroundColor1}set backgroundColor1(e){this._backgroundColor1=e,this._bgBrush=null,this.redraw()}get backgroundColor2(){return this._backgroundColor2}set backgroundColor2(e){this._backgroundColor2=e,this._bgBrush=null,this.redraw()}get borderThickness(){return this._borderThickness}set borderThickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._borderThickness=e,this._borderpen=null,this._path=null,this.redraw()}get valueFormater(){return this._valueFormater}set valueFormater(e){this._valueFormater=e,this.redraw()}get minmaxFormater(){return this._minmaxFormater}set minmaxFormater(e){this._minmaxFormater=e,this.redraw()}get thickness(){return this._thickness}set thickness(e){if(e<0)throw new RangeError("Thickness must be a positive value");this._thickness=Math.max(Math.min(e,80),1),this._path=null,this.redraw()}get maxSpeed(){return this._maxSpeed}set maxSpeed(e){if(e<=0)throw new RangeError("Speed must be a positive value");this._maxSpeed=e}get value(){return this._value}set value(e){this._value=e,this.redraw()}get color1(){return this._color1}set color1(e){this._color1=e,this.redraw()}get color2(){return this._color2}set color2(e){this._color2=e,this.redraw()}get font(){return this._font}get minMaxFont(){return this._minMaxFont}get showMinMax(){return this._showMinMax}set showMinMax(e){this._showMinMax=e,this._path=null,this.redraw()}get displayMode(){return this._displayMode}set displayMode(e){this._displayMode=e,this._path=null,this._bgBrush=null,this.redraw()}FontsizeChange(e){this._path=null}constructor(e,t,n){super(e,n);this._shownValue=0,this._min=0,this._max=100,this.SegmentMaxLength=8,this.mainViewPort=new fe,this._borderpen=null,this._borderColor=s.Black,this._bgBrush=null,this._backgroundColor1=s.FromArgb(255,240,240,240),this._backgroundColor2=s.FromArgb(255,200,200,200),this._borderThickness=5,this._valueFormater=null,this._minmaxFormater=null,this._thickness=25,this._maxSpeed=.1,this._value=0,this._color1=s.Green,this._color2=s.Red,this._font=null,this._minMaxFont=null,this._showMinMax=!0,this._path=null,this.lastDrawParameters=new Ne,this._displayMode=pe.DisplayMode.DISPLAY90,this._minMaxFont=new te(this,this,Math.min(e.width,e.height)/15,()=>{this.FontsizeChange(this._minMaxFont)}),this._displayMode=t,this._font=new te(this,this,Math.min(e.width,e.height)/5,null),this.resizeRule=G.ResizeRule.RELATIVETOBOTH;let i=new re(e,e.width,e.height,90),r=this.ComputeDrawParameters(i,e.width,e.height,this.mainViewPort);i.Dispose()}clearCachedObjects(){this._bgBrush=null,this._path=null}ComputeDrawParameters(e,t,n,i){t-=i.Lmargin+i.Rmargin,n-=i.Tmargin+i.Bmargin;let r=t-5-this._borderThickness,h=n-5-this._borderThickness,o=t/2,a=0,l=0,g=0,u=0,c=new S(0,0,0,0),_=new $(16384),m=0,f=0,x=new Fe(null,""),w=new Fe(null,"");switch(this.lastDrawParameters.value=this._valueFormater==null?this._value.toFixed(0):this._valueFormater(this,this._value),this._showMinMax&&(this.lastDrawParameters.minValue=this._minmaxFormater==null?this._min.toFixed(0):this._minmaxFormater(this,this._min),this.lastDrawParameters.maxValue=this._minmaxFormater==null?this._max.toFixed(0):this._minmaxFormater(this,this._max),x=e.MeasureString(this.lastDrawParameters.minValue,this._minMaxFont,1e5),w=e.MeasureString(this.lastDrawParameters.maxValue,this._minMaxFont,1e5),this.lastDrawParameters.minValueFormat=new $(16384),this.lastDrawParameters.maxValueFormat=new $(16384),f=x.height,w.height>f&&(f=w.height)),this._displayMode){case pe.DisplayMode.DISPLAY90:h=h-f,r=r-f,a=r,a>h-this._borderThickness&&(a=h-this.borderThickness),a>r-this.borderThickness&&(a=r-this.borderThickness),l=Math.PI/2,g=Math.PI,this.lastDrawParameters.heightTop=a,this.lastDrawParameters.heightBottom=0,u=i.Tmargin+h,o=i.Lmargin+t/2+a/2-f+this._borderThickness,m=a*(100-this._thickness)/100,c=new S(o-m>>0,u-m>>0,m>>0,m>>0),_.Alignment=2,_.LineAlignment=2,this._showMinMax&&(this.lastDrawParameters.minValueRectangle=new S(o-(a+m+x.width)/2>>0,u+this._borderThickness>>0,x.width+1>>0,f+1>>0),this.lastDrawParameters.minValueFormat.Alignment=0,this.lastDrawParameters.minValueFormat.LineAlignment=0,this.lastDrawParameters.maxValueRectangle=new S(o+this._borderThickness>>0,u-a+(a-m-w.width)/2>>0,f+1>>0,w.width+1>>0),this.lastDrawParameters.maxValueFormat.Alignment=0,this.lastDrawParameters.maxValueFormat.LineAlignment=0,this.lastDrawParameters.maxValueFormat.FormatFlags=2);break;case pe.DisplayMode.DISPLAY180:h=h-f;let d=new Fe(null,"");d=e.MeasureString(this.lastDrawParameters.value,this._font,1e5),a=r/2-this.borderThickness,a>h-this._borderThickness&&(a=h-this._borderThickness),a>r-this.borderThickness&&(a=r-this.borderThickness),l=0,g=Math.PI,u=a+this._borderThickness/2,m=a*(100-this._thickness)/100,this.lastDrawParameters.heightTop=a,this.lastDrawParameters.heightBottom=0,c=new S(o-m>>0,u+this._borderThickness+f-d.height>>0,2*m>>0,d.height+1>>0),_.Alignment=1,_.LineAlignment=2,this._showMinMax&&(this.lastDrawParameters.minValueRectangle=new S(o-(a+m+x.width)/2>>0,u+this._borderThickness>>0,x.width+1>>0,f+1>>0),this.lastDrawParameters.minValueFormat.Alignment=0,this.lastDrawParameters.minValueFormat.LineAlignment=0,this.lastDrawParameters.maxValueRectangle=new S(o+(a+m-w.width)/2>>0,u+this._borderThickness>>0,w.width+1>>0,f+1>>0),this.lastDrawParameters.maxValueFormat.Alignment=0,this.lastDrawParameters.maxValueFormat.LineAlignment=0);break;case pe.DisplayMode.DISPLAY270:a=r,a>h/2&&(a=h/2),a>r/2&&(a=r/2),this.lastDrawParameters.heightTop=a,this.lastDrawParameters.heightBottom=a,l=0,g=3*Math.PI/2,u=i.Tmargin+n/2,m=a*(100-this._thickness)/100,c=new S(o-m>>0,u-m>>0,2*m>>0,2*m>>0),_.Alignment=1,_.LineAlignment=1,this._showMinMax&&(this.lastDrawParameters.minValueRectangle=new S(o+this._borderThickness>>0,u+(m+m+x.height)/2>>0,x.width+1>>0,x.height+1>>0),this.lastDrawParameters.minValueFormat.Alignment=0,this.lastDrawParameters.minValueFormat.LineAlignment=0,this.lastDrawParameters.maxValueRectangle=new S(o+(m+m+x.height)/2>>0,u+this._borderThickness>>0,w.height+1>>0,w.width+1>>0),this.lastDrawParameters.maxValueFormat.Alignment=0,this.lastDrawParameters.maxValueFormat.LineAlignment=0,this.lastDrawParameters.maxValueFormat.FormatFlags=2);break;case pe.DisplayMode.DISPLAY360:if(a=r,a>h/.85/2&&(a=h/.85/2),a>r/2&&(a=r/2),this.lastDrawParameters.heightTop=a,this.lastDrawParameters.heightBottom=a*.7,u=i.Tmargin+a+this._borderThickness/2,l=-Math.PI/4,g=5*Math.PI/4,m=a*(100-this._thickness)/100,c=new S(o-m>>0,u-m>>0,2*m>>0,2*m>>0),_.Alignment=1,_.LineAlignment=1,this._showMinMax){let P=Math.abs(m*Math.cos(l)),R=m*Math.abs(Math.sin(l))+2*Math.abs((a-m)*Math.sin(l)/3);this.lastDrawParameters.minValueRectangle=new S(o-P>>0,u+R-f/2>>0,x.width+1>>0,f+1>>0),this.lastDrawParameters.minValueFormat.Alignment=0,this.lastDrawParameters.minValueFormat.LineAlignment=1,this.lastDrawParameters.maxValueRectangle=new S(o+P-w.width>>0,u+R-f/2>>0,w.width+1>>0,f+1>>0),this.lastDrawParameters.maxValueFormat.Alignment=0,this.lastDrawParameters.maxValueFormat.LineAlignment=1}break}return this.lastDrawParameters.outerRadius=a,this.lastDrawParameters.innerRadius=m,this.lastDrawParameters.angleStart=l,this.lastDrawParameters.angleEnd=g,this.lastDrawParameters.ycenter=u,this.lastDrawParameters.xcenter=o,this.lastDrawParameters.valueRectangle=c,this.lastDrawParameters.valueFormat=_,this.lastDrawParameters}Render(e,t,n){this.mainViewPort=new fe,e.SmoothingMode=j.HighQuality,e.TextRenderingHint=I.AntiAlias,this.drawAnnotationPanels(e,this._annotationPanels,t,n,!1,this.mainViewPort);let i=this.ComputeDrawParameters(e,t,n,this.mainViewPort);if(this._path==null){let o=2*i.outerRadius*Math.PI*(i.angleEnd-i.angleStart)/(2*Math.PI)/this.SegmentMaxLength>>0,a=(i.angleEnd-i.angleStart)/o;this._path=new Array(2*(o+1));let l=0;for(let g=0;g<=o;g++){let u=i.angleStart+g*a;this._path[l++]=new E(i.xcenter+i.outerRadius*Math.cos(u),i.ycenter-i.outerRadius*Math.sin(u))}for(let g=o;g>=0;g--){let u=i.angleStart+g*a;this._path[l++]=new E(i.xcenter+i.innerRadius*Math.cos(u),i.ycenter-i.innerRadius*Math.sin(u))}}if(this._bgBrush==null&&(this._bgBrush=new ue(this._backgroundColor1,this._backgroundColor2)),this._borderpen==null&&(this._borderpen=new k(this._borderColor,this._borderThickness),this._borderpen.linejoin=k.LineJoin.Round),e.FillPolygon(this._bgBrush,this._path),this._shownValue!=this._value){let h=this._maxSpeed*(this._max-this._min)/100;Math.abs(this._value-this._shownValue)<h?this._shownValue=this._value:this._shownValue<this._value?this._shownValue+=h:this._shownValue-=h}let r=this._shownValue;if(r>=this._min){r>this._max&&(r=this._max);let h=(r-this._min)/(this._max-this.min),o=i.angleStart+(i.angleEnd-i.angleStart)*h,l=2*i.outerRadius*Math.PI*(o-i.angleStart)/(2*Math.PI)/this.SegmentMaxLength>>0,g=(o-i.angleStart)/l,u=new Array(2*(l+1)),c=0;for(let m=0;m<=l;m++){let f=i.angleEnd-m*g;u[c++]=new E(i.xcenter+i.outerRadius*Math.cos(f),i.ycenter-i.outerRadius*Math.sin(f))}for(let m=l;m>=0;m--){let f=i.angleEnd-m*g;u[c++]=new E(i.xcenter+i.innerRadius*Math.cos(f),i.ycenter-i.innerRadius*Math.sin(f))}let _;if(this._color1==this._color2)_=new J(this._color1);else{let m=this._color1.alpha,f=this._color1.hue,x=this._color1.saturation,w=this._color1.luminosity,d=this._color2.alpha,P=this._color2.hue,R=this._color2.saturation,b=this._color2.luminosity,A=Math.round(m+(d-m)*h)>>0&255,F;Math.abs(P-f)<=127?F=f+(P-f)*h>>0:(F=f+256+(P-f+256)*h>>0,F>256&&(F-=256));let L=x+(R-x)*h>>0,H=w+(b-w)*h>>0;_=new J(new s(!0,A,F,L,H))}e.FillPolygon(_,u)}return this._borderThickness>0&&e.DrawPolygon(this._borderpen,this._path),e.DrawStringRect(this.lastDrawParameters.value,this._font,this._font.brush,i.valueRectangle,i.valueFormat),this._showMinMax&&(e.DrawStringRect(this.lastDrawParameters.minValue,this._minMaxFont,this._minMaxFont.brush,this.lastDrawParameters.minValueRectangle,this.lastDrawParameters.minValueFormat),e.DrawStringRect(this.lastDrawParameters.maxValue,this._minMaxFont,this._minMaxFont.brush,this.lastDrawParameters.maxValueRectangle,this.lastDrawParameters.maxValueFormat)),this.drawAnnotationPanels(e,this._annotationPanels,t,n,!0,this.mainViewPort),this.DrawMessagePanels(e,t,n),0}renderingPostProcessing(){this._shownValue!=this._value&&this.redraw()}};(function(p){class e extends z{constructor(i,r,h){super(i,r,t)}}p.DisplayModeEnumItem=e;class t extends B{}t.DISPLAY90=new e("DISPLAY90","90\xB0"),t.DISPLAY180=new e("DISPLAY180","180\xB0"),t.DISPLAY270=new e("DISPLAY270","270\xB0"),t.DISPLAY360=new e("DISPLAY360","360\xB0"),p.DisplayMode=t})(pe||(pe={}));export{Le as AnnotationPanel,ee as DataPanel,_e as DataSegment,me as DataSerie,Re as DataTracker,Me as GenericAxis,Z as GenericPanel,Ie as Legend,ne as LegendPanel,he as Marker,M as Matrix3x3,Q as MessagePanel,ge as MinMax,V as MinMaxHandler,be as Navigator,v as Point,E as PointF,G as Proportional,ke as StartStopStep,Y as TimeConverter,De as TimeConverterParseResult,oe as Vector3,fe as ViewPortSettings,ie as XAxis,ze as YAngularGauge,Ee as YAngularZone,ce as YAxis,Se as YBrush,s as YColor,D as YDataRenderer,C as YDate,le as YDigitalDisplay,B as YEnum,z as YEnumItem,te as YFont,T as YGraph,re as YGraphics,K as YGraphicsSVG,ue as YLinearGradientBrush,k as YPen,S as YRectangle,Fe as YSizeF,j as YSmoothingMode,J as YSolidBrush,pe as YSolidGauge,$ as YStringFormat,I as YTextRenderingHint,Ce as Zone,Be as captureParametersSet,ae as pointXY,Ae as xAxisPosition};
//# sourceMappingURL=yv4web-renderer.min.js.map
