<!DOCTYPE html/>
<html lang = 'en' >
<head >
  <title>Yocto renderer test</title>
  <meta charset = 'UTF-8' >
</head >
<body id="body">
<H1 style="font-family: Arial,sans-serif">Yocto-Visualization renderer lib test</H1>
<h3>Pour lancer le test: "npm run app-test"</h3>
<div style="width:300px;height:100px;background-color:yellow;">pouet</div>
<p>mouse position=<span id="mp"></span></p>
<div id="nest0" style='width:750px;height:550px; margin-left:512px; border : 16px solid orange;'>
<div id="nest1" style='position:relative;width:700px;height:500px; margin-left:256px; border : 23px solid green;'>
<div id="nest2" style='width:650px;height:450px; margin-left:128px; border : 42px solid blue;'>
<div id="nest3" style='position:relative;let:20px;width:600px;height:400px; margin-left:64px;  border : 2px solid red;'>

<canvas          style="width:550px;height:350px; margin-left:32px;  border : 1px solid blue;"  id="cnvs1"></canvas>

</div>
</div>
</div>
</div>

<canvas style='width:600px;height:400px; border : 1px solid blue; position: absolute; top: 50%;  left: 25%;  transform: translate(-50%, -50%) rotate(45deg) scale(0.5)'  id="cnvs2"></canvas>

<canvas style='width:400px;height:300px; border : 1px solid blue; position: absolute; top: 600px;left:50px;'  id="cnvs3"></canvas>


footer text
</body>
<Script type='module'>
  import {
    YGraph, XAxis, YAxis, TimeConverter, YColor, pointXY, YDataRenderer
  } from "./yv4web-full.js";

  function setupGraph(divid)
  {
    var canvas = document.getElementById(divid);
    var renderer = new YGraph(canvas,(str) => { console.log(str); });
    renderer.dataTracker.enabled = true;
    renderer.dataTracker.showSerieName = true;
    renderer.xAxis.overflowHandling = XAxis.OverflowHandling.SCROLL;
    renderer.xAxis.timeReference = TimeConverter.TimeReference.ABSOLUTE;
    renderer.xAxis.initialZoom = 1000;
    var yAxis1 = renderer.addYAxis();
    yAxis1.font.size = 12;
    yAxis1.position = YAxis.HrzPosition.LEFT;
    var msg = renderer.addMessagePanel();
    let serie = renderer.addSerie();
    serie.legend = 'test on'+divid;
    serie.disabled = false;
    let stamp = Date.now()/1000;
    for(let i = 0; i < 1000; i++) {
      serie.AddPoint(new pointXY(stamp+i, Math.sin(i/200)));
    }
    renderer.AllowRedraw() ;
  }
  setupGraph("cnvs1");
  setupGraph("cnvs2");
  setupGraph("cnvs3");

  document.addEventListener("mousemove", e =>
  {document.getElementById("mp").innerHTML="("+e.pageX+","+e.pageY+")";}
  );
</Script>
<script nomodule >
  document.write("<p style='font-family: sans-serif; text-align:center'>Yocto-Visualization (for web) cannot run on this browser. Sorry.<br>Consider using a more recent browser, or <a href='https://www.yoctopuce.com/EN/tools.php'>the native version</a>. </p>")
</script>
</html>
