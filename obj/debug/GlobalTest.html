<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<script>
  function log(st) {console.log(st);}
</script>
<body>
<canvas width="400" height="200" id="cnvs1" style="border:1px solid black"></canvas>&nbsp;&nbsp;
<canvas width="400" height="200" id="cnvs2" style="border:1px solid black"></canvas><br><br>
<canvas width="400" height="200" id="cnvs3" style="border:1px solid black"></canvas>&nbsp;&nbsp;
<canvas width="400" height="200" id="cnvs4" style="border:1px solid black"></canvas>

<script type="module">
    import * as YDataRendering from "./Renderer/YDataRendererFull.d.ts";

  function formatDisplay(src,d)
  { return d.toFixed(4);
  }

  function formatDisplay2(src,d)
  { return d.toFixed(2);
  }

  // digital display
  let canvas1 = document.getElementById("cnvs1");
  let renderer1 = new YDataRendering.YDigitalDisplay(canvas1,log);
  renderer1.value=0;
  renderer1.hrzAlignmentOfset =50;
  renderer1.backgroundColor1 = YDataRendering.YColor.Black;
  renderer1.backgroundColor2 = YDataRendering.YColor.DarkGray;
  renderer1.outOfRangeMin = -5;
  renderer1.outOfRangeMax = +5;
  renderer1.HrzAlignment =  YDataRendering.YDigitalDisplay.HrzAlignment.DECIMAL;
  renderer1.font.name="\"Courier New\", Courier, monospace";
  renderer1.font.bold = true;
  renderer1.valueFormater = formatDisplay;
  let panel = renderer1.addMessagePanel();
  panel.text ="Hello\nthere!";
  panel.font.size = 18;
  panel.enabled =true;
  panel.panelHrzAlign = YDataRendering.GenericPanel.HorizontalAlignPos.LEFT;
  panel.panelVrtAlign = YDataRendering.GenericPanel.VerticalAlignPos.TOP;
  renderer1.AllowRedraw() ;

  let canvas2 = document.getElementById("cnvs2");
  let renderer2 = new YDataRendering.YAngularGauge(canvas2,log);
  renderer2.min =-10
  renderer2.max =+10
  renderer2.graduation =2;
  renderer2.subgraduationCount = 5;
  let z1 = renderer2.AddZone();
  z1.min=-10;
  z1.max=-5;
  z1.color = YDataRendering.YColor.Orange;
  z1.visible =true;
  let z2 = renderer2.AddZone();
  z2.min=-5;
  z2.max=5;
  z2.color = YDataRendering.YColor.LightGreen;
  z2.visible =true;
  let z3 = renderer2.AddZone();
  z3.min=5;
  z3.max=10;
  z3.color = YDataRendering.YColor.Orange;
  z3.visible =true;
  renderer2.unit="YOCTOPUCE";
  renderer2.value=0;
  renderer2.valueFormater = formatDisplay;
  renderer2.AllowRedraw() ;


  let canvas3 = document.getElementById("cnvs3");
  var renderer3 = new YDataRendering.YSolidGauge(canvas3,YDataRendering.YSolidGauge.DisplayMode.DISPLAY90,log);
  renderer3.value=0;
  renderer3.min=0;
  renderer3.max=10;
  renderer3.color2= new YDataRendering.YColor(false,255,255,0,0)
  renderer3.color1= new  YDataRendering.YColor(false,255,0,255,0)
  renderer3.valueFormater = formatDisplay2;
  renderer3.AllowRedraw() ;


  let canvas4 = document.getElementById("cnvs4");
  var renderer4 = new YDataRendering.YGraph(canvas4,log);
  renderer4.DisableRedraw();
  let now = YDataRendering.TimeConverter.ToUnixTime(new Date())

  renderer4.xAxis.setMinMax(now,now+10);
  renderer4.xAxis.overflowHandling =  YDataRendering.XAxis.OverflowHandling.SCROLL;
  renderer4.xAxis.legend.title="X legend 2";

  var  yAxis1 = renderer4.addYAxis();
  yAxis1.font.size=12;
  yAxis1.legend.title="Y legend";


  //renderer.xAxis.position = YDataRendering.XAxis.VrtPosition.TOP;

  let serie1 =   renderer4.addSerie();
  serie1.color = YDataRendering.YColor.Red;
  serie1.disabled = false;
  renderer4.navigator.enabled =true;
  renderer4.AllowRedraw() ;


  let start =  performance.now();
  setInterval( ()=>
   { let v = 10*Math.sin((performance.now() - start) /1000.0) ;
     let now  =  YDataRendering.TimeConverter.ToUnixTime( YDataRendering.TimeConverter.UTCNow())
    renderer1.value=v;
    renderer2.value=v;
    renderer3.value=v;
    serie1.AddPoint(new  YDataRendering.pointXY(now,v));


   } ,40)

</script>

</body>
</html>