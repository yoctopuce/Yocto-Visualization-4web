<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<script>
  function log(st) {console.log(st);}
</script>
<body>
<canvas width="400" height="200" id="cnvs" style="border:1px solid black"></canvas>
<br><br>

<a href="javascript:window.DownloadAsPNG()">Download as PNG</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href="javascript:window.DownloadAsSVG()">Download as SVG</a>

<script type="module">
    import * as YDataRendering from "./Renderer/YDataRendererFull.d.ts";

  function formatDisplay(src,d)
  { return d.toFixed(4);
  }

  let canvas = document.getElementById("cnvs");
  var renderer = new YDataRendering.YAngularGauge(canvas,log);
  renderer.min =-10
  renderer.max =+10
  renderer.graduation =2;
  renderer.subgraduationCount = 5;

  let z1 = renderer.AddZone();
  z1.min=-10;
  z1.max=-5;
  z1.color = YDataRendering.YColor.LightGreen;
  z1.visible =true;

  let z2 = renderer.AddZone();
  z2.min=-5;
  z2.max=5;
  z2.color = YDataRendering.YColor.Orange;
  z2.visible =true;

  let z3 = renderer.AddZone();
  z3.min=5;
  z3.max=10;
  z3.color = YDataRendering.YColor.Red;
  z3.visible =true;

  renderer.value=0;
  renderer.valueFormater = formatDisplay;
  renderer.AllowRedraw() ;
  let start =  performance.now();
  setInterval( ()=>{ renderer.value = 10*Math.sin((performance.now() - start) /1000.0) ;} ,10)


  export function DownloadAsPNG()
  {
    renderer.captureAndDownloadImage(YDataRendering.YDataRenderer.CaptureType.PNG );
  }
  window.DownloadAsPNG = DownloadAsPNG;


  export function DownloadAsSVG()
  {
      renderer.captureAndDownloadImage(YDataRendering.YDataRenderer.CaptureType.SVG );
  }
  window.DownloadAsSVG = DownloadAsSVG;

</script>

</body>
</html>